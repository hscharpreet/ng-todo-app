var Qb=Object.defineProperty,Yb=Object.defineProperties;var Jb=Object.getOwnPropertyDescriptors;var Vv=Object.getOwnPropertySymbols;var Zb=Object.prototype.hasOwnProperty,Xb=Object.prototype.propertyIsEnumerable;var Lv=(t,e,n)=>e in t?Qb(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,E=(t,e)=>{for(var n in e||={})Zb.call(e,n)&&Lv(t,n,e[n]);if(Vv)for(var n of Vv(e))Xb.call(e,n)&&Lv(t,n,e[n]);return t},ce=(t,e)=>Yb(t,Jb(e));var p=(t,e,n)=>new Promise((r,i)=>{var s=c=>{try{a(n.next(c))}catch(u){i(u)}},o=c=>{try{a(n.throw(c))}catch(u){i(u)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((n=n.apply(t,e)).next())});var Uv=null;var gd=1,jv=Symbol("SIGNAL");function te(t){let e=Uv;return Uv=t,e}var Bv={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function eS(t){if(!(vd(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===gd)){if(!t.producerMustRecompute(t)&&!md(t)){t.dirty=!1,t.lastCleanEpoch=gd;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=gd}}function $v(t){return t&&(t.nextProducerIndex=0),te(t)}function Hv(t,e){if(te(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(vd(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)yd(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function md(t){ka(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(eS(n),r!==n.version))return!0}return!1}function qv(t){if(ka(t),vd(t))for(let e=0;e<t.producerNode.length;e++)yd(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function yd(t,e){if(tS(t),ka(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)yd(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];ka(i),i.producerIndexOfThis[r]=e}}function vd(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function ka(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function tS(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function nS(){throw new Error}var rS=nS;function zv(t){rS=t}function k(t){return typeof t=="function"}function ai(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Fa=ai(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function dr(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Ce=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(k(r))try{r()}catch(s){e=s instanceof Fa?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{Gv(s)}catch(o){e=e??[],o instanceof Fa?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Fa(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Gv(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&dr(n,e)}remove(e){let{_finalizers:n}=this;n&&dr(n,e),e instanceof t&&e._removeParent(this)}};Ce.EMPTY=(()=>{let t=new Ce;return t.closed=!0,t})();var _d=Ce.EMPTY;function Va(t){return t instanceof Ce||t&&"closed"in t&&k(t.remove)&&k(t.add)&&k(t.unsubscribe)}function Gv(t){k(t)?t():t.unsubscribe()}var Ot={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var ci={setTimeout(t,e,...n){let{delegate:r}=ci;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=ci;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function La(t){ci.setTimeout(()=>{let{onUnhandledError:e}=Ot;if(e)e(t);else throw t})}function Ms(){}var Wv=Id("C",void 0,void 0);function Kv(t){return Id("E",void 0,t)}function Qv(t){return Id("N",t,void 0)}function Id(t,e,n){return{kind:t,value:e,error:n}}var hr=null;function ui(t){if(Ot.useDeprecatedSynchronousErrorHandling){let e=!hr;if(e&&(hr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=hr;if(hr=null,n)throw r}}else t()}function Yv(t){Ot.useDeprecatedSynchronousErrorHandling&&hr&&(hr.errorThrown=!0,hr.error=t)}var fr=class extends Ce{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Va(e)&&e.add(this)):this.destination=oS}static create(e,n,r){return new li(e,n,r)}next(e){this.isStopped?Ed(Qv(e),this):this._next(e)}error(e){this.isStopped?Ed(Kv(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Ed(Wv,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},iS=Function.prototype.bind;function wd(t,e){return iS.call(t,e)}var Dd=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Ua(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Ua(r)}else Ua(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Ua(n)}}},li=class extends fr{constructor(e,n,r){super();let i;if(k(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Ot.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&wd(e.next,s),error:e.error&&wd(e.error,s),complete:e.complete&&wd(e.complete,s)}):i=e}this.destination=new Dd(i)}};function Ua(t){Ot.useDeprecatedSynchronousErrorHandling?Yv(t):La(t)}function sS(t){throw t}function Ed(t,e){let{onStoppedNotification:n}=Ot;n&&ci.setTimeout(()=>n(t,e))}var oS={closed:!0,next:Ms,error:sS,complete:Ms};var di=typeof Symbol=="function"&&Symbol.observable||"@@observable";function lt(t){return t}function Cd(...t){return Td(t)}function Td(t){return t.length===0?lt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var J=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=cS(n)?n:new li(n,r,i);return ui(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Jv(r),new r((i,s)=>{let o=new li({next:a=>{try{n(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[di](){return this}pipe(...n){return Td(n)(this)}toPromise(n){return n=Jv(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function Jv(t){var e;return(e=t??Ot.Promise)!==null&&e!==void 0?e:Promise}function aS(t){return t&&k(t.next)&&k(t.error)&&k(t.complete)}function cS(t){return t&&t instanceof fr||aS(t)&&Va(t)}function bd(t){return k(t?.lift)}function Z(t){return e=>{if(bd(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function H(t,e,n,r,i){return new Sd(t,e,n,r,i)}var Sd=class extends fr{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function hi(){return Z((t,e)=>{let n=null;t._refCount++;let r=H(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var fi=class extends J{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,bd(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ce;let n=this.getSubject();e.add(this.source.subscribe(H(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ce.EMPTY)}return e}refCount(){return hi()(this)}};var Zv=ai(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Xe=(()=>{class t extends J{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new ja(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Zv}next(n){ui(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){ui(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){ui(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?_d:(this.currentObservers=null,s.push(n),new Ce(()=>{this.currentObservers=null,dr(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new J;return n.source=this,n}}return t.create=(e,n)=>new ja(e,n),t})(),ja=class extends Xe{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:_d}};var Be=class extends Xe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Ad={now(){return(Ad.delegate||Date).now()},delegate:void 0};var Ba=class extends Ce{constructor(e,n){super()}schedule(e,n=0){return this}};var xs={setInterval(t,e,...n){let{delegate:r}=xs;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=xs;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var pi=class extends Ba{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return xs.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&xs.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,dr(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var gi=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};gi.now=Ad.now;var mi=class extends gi{constructor(e,n=gi.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Rd=new mi(pi);var $a=class extends pi{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Ha=class extends mi{};var Md=new Ha($a);var dt=new J(t=>t.complete());function Xv(t){return t&&k(t.schedule)}function e_(t){return t[t.length-1]}function qa(t){return k(e_(t))?t.pop():void 0}function Ln(t){return Xv(e_(t))?t.pop():void 0}function xd(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function n_(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})}function t_(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function pr(t){return this instanceof pr?(this.v=t,this):new pr(t)}function r_(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){r[h]&&(i[h]=function(f){return new Promise(function(g,v){s.push([h,f,g,v])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(g){d(s[0][3],g)}}function c(h){h.value instanceof pr?Promise.resolve(h.value.v).then(u,l):d(s[0][2],h)}function u(h){a("next",h)}function l(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function i_(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof t_=="function"?t_(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(u){s({value:u,done:a})},o)}}var za=t=>t&&typeof t.length=="number"&&typeof t!="function";function Ga(t){return k(t?.then)}function Wa(t){return k(t[di])}function Ka(t){return Symbol.asyncIterator&&k(t?.[Symbol.asyncIterator])}function Qa(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function uS(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ya=uS();function Ja(t){return k(t?.[Ya])}function Za(t){return r_(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield pr(n.read());if(i)return yield pr(void 0);yield yield pr(r)}}finally{n.releaseLock()}})}function Xa(t){return k(t?.getReader)}function be(t){if(t instanceof J)return t;if(t!=null){if(Wa(t))return lS(t);if(za(t))return dS(t);if(Ga(t))return hS(t);if(Ka(t))return s_(t);if(Ja(t))return fS(t);if(Xa(t))return pS(t)}throw Qa(t)}function lS(t){return new J(e=>{let n=t[di]();if(k(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function dS(t){return new J(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function hS(t){return new J(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,La)})}function fS(t){return new J(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function s_(t){return new J(e=>{gS(t,e).catch(n=>e.error(n))})}function pS(t){return s_(Za(t))}function gS(t,e){var n,r,i,s;return n_(this,void 0,void 0,function*(){try{for(n=i_(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function ot(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function Un(t,e=0){return Z((n,r)=>{n.subscribe(H(r,i=>ot(r,t,()=>r.next(i),e),()=>ot(r,t,()=>r.complete(),e),i=>ot(r,t,()=>r.error(i),e)))})}function jn(t,e=0){return Z((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function o_(t,e){return be(t).pipe(jn(e),Un(e))}function a_(t,e){return be(t).pipe(jn(e),Un(e))}function c_(t,e){return new J(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function u_(t,e){return new J(n=>{let r;return ot(n,e,()=>{r=t[Ya](),ot(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>k(r?.return)&&r.return()})}function ec(t,e){if(!t)throw new Error("Iterable cannot be null");return new J(n=>{ot(n,e,()=>{let r=t[Symbol.asyncIterator]();ot(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function l_(t,e){return ec(Za(t),e)}function d_(t,e){if(t!=null){if(Wa(t))return o_(t,e);if(za(t))return c_(t,e);if(Ga(t))return a_(t,e);if(Ka(t))return ec(t,e);if(Ja(t))return u_(t,e);if(Xa(t))return l_(t,e)}throw Qa(t)}function ve(t,e){return e?d_(t,e):be(t)}function N(...t){let e=Ln(t);return ve(t,e)}function yi(t,e){let n=k(t)?t:()=>t,r=i=>i.error(n());return new J(e?i=>e.schedule(r,0,i):r)}function Nd(t){return!!t&&(t instanceof J||k(t.lift)&&k(t.subscribe))}var vn=ai(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function q(t,e){return Z((n,r)=>{let i=0;n.subscribe(H(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:mS}=Array;function yS(t,e){return mS(e)?t(...e):t(e)}function tc(t){return q(e=>yS(t,e))}var{isArray:vS}=Array,{getPrototypeOf:_S,prototype:IS,keys:wS}=Object;function nc(t){if(t.length===1){let e=t[0];if(vS(e))return{args:e,keys:null};if(ES(e)){let n=wS(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function ES(t){return t&&typeof t=="object"&&_S(t)===IS}function rc(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Ns(...t){let e=Ln(t),n=qa(t),{args:r,keys:i}=nc(t);if(r.length===0)return ve([],e);let s=new J(DS(r,e,i?o=>rc(i,o):lt));return n?s.pipe(tc(n)):s}function DS(t,e,n=lt){return r=>{h_(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)h_(e,()=>{let u=ve(t[c],e),l=!1;u.subscribe(H(r,d=>{s[c]=d,l||(l=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function h_(t,e,n){t?ot(n,t,e):e()}function f_(t,e,n,r,i,s,o,a){let c=[],u=0,l=0,d=!1,h=()=>{d&&!c.length&&!u&&e.complete()},f=v=>u<r?g(v):c.push(v),g=v=>{s&&e.next(v),u++;let _=!1;be(n(v,l++)).subscribe(H(e,C=>{i?.(C),s?f(C):e.next(C)},()=>{_=!0},void 0,()=>{if(_)try{for(u--;c.length&&u<r;){let C=c.shift();o?ot(e,o,()=>g(C)):g(C)}h()}catch(C){e.error(C)}}))};return t.subscribe(H(e,f,()=>{d=!0,h()})),()=>{a?.()}}function Se(t,e,n=1/0){return k(e)?Se((r,i)=>q((s,o)=>e(r,s,i,o))(be(t(r,i))),n):(typeof e=="number"&&(n=e),Z((r,i)=>f_(r,i,t,n)))}function vi(t=1/0){return Se(lt,t)}function p_(){return vi(1)}function _i(...t){return p_()(ve(t,Ln(t)))}function ic(t){return new J(e=>{be(t()).subscribe(e)})}function Pd(...t){let e=qa(t),{args:n,keys:r}=nc(t),i=new J(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),c=o,u=o;for(let l=0;l<o;l++){let d=!1;be(n[l]).subscribe(H(s,h=>{d||(d=!0,u--),a[l]=h},()=>c--,void 0,()=>{(!c||!d)&&(u||s.next(r?rc(r,a):a),s.complete())}))}});return e?i.pipe(tc(e)):i}function Et(t,e){return Z((n,r)=>{let i=0;n.subscribe(H(r,s=>t.call(e,s,i++)&&r.next(s)))})}function Bn(t){return Z((e,n)=>{let r=null,i=!1,s;r=e.subscribe(H(n,void 0,void 0,o=>{s=be(t(o,Bn(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function g_(t,e,n,r,i){return(s,o)=>{let a=n,c=e,u=0;s.subscribe(H(o,l=>{let d=u++;c=a?t(c,l,d):(a=!0,l),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function gr(t,e){return k(e)?Se(t,e,1):Se(t,1)}function $n(t){return Z((e,n)=>{let r=!1;e.subscribe(H(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function _n(t){return t<=0?()=>dt:Z((e,n)=>{let r=0;e.subscribe(H(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Od(t){return q(()=>t)}function sc(t=CS){return Z((e,n)=>{let r=!1;e.subscribe(H(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function CS(){return new vn}function Ps(t){return Z((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Gt(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Et((i,s)=>t(i,s,r)):lt,_n(1),n?$n(e):sc(()=>new vn))}function Ii(t){return t<=0?()=>dt:Z((e,n)=>{let r=[];e.subscribe(H(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function kd(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Et((i,s)=>t(i,s,r)):lt,Ii(1),n?$n(e):sc(()=>new vn))}function Fd(t,e){return Z(g_(t,e,arguments.length>=2,!0))}function Vd(...t){let e=Ln(t);return Z((n,r)=>{(e?_i(t,n,e):_i(t,n)).subscribe(r)})}function Dt(t,e){return Z((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(H(r,c=>{i?.unsubscribe();let u=0,l=s++;be(t(c,l)).subscribe(i=H(r,d=>r.next(e?e(c,d,l,u++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Ld(t){return Z((e,n)=>{be(t).subscribe(H(n,()=>n.complete(),Ms)),!n.closed&&e.subscribe(n)})}function xe(t,e,n){let r=k(t)||e||n?{next:t,error:e,complete:n}:t;return r?Z((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(H(s,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),s.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):lt}var TS="https://g.co/ng/security#xss",T=class extends Error{constructor(e,n){super(Kh(e,n)),this.code=e}};function Kh(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function Gs(t){return{toString:t}.toString()}var oc="__parameters__";function bS(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function eI(t,e,n){return Gs(()=>{let r=bS(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,u,l){let d=c.hasOwnProperty(oc)?c[oc]:Object.defineProperty(c,oc,{value:[]})[oc];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(o),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var ht=globalThis;function le(t){for(let e in t)if(t[e]===le)return e;throw Error("Could not find renamed property on target object.")}function SS(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function tt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(tt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function m_(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var AS=le({__forward_ref__:le});function Ar(t){return t.__forward_ref__=Ar,t.toString=function(){return tt(this())},t}function et(t){return tI(t)?t():t}function tI(t){return typeof t=="function"&&t.hasOwnProperty(AS)&&t.__forward_ref__===Ar}function S(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Pe(t){return{providers:t.providers||[],imports:t.imports||[]}}function Vc(t){return y_(t,rI)||y_(t,iI)}function nI(t){return Vc(t)!==null}function y_(t,e){return t.hasOwnProperty(e)?t[e]:null}function RS(t){let e=t&&(t[rI]||t[iI]);return e||null}function v_(t){return t&&(t.hasOwnProperty(__)||t.hasOwnProperty(MS))?t[__]:null}var rI=le({\u0275prov:le}),__=le({\u0275inj:le}),iI=le({ngInjectableDef:le}),MS=le({ngInjectorDef:le}),b=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=S({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function sI(t){return t&&!!t.\u0275providers}var xS=le({\u0275cmp:le}),NS=le({\u0275dir:le}),PS=le({\u0275pipe:le}),OS=le({\u0275mod:le}),mc=le({\u0275fac:le}),Os=le({__NG_ELEMENT_ID__:le}),I_=le({__NG_ENV_ID__:le});function Qh(t){return typeof t=="string"?t:t==null?"":String(t)}function kS(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Qh(t)}function FS(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new T(-200,t)}function Yh(t,e){throw new T(-201,!1)}var B=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(B||{}),Xd;function oI(){return Xd}function Ct(t){let e=Xd;return Xd=t,e}function aI(t,e,n){let r=Vc(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&B.Optional)return null;if(e!==void 0)return e;Yh(t,"Injector")}var VS={},Fs=VS,eh="__NG_DI_FLAG__",yc="ngTempTokenPath",LS="ngTokenPath",US=/\n/gm,jS="\u0275",w_="__source",Ti;function BS(){return Ti}function Hn(t){let e=Ti;return Ti=t,e}function $S(t,e=B.Default){if(Ti===void 0)throw new T(-203,!1);return Ti===null?aI(t,void 0,e):Ti.get(t,e&B.Optional?null:void 0,e)}function A(t,e=B.Default){return(oI()||$S)(et(t),e)}function w(t,e=B.Default){return A(t,Lc(e))}function Lc(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function th(t){let e=[];for(let n=0;n<t.length;n++){let r=et(t[n]);if(Array.isArray(r)){if(r.length===0)throw new T(900,!1);let i,s=B.Default;for(let o=0;o<r.length;o++){let a=r[o],c=HS(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(A(i,s))}else e.push(A(r))}return e}function cI(t,e){return t[eh]=e,t.prototype[eh]=e,t}function HS(t){return t[eh]}function qS(t,e,n,r){let i=t[yc];throw e[w_]&&i.unshift(e[w_]),t.message=zS(`
`+t.message,i,n,r),t[LS]=i,t[yc]=null,t}function zS(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==jS?t.slice(2):t;let i=tt(e);if(Array.isArray(e))i=e.map(tt).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):tt(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(US,`
  `)}`}var bt=cI(eI("Optional"),8);var Jh=cI(eI("SkipSelf"),4);function Si(t,e){let n=t.hasOwnProperty(mc);return n?t[mc]:null}function GS(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],s=e[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}function WS(t){return t.flat(Number.POSITIVE_INFINITY)}function Zh(t,e){t.forEach(n=>Array.isArray(n)?Zh(n,e):e(n))}function uI(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function vc(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function KS(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function QS(t,e,n){let r=Ws(t,e);return r>=0?t[r|1]=n:(r=~r,KS(t,r,e,n)),r}function Ud(t,e){let n=Ws(t,e);if(n>=0)return t[n|1]}function Ws(t,e){return YS(t,e,1)}function YS(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var Ai={},Tt=[],Ri=new b(""),lI=new b("",-1),dI=new b(""),_c=class{get(e,n=Fs){if(n===Fs){let r=new Error(`NullInjectorError: No provider for ${tt(e)}!`);throw r.name="NullInjectorError",r}return n}},hI=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(hI||{}),Qt=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Qt||{}),at=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(at||{});function JS(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function nh(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];XS(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function ZS(t){return t===3||t===4||t===6}function XS(t){return t.charCodeAt(0)===64}function Vs(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?E_(t,n,i,null,e[++r]):E_(t,n,i,null,null))}}return t}function E_(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var fI="ng-template";function eA(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&JS(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Xh(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function Xh(t){return t.type===4&&t.value!==fI}function tA(t,e,n){let r=t.type===4&&!n?fI:t.value;return e===r}function nA(t,e,n){let r=4,i=t.attrs,s=i!==null?sA(i):0,o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!kt(r)&&!kt(c))return!1;if(o&&kt(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!tA(t,c,n)||c===""&&e.length===1){if(kt(r))return!1;o=!0}}else if(r&8){if(i===null||!eA(t,i,c,n)){if(kt(r))return!1;o=!0}}else{let u=e[++a],l=rA(c,i,Xh(t),n);if(l===-1){if(kt(r))return!1;o=!0;continue}if(u!==""){let d;if(l>s?d="":d=i[l+1].toLowerCase(),r&2&&u!==d){if(kt(r))return!1;o=!0}}}}return kt(r)||o}function kt(t){return(t&1)===0}function rA(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return oA(e,t)}function iA(t,e,n=!1){for(let r=0;r<e.length;r++)if(nA(t,e[r],n))return!0;return!1}function sA(t){for(let e=0;e<t.length;e++){let n=t[e];if(ZS(n))return e}return t.length}function oA(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function D_(t,e){return t?":not("+e.trim()+")":e}function aA(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!kt(o)&&(e+=D_(s,i),i=""),r=o,s=s||!kt(r);n++}return i!==""&&(e+=D_(s,i)),e}function cA(t){return t.map(aA).join(",")}function uA(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!kt(i))break;i=s}r++}return{attrs:e,classes:n}}function ki(t){return Gs(()=>{let e=vI(t),n=ce(E({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===hI.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Qt.Emulated,styles:t.styles||Tt,_:null,schemas:t.schemas||null,tView:null,id:""});_I(n);let r=t.dependencies;return n.directiveDefs=T_(r,!1),n.pipeDefs=T_(r,!0),n.id=hA(n),n})}function lA(t){return zn(t)||pI(t)}function dA(t){return t!==null}function Oe(t){return Gs(()=>({type:t.type,bootstrap:t.bootstrap||Tt,declarations:t.declarations||Tt,imports:t.imports||Tt,exports:t.exports||Tt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function C_(t,e){if(t==null)return Ai;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=at.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==at.None?[r,a]:r,e[s]=o):n[s]=r}return n}function qe(t){return Gs(()=>{let e=vI(t);return _I(e),e})}function zn(t){return t[xS]||null}function pI(t){return t[NS]||null}function gI(t){return t[PS]||null}function mI(t){let e=zn(t)||pI(t)||gI(t);return e!==null?e.standalone:!1}function yI(t,e){let n=t[OS]||null;if(!n&&e===!0)throw new Error(`Type ${tt(t)} does not have '\u0275mod' property.`);return n}function vI(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Ai,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||Tt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:C_(t.inputs,e),outputs:C_(t.outputs),debugInfo:null}}function _I(t){t.features?.forEach(e=>e(t))}function T_(t,e){if(!t)return null;let n=e?gI:lA;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(dA)}function hA(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function fA(...t){return{\u0275providers:II(!0,t),\u0275fromNgModule:!0}}function II(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return Zh(e,o=>{let a=o;rh(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&wI(i,s),n}function wI(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];ef(i,s=>{e(s,r)})}}function rh(t,e,n,r){if(t=et(t),!t)return!1;let i=null,s=v_(t),o=!s&&zn(t);if(!s&&!o){let c=t.ngModule;if(s=v_(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let u of c)rh(u,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let u;try{Zh(s.imports,l=>{rh(l,e,n,r)&&(u||=[],u.push(l))})}finally{}u!==void 0&&wI(u,e)}if(!a){let u=Si(i)||(()=>new i);e({provide:i,useFactory:u,deps:Tt},i),e({provide:dI,useValue:i,multi:!0},i),e({provide:Ri,useValue:()=>A(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let u=t;ef(c,l=>{e(l,u)})}}else return!1;return i!==t&&t.providers!==void 0}function ef(t,e){for(let n of t)sI(n)&&(n=n.\u0275providers),Array.isArray(n)?ef(n,e):e(n)}var pA=le({provide:String,useValue:le});function EI(t){return t!==null&&typeof t=="object"&&pA in t}function gA(t){return!!(t&&t.useExisting)}function mA(t){return!!(t&&t.useFactory)}function Mi(t){return typeof t=="function"}function yA(t){return!!t.useClass}var Uc=new b(""),lc={},vA={},jd;function tf(){return jd===void 0&&(jd=new _c),jd}var ct=class{},Ls=class extends ct{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,sh(e,o=>this.processProvider(o)),this.records.set(lI,wi(void 0,this)),i.has("environment")&&this.records.set(ct,wi(void 0,this));let s=this.records.get(Uc);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(dI,Tt,B.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=te(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),te(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Hn(this),r=Ct(void 0),i;try{return e()}finally{Hn(n),Ct(r)}}get(e,n=Fs,r=B.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(I_))return e[I_](this);r=Lc(r);let i,s=Hn(this),o=Ct(void 0);try{if(!(r&B.SkipSelf)){let c=this.records.get(e);if(c===void 0){let u=DA(e)&&Vc(e);u&&this.injectableDefInScope(u)?c=wi(ih(e),lc):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&B.Self?tf():this.parent;return n=r&B.Optional&&n===Fs?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[yc]=a[yc]||[]).unshift(tt(e)),s)throw a;return qS(a,e,"R3InjectorError",this.source)}else throw a}finally{Ct(o),Hn(s)}}resolveInjectorInitializers(){let e=te(null),n=Hn(this),r=Ct(void 0),i;try{let s=this.get(Ri,Tt,B.Self);for(let o of s)o()}finally{Hn(n),Ct(r),te(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(tt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new T(205,!1)}processProvider(e){e=et(e);let n=Mi(e)?e:et(e&&e.provide),r=IA(e);if(!Mi(e)&&e.multi===!0){let i=this.records.get(n);i||(i=wi(void 0,lc,!0),i.factory=()=>th(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=te(null);try{return n.value===lc&&(n.value=vA,n.value=n.factory()),typeof n.value=="object"&&n.value&&EA(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{te(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=et(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function ih(t){let e=Vc(t),n=e!==null?e.factory:Si(t);if(n!==null)return n;if(t instanceof b)throw new T(204,!1);if(t instanceof Function)return _A(t);throw new T(204,!1)}function _A(t){if(t.length>0)throw new T(204,!1);let n=RS(t);return n!==null?()=>n.factory(t):()=>new t}function IA(t){if(EI(t))return wi(void 0,t.useValue);{let e=DI(t);return wi(e,lc)}}function DI(t,e,n){let r;if(Mi(t)){let i=et(t);return Si(i)||ih(i)}else if(EI(t))r=()=>et(t.useValue);else if(mA(t))r=()=>t.useFactory(...th(t.deps||[]));else if(gA(t))r=()=>A(et(t.useExisting));else{let i=et(t&&(t.useClass||t.provide));if(wA(t))r=()=>new i(...th(t.deps));else return Si(i)||ih(i)}return r}function wi(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function wA(t){return!!t.deps}function EA(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function DA(t){return typeof t=="function"||typeof t=="object"&&t instanceof b}function sh(t,e){for(let n of t)Array.isArray(n)?sh(n,e):n&&sI(n)?sh(n.\u0275providers,e):e(n)}function Cn(t,e){t instanceof Ls&&t.assertNotDestroyed();let n,r=Hn(t),i=Ct(void 0);try{return e()}finally{Hn(r),Ct(i)}}function CI(){return oI()!==void 0||BS()!=null}function CA(t){if(!CI())throw new T(-203,!1)}function TA(t){let e=ht.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function bA(t){return typeof t=="function"}var Tn=0,U=1,x=2,$e=3,Ft=4,Lt=5,Ic=6,Us=7,Vt=8,xi=9,Yt=10,He=11,js=12,b_=13,Fi=14,Jt=15,Ks=16,Ei=17,In=18,jc=19,TI=20,qn=21,Bd=22,vr=23,wn=25,bI=1;var _r=7,wc=8,Ni=9,ft=10,nf=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(nf||{});function mr(t){return Array.isArray(t)&&typeof t[bI]=="object"}function bn(t){return Array.isArray(t)&&t[bI]===!0}function SI(t){return(t.flags&4)!==0}function Bc(t){return t.componentOffset>-1}function rf(t){return(t.flags&1)===1}function Gn(t){return!!t.template}function SA(t){return(t[x]&512)!==0}var oh=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function AI(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Rr(){return RI}function RI(t){return t.type.prototype.ngOnChanges&&(t.setInput=RA),AA}Rr.ngInherit=!0;function AA(){let t=xI(this),e=t?.current;if(e){let n=t.previous;if(n===Ai)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function RA(t,e,n,r,i){let s=this.declaredInputs[r],o=xI(t)||MA(t,{previous:Ai,current:null}),a=o.current||(o.current={}),c=o.previous,u=c[s];a[s]=new oh(u&&u.currentValue,n,c===Ai),AI(t,e,i,n)}var MI="__ngSimpleChanges__";function xI(t){return t[MI]||null}function MA(t,e){return t[MI]=e}var S_=null;var Wt=function(t,e,n){S_?.(t,e,n)},xA="svg",NA="math",PA=!1;function OA(){return PA}function Zt(t){for(;Array.isArray(t);)t=t[Tn];return t}function NI(t,e){return Zt(e[t])}function St(t,e){return Zt(e[t.index])}function PI(t,e){return t.data[e]}function kA(t,e){return t[e]}function Kn(t,e){let n=e[t];return mr(n)?n:n[Tn]}function FA(t){return(t[x]&4)===4}function sf(t){return(t[x]&128)===128}function VA(t){return bn(t[$e])}function Ec(t,e){return e==null?null:t[e]}function OI(t){t[Ei]=0}function LA(t){t[x]&1024||(t[x]|=1024,sf(t)&&Bs(t))}function UA(t,e){for(;t>0;)e=e[Fi],t--;return e}function of(t){return!!(t[x]&9216||t[vr]?.dirty)}function ah(t){t[Yt].changeDetectionScheduler?.notify(1),of(t)?Bs(t):t[x]&64&&(OA()?(t[x]|=1024,Bs(t)):t[Yt].changeDetectionScheduler?.notify())}function Bs(t){t[Yt].changeDetectionScheduler?.notify();let e=$s(t);for(;e!==null&&!(e[x]&8192||(e[x]|=8192,!sf(e)));)e=$s(e)}function kI(t,e){if((t[x]&256)===256)throw new T(911,!1);t[qn]===null&&(t[qn]=[]),t[qn].push(e)}function jA(t,e){if(t[qn]===null)return;let n=t[qn].indexOf(e);n!==-1&&t[qn].splice(n,1)}function $s(t){let e=t[$e];return bn(e)?e[$e]:e}var j={lFrame:$I(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function BA(){return j.lFrame.elementDepthCount}function $A(){j.lFrame.elementDepthCount++}function HA(){j.lFrame.elementDepthCount--}function FI(){return j.bindingsEnabled}function qA(){return j.skipHydrationRootTNode!==null}function zA(t){return j.skipHydrationRootTNode===t}function GA(){j.skipHydrationRootTNode=null}function fe(){return j.lFrame.lView}function pt(){return j.lFrame.tView}function _e(t){return j.lFrame.contextLView=t,t[Vt]}function Ie(t){return j.lFrame.contextLView=null,t}function At(){let t=VI();for(;t!==null&&t.type===64;)t=t.parent;return t}function VI(){return j.lFrame.currentTNode}function WA(){let t=j.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Qs(t,e){let n=j.lFrame;n.currentTNode=t,n.isParent=e}function LI(){return j.lFrame.isParent}function KA(){j.lFrame.isParent=!1}function QA(){return j.lFrame.contextLView}function YA(){let t=j.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function JA(t){return j.lFrame.bindingIndex=t}function af(){return j.lFrame.bindingIndex++}function ZA(t){let e=j.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function XA(){return j.lFrame.inI18n}function eR(t,e){let n=j.lFrame;n.bindingIndex=n.bindingRootIndex=t,ch(e)}function tR(){return j.lFrame.currentDirectiveIndex}function ch(t){j.lFrame.currentDirectiveIndex=t}function nR(t){let e=j.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function UI(){return j.lFrame.currentQueryIndex}function cf(t){j.lFrame.currentQueryIndex=t}function rR(t){let e=t[U];return e.type===2?e.declTNode:e.type===1?t[Lt]:null}function jI(t,e,n){if(n&B.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&B.Host);)if(i=rR(s),i===null||(s=s[Fi],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=j.lFrame=BI();return r.currentTNode=e,r.lView=t,!0}function uf(t){let e=BI(),n=t[U];j.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function BI(){let t=j.lFrame,e=t===null?null:t.child;return e===null?$I(t):e}function $I(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function HI(){let t=j.lFrame;return j.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var qI=HI;function lf(){let t=HI();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function iR(t){return(j.lFrame.contextLView=UA(t,j.lFrame.contextLView))[Vt]}function Vi(){return j.lFrame.selectedIndex}function Ir(t){j.lFrame.selectedIndex=t}function zI(){let t=j.lFrame;return PI(t.tView,t.selectedIndex)}function sR(){return j.lFrame.currentNamespace}var GI=!0;function df(){return GI}function hf(t){GI=t}function oR(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=RI(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function ff(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:l}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),u&&((t.viewHooks??=[]).push(n,u),(t.viewCheckHooks??=[]).push(n,u)),l!=null&&(t.destroyHooks??=[]).push(n,l)}}function dc(t,e,n){WI(t,e,3,n)}function hc(t,e,n,r){(t[x]&3)===n&&WI(t,e,n,r)}function $d(t,e){let n=t[x];(n&3)===e&&(n&=16383,n+=1,t[x]=n)}function WI(t,e,n,r){let i=r!==void 0?t[Ei]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[Ei]+=65536),(a<s||s==-1)&&(aR(t,n,e,c),t[Ei]=(t[Ei]&4294901760)+c+2),c++}function A_(t,e){Wt(4,t,e);let n=te(null);try{e.call(t)}finally{te(n),Wt(5,t,e)}}function aR(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[x]>>14<t[Ei]>>16&&(t[x]&3)===e&&(t[x]+=16384,A_(a,s)):A_(a,s)}var bi=-1,wr=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function cR(t){return t instanceof wr}function uR(t){return(t.flags&8)!==0}function lR(t){return(t.flags&16)!==0}function KI(t){return t!==bi}function Dc(t){return t&32767}function dR(t){return t>>16}function Cc(t,e){let n=dR(t),r=e;for(;n>0;)r=r[Fi],n--;return r}var uh=!0;function R_(t){let e=uh;return uh=t,e}var hR=256,QI=hR-1,YI=5,fR=0,Kt={};function pR(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Os)&&(r=n[Os]),r==null&&(r=n[Os]=fR++);let i=r&QI,s=1<<i;e.data[t+(i>>YI)]|=s}function Tc(t,e){let n=JI(t,e);if(n!==-1)return n;let r=e[U];r.firstCreatePass&&(t.injectorIndex=e.length,Hd(r.data,t),Hd(e,null),Hd(r.blueprint,null));let i=pf(t,e),s=t.injectorIndex;if(KI(i)){let o=Dc(i),a=Cc(i,e),c=a[U].data;for(let u=0;u<8;u++)e[s+u]=a[o+u]|c[o+u]}return e[s+8]=i,s}function Hd(t,e){t.push(0,0,0,0,0,0,0,0,e)}function JI(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function pf(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=nw(i),r===null)return bi;if(n++,i=i[Fi],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return bi}function lh(t,e,n){pR(t,e,n)}function ZI(t,e,n){if(n&B.Optional||t!==void 0)return t;Yh(e,"NodeInjector")}function XI(t,e,n,r){if(n&B.Optional&&r===void 0&&(r=null),!(n&(B.Self|B.Host))){let i=t[xi],s=Ct(void 0);try{return i?i.get(e,r,n&B.Optional):aI(e,r,n&B.Optional)}finally{Ct(s)}}return ZI(r,e,n)}function ew(t,e,n,r=B.Default,i){if(t!==null){if(e[x]&2048&&!(r&B.Self)){let o=vR(t,e,n,r,Kt);if(o!==Kt)return o}let s=tw(t,e,n,r,Kt);if(s!==Kt)return s}return XI(e,n,r,i)}function tw(t,e,n,r,i){let s=mR(n);if(typeof s=="function"){if(!jI(e,t,r))return r&B.Host?ZI(i,n,r):XI(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&B.Optional))Yh(n);else return o}finally{qI()}}else if(typeof s=="number"){let o=null,a=JI(t,e),c=bi,u=r&B.Host?e[Jt][Lt]:null;for((a===-1||r&B.SkipSelf)&&(c=a===-1?pf(t,e):e[a+8],c===bi||!x_(r,!1)?a=-1:(o=e[U],a=Dc(c),e=Cc(c,e)));a!==-1;){let l=e[U];if(M_(s,a,l.data)){let d=gR(a,e,n,o,r,u);if(d!==Kt)return d}c=e[a+8],c!==bi&&x_(r,e[U].data[a+8]===u)&&M_(s,a,e)?(o=l,a=Dc(c),e=Cc(c,e)):a=-1}}return i}function gR(t,e,n,r,i,s){let o=e[U],a=o.data[t+8],c=r==null?Bc(a)&&uh:r!=o&&(a.type&3)!==0,u=i&B.Host&&s===a,l=fc(a,o,n,c,u);return l!==null?Er(e,o,l,a):Kt}function fc(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,c=t.directiveStart,u=t.directiveEnd,l=s>>20,d=r?a:a+l,h=i?a+l:u;for(let f=d;f<h;f++){let g=o[f];if(f<c&&n===g||f>=c&&g.type===n)return f}if(i){let f=o[c];if(f&&Gn(f)&&f.type===n)return c}return null}function Er(t,e,n,r){let i=t[n],s=e.data;if(cR(i)){let o=i;o.resolving&&FS(kS(s[n]));let a=R_(o.canSeeViewProviders);o.resolving=!0;let c,u=o.injectImpl?Ct(o.injectImpl):null,l=jI(t,r,B.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&oR(n,s[n],e)}finally{u!==null&&Ct(u),R_(a),o.resolving=!1,qI()}}return i}function mR(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Os)?t[Os]:void 0;return typeof e=="number"?e>=0?e&QI:yR:e}function M_(t,e,n){let r=1<<t;return!!(n[e+(t>>YI)]&r)}function x_(t,e){return!(t&B.Self)&&!(t&B.Host&&e)}var yr=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return ew(this._tNode,this._lView,e,Lc(r),n)}};function yR(){return new yr(At(),fe())}function Li(t){return Gs(()=>{let e=t.prototype.constructor,n=e[mc]||dh(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[mc]||dh(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function dh(t){return tI(t)?()=>{let e=dh(et(t));return e&&e()}:Si(t)}function vR(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[x]&2048&&!(o[x]&512);){let a=tw(s,o,n,r|B.Self,Kt);if(a!==Kt)return a;let c=s.parent;if(!c){let u=o[TI];if(u){let l=u.get(n,Kt,r);if(l!==Kt)return l}c=nw(o),o=o[Fi]}s=c}return i}function nw(t){let e=t[U],n=e.type;return n===2?e.declTNode:n===1?t[Lt]:null}function N_(t,e=null,n=null,r){let i=rw(t,e,n,r);return i.resolveInjectorInitializers(),i}function rw(t,e=null,n=null,r,i=new Set){let s=[n||Tt,fA(t)];return r=r||(typeof t=="object"?void 0:tt(t)),new Ls(s,e||tf(),r||null,i)}var nt=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return N_({name:""},i,r,"");{let s=r.name??"";return N_({name:s},r.parent,r.providers,s)}}};e.THROW_IF_NOT_FOUND=Fs,e.NULL=new _c,e.\u0275prov=S({token:e,providedIn:"any",factory:()=>A(lI)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var _R="ngOriginalError";function qd(t){return t[_R]}var Xt=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&qd(e);for(;n&&qd(n);)n=qd(n);return n||null}},iw=new b("",{providedIn:"root",factory:()=>w(Xt).handleError.bind(void 0)}),gf=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=IR,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),hh=class extends gf{constructor(e){super(),this._lView=e}onDestroy(e){return kI(this._lView,e),()=>jA(this._lView,e)}};function IR(){return new hh(fe())}function wR(){return Ui(At(),fe())}function Ui(t,e){return new Ut(St(t,e))}var Ut=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=wR;let t=e;return t})();function ER(t){return t instanceof Ut?t.nativeElement:t}var fh=class extends Xe{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,CI()&&(this.destroyRef=w(gf,{optional:!0})??void 0)}emit(e){let n=te(null);try{super.next(e)}finally{te(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=zd(s),i&&(i=zd(i)),o&&(o=zd(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Ce&&e.add(a),a}};function zd(t){return e=>{setTimeout(t,void 0,e)}}var Te=fh;function DR(){return this._results[Symbol.iterator]()}var ph=class t{get changes(){return this._changes??=new Te}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=DR)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let r=WS(e);(this._changesDetected=!GS(this._results,r,n))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function sw(t){return(t.flags&128)===128}var ow=new Map,CR=0;function TR(){return CR++}function bR(t){ow.set(t[jc],t)}function SR(t){ow.delete(t[jc])}var P_="__ngContext__";function Dr(t,e){mr(e)?(t[P_]=e[jc],bR(e)):t[P_]=e}function aw(t){return uw(t[js])}function cw(t){return uw(t[Ft])}function uw(t){for(;t!==null&&!bn(t);)t=t[Ft];return t}var gh;function lw(t){gh=t}function AR(){if(gh!==void 0)return gh;if(typeof document<"u")return document;throw new T(210,!1)}var $c=new b("",{providedIn:"root",factory:()=>RR}),RR="ng",mf=new b(""),en=new b("",{providedIn:"platform",factory:()=>"unknown"});var yf=new b("",{providedIn:"root",factory:()=>AR().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var MR="h",xR="b";var NR=()=>null;function vf(t,e,n=!1){return NR(t,e,n)}var dw=!1,PR=new b("",{providedIn:"root",factory:()=>dw});var mh=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${TS})`}};function _f(t){return t instanceof mh?t.changingThisBreaksApplicationSecurity:t}function hw(t){return t.ownerDocument.defaultView}function fw(t){return t instanceof Function?t():t}function OR(t){return(t??w(nt)).get(en)==="browser"}var En=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(En||{}),kR;function If(t,e){return kR(t,e)}function Di(t,e,n,r,i){if(r!=null){let s,o=!1;bn(r)?s=r:mr(r)&&(o=!0,r=r[Tn]);let a=Zt(r);t===0&&n!==null?i==null?vw(e,n,a):bc(e,n,a,i||null,!0):t===1&&n!==null?bc(e,n,a,i||null,!0):t===2?ZR(e,a,o):t===3&&e.destroyNode(a),s!=null&&eM(e,t,s,n,i)}}function FR(t,e){return t.createText(e)}function VR(t,e,n){t.setValue(e,n)}function pw(t,e,n){return t.createElement(e,n)}function LR(t,e){gw(t,e),e[Tn]=null,e[Lt]=null}function UR(t,e,n,r,i,s){r[Tn]=i,r[Lt]=e,Hc(t,r,n,1,i,s)}function gw(t,e){e[Yt].changeDetectionScheduler?.notify(1),Hc(t,e,e[He],2,null,null)}function jR(t){let e=t[js];if(!e)return Gd(t[U],t);for(;e;){let n=null;if(mr(e))n=e[js];else{let r=e[ft];r&&(n=r)}if(!n){for(;e&&!e[Ft]&&e!==t;)mr(e)&&Gd(e[U],e),e=e[$e];e===null&&(e=t),mr(e)&&Gd(e[U],e),n=e&&e[Ft]}e=n}}function BR(t,e,n,r){let i=ft+r,s=n.length;r>0&&(n[i-1][Ft]=e),r<s-ft?(e[Ft]=n[i],uI(n,ft+r,e)):(n.push(e),e[Ft]=null),e[$e]=n;let o=e[Ks];o!==null&&n!==o&&$R(o,e);let a=e[In];a!==null&&a.insertView(t),ah(e),e[x]|=128}function $R(t,e){let n=t[Ni],i=e[$e][$e][Jt];e[Jt]!==i&&(t[x]|=nf.HasTransplantedViews),n===null?t[Ni]=[e]:n.push(e)}function mw(t,e){let n=t[Ni],r=n.indexOf(e);n.splice(r,1)}function yh(t,e){if(t.length<=ft)return;let n=ft+e,r=t[n];if(r){let i=r[Ks];i!==null&&i!==t&&mw(i,r),e>0&&(t[n-1][Ft]=r[Ft]);let s=vc(t,ft+e);LR(r[U],r);let o=s[In];o!==null&&o.detachView(s[U]),r[$e]=null,r[Ft]=null,r[x]&=-129}return r}function yw(t,e){if(!(e[x]&256)){let n=e[He];n.destroyNode&&Hc(t,e,n,3,null,null),jR(e)}}function Gd(t,e){if(e[x]&256)return;let n=te(null);try{e[x]&=-129,e[x]|=256,e[vr]&&qv(e[vr]),qR(t,e),HR(t,e),e[U].type===1&&e[He].destroy();let r=e[Ks];if(r!==null&&bn(e[$e])){r!==e[$e]&&mw(r,e);let i=e[In];i!==null&&i.detachView(t)}SR(e)}finally{te(n)}}function HR(t,e){let n=t.cleanup,r=e[Us];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[Us]=null);let i=e[qn];if(i!==null){e[qn]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function qR(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof wr)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];Wt(4,a,c);try{c.call(a)}finally{Wt(5,a,c)}}else{Wt(4,i,s);try{s.call(i)}finally{Wt(5,i,s)}}}}}function zR(t,e,n){return GR(t,e.parent,n)}function GR(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[Tn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===Qt.None||s===Qt.Emulated)return null}return St(r,n)}}function bc(t,e,n,r,i){t.insertBefore(e,n,r,i)}function vw(t,e,n){t.appendChild(e,n)}function O_(t,e,n,r,i){r!==null?bc(t,e,n,r,i):vw(t,e,n)}function WR(t,e,n,r){t.removeChild(e,n,r)}function wf(t,e){return t.parentNode(e)}function KR(t,e){return t.nextSibling(e)}function QR(t,e,n){return JR(t,e,n)}function YR(t,e,n){return t.type&40?St(t,n):null}var JR=YR,k_;function Ef(t,e,n,r){let i=zR(t,r,e),s=e[He],o=r.parent||e[Lt],a=QR(o,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)O_(s,i,n[c],a,!1);else O_(s,i,n,a,!1);k_!==void 0&&k_(s,r,e,n,i)}function pc(t,e){if(e!==null){let n=e.type;if(n&3)return St(e,t);if(n&4)return vh(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return pc(t,r);{let i=t[e.index];return bn(i)?vh(-1,i):Zt(i)}}else{if(n&32)return If(e,t)()||Zt(t[e.index]);{let r=_w(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=$s(t[Jt]);return pc(i,r)}else return pc(t,e.next)}}}return null}function _w(t,e){if(e!==null){let r=t[Jt][Lt],i=e.projection;return r.projection[i]}return null}function vh(t,e){let n=ft+t+1;if(n<e.length){let r=e[n],i=r[U].firstChild;if(i!==null)return pc(r,i)}return e[_r]}function ZR(t,e,n){let r=wf(t,e);r&&WR(t,r,e,n)}function Df(t,e,n,r,i,s,o){for(;n!=null;){let a=r[n.index],c=n.type;if(o&&e===0&&(a&&Dr(Zt(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)Df(t,e,n.child,r,i,s,!1),Di(e,t,i,a,s);else if(c&32){let u=If(n,r),l;for(;l=u();)Di(e,t,i,l,s);Di(e,t,i,a,s)}else c&16?XR(t,e,r,n,i,s):Di(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Hc(t,e,n,r,i,s){Df(n,r,t.firstChild,e,i,s,!1)}function XR(t,e,n,r,i,s){let o=n[Jt],c=o[Lt].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let l=c[u];Di(e,t,i,l,s)}else{let u=c,l=o[$e];sw(r)&&(u.flags|=128),Df(t,e,u,l,i,s,!0)}}function eM(t,e,n,r,i){let s=n[_r],o=Zt(n);s!==o&&Di(e,t,r,s,i);for(let a=ft;a<n.length;a++){let c=n[a];Hc(c[U],c,t,e,r,s)}}function tM(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:En.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=En.Important),t.setStyle(n,r,i,s))}}function nM(t,e,n){t.setAttribute(e,"style",n)}function Iw(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function ww(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&nh(t,e,r),i!==null&&Iw(t,e,i),s!==null&&nM(t,e,s)}var Mr={};function ge(t=1){Ew(pt(),fe(),Vi()+t,!1)}function Ew(t,e,n,r){if(!r)if((e[x]&3)===3){let s=t.preOrderCheckHooks;s!==null&&dc(e,s,n)}else{let s=t.preOrderHooks;s!==null&&hc(e,s,0,n)}Ir(n)}function ee(t,e=B.Default){let n=fe();if(n===null)return A(t,e);let r=At();return ew(r,n,et(t),e)}function Dw(){let t="invalid";throw new Error(t)}function Cw(t,e,n,r,i,s){let o=te(null);try{let a=null;i&at.SignalBased&&(a=e[r][jv]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&at.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):AI(e,a,r,s)}finally{te(o)}}function rM(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Ir(~i);else{let s=i,o=n[++r],a=n[++r];eR(o,s);let c=e[s];a(2,c)}}}finally{Ir(-1)}}function qc(t,e,n,r,i,s,o,a,c,u,l){let d=e.blueprint.slice();return d[Tn]=i,d[x]=r|4|128|8|64,(u!==null||t&&t[x]&2048)&&(d[x]|=2048),OI(d),d[$e]=d[Fi]=t,d[Vt]=n,d[Yt]=o||t&&t[Yt],d[He]=a||t&&t[He],d[xi]=c||t&&t[xi]||null,d[Lt]=s,d[jc]=TR(),d[Ic]=l,d[TI]=u,d[Jt]=e.type==2?t[Jt]:d,d}function zc(t,e,n,r,i){let s=t.data[e];if(s===null)s=iM(t,e,n,r,i),XA()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=WA();s.injectorIndex=o===null?-1:o.injectorIndex}return Qs(s,!0),s}function iM(t,e,n,r,i){let s=VI(),o=LI(),a=o?s:s&&s.parent,c=t.data[e]=lM(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function Tw(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function bw(t,e,n,r,i){let s=Vi(),o=r&2;try{Ir(-1),o&&e.length>wn&&Ew(t,e,wn,!1),Wt(o?2:0,i),n(r,i)}finally{Ir(s),Wt(o?3:1,i)}}function Sw(t,e,n){if(SI(e)){let r=te(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let c=n[o];a.contentQueries(1,c,o)}}}finally{te(r)}}}function Aw(t,e,n){FI()&&(yM(t,e,n,St(n,e)),(n.flags&64)===64&&Pw(t,e,n))}function Rw(t,e,n=St){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function Mw(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Cf(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Cf(t,e,n,r,i,s,o,a,c,u,l){let d=wn+r,h=d+i,f=sM(d,h),g=typeof u=="function"?u():u;return f[U]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:g,incompleteFirstPass:!1,ssrId:l}}function sM(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Mr);return n}function oM(t,e,n,r){let s=r.get(PR,dw)||n===Qt.ShadowDom,o=t.selectRootElement(e,s);return aM(o),o}function aM(t){cM(t)}var cM=()=>null;function uM(t,e,n,r){let i=Fw(e);i.push(n),t.firstCreatePass&&Vw(t).push(r,i.length-1)}function lM(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return qA()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function F_(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=at.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let u=s;if(i!==null){if(!i.hasOwnProperty(s))continue;u=i[s]}t===0?V_(r,n,u,a,c):V_(r,n,u,a)}return r}function V_(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function dM(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],c=null,u=null;for(let l=r;l<i;l++){let d=s[l],h=n?n.get(d):null,f=h?h.inputs:null,g=h?h.outputs:null;c=F_(0,d.inputs,l,c,f),u=F_(1,d.outputs,l,u,g);let v=c!==null&&o!==null&&!Xh(e)?AM(c,l,o):null;a.push(v)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}function hM(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function fM(t,e,n,r,i,s,o,a){let c=St(e,n),u=e.inputs,l;!a&&u!=null&&(l=u[r])?(Tf(t,n,l,r,i),Bc(e)&&pM(n,e.index)):e.type&3?(r=hM(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function pM(t,e){let n=Kn(e,t);n[x]&16||(n[x]|=64)}function xw(t,e,n,r){if(FI()){let i=r===null?null:{"":-1},s=_M(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&Nw(t,e,n,o,i,a),i&&IM(n,r,i)}n.mergedAttrs=Vs(n.mergedAttrs,n.attrs)}function Nw(t,e,n,r,i,s){for(let u=0;u<r.length;u++)lh(Tc(n,e),t,r[u].type);EM(n,t.data.length,r.length);for(let u=0;u<r.length;u++){let l=r[u];l.providersResolver&&l.providersResolver(l)}let o=!1,a=!1,c=Tw(t,e,r.length,null);for(let u=0;u<r.length;u++){let l=r[u];n.mergedAttrs=Vs(n.mergedAttrs,l.hostAttrs),DM(t,n,e,c,l),wM(c,l,i),l.contentQueries!==null&&(n.flags|=4),(l.hostBindings!==null||l.hostAttrs!==null||l.hostVars!==0)&&(n.flags|=64);let d=l.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}dM(t,n,s)}function gM(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;mM(o)!=a&&o.push(a),o.push(n,r,s)}}function mM(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function yM(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;Bc(n)&&CM(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Tc(n,e),Dr(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let c=t.data[a],u=Er(e,t,a,n);if(Dr(u,e),o!==null&&SM(e,a-i,u,c,n,o),Gn(c)){let l=Kn(n.index,e);l[Vt]=Er(e,t,a,n)}}}function Pw(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=tR();try{Ir(s);for(let a=r;a<i;a++){let c=t.data[a],u=e[a];ch(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&vM(c,u)}}finally{Ir(-1),ch(o)}}function vM(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function _M(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(iA(e,o.selectors,!1))if(r||(r=[]),Gn(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;_h(t,e,c)}else r.unshift(o),_h(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function _h(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function IM(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new T(-301,!1);r.push(e[i],s)}}}function wM(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Gn(e)&&(n[""]=t)}}function EM(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function DM(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=Si(i.type,!0)),o=new wr(s,Gn(i),ee);t.blueprint[r]=o,n[r]=o,gM(t,e,r,Tw(t,n,i.hostVars,Mr),i)}function CM(t,e,n){let r=St(e,t),i=Mw(n),s=t[Yt].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=Gc(t,qc(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function TM(t,e,n,r,i,s){let o=St(t,e);bM(e[He],o,s,t.value,n,r,i)}function bM(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let a=o==null?Qh(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}function SM(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],u=o[a++],l=o[a++],d=o[a++];Cw(r,n,c,u,l,d)}}function AM(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function Ow(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function kw(t,e){let n=t.contentQueries;if(n!==null){let r=te(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];cf(s),a.contentQueries(2,e[o],o)}}}finally{te(r)}}}function Gc(t,e){return t[js]?t[b_][Ft]=e:t[js]=e,t[b_]=e,e}function Ih(t,e,n){cf(0);let r=te(null);try{e(t,n)}finally{te(r)}}function Fw(t){return t[Us]||(t[Us]=[])}function Vw(t){return t.cleanup||(t.cleanup=[])}function Lw(t,e){let n=t[xi],r=n?n.get(Xt,null):null;r&&r.handleError(e)}function Tf(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],c=n[s++],u=e[o],l=t.data[o];Cw(l,u,r,a,c,i)}}function RM(t,e,n){let r=NI(e,t);VR(t[He],r,n)}function MM(t,e){let n=Kn(e,t),r=n[U];xM(r,n);let i=n[Tn];i!==null&&n[Ic]===null&&(n[Ic]=vf(i,n[xi])),bf(r,n,n[Vt])}function xM(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function bf(t,e,n){uf(e);try{let r=t.viewQuery;r!==null&&Ih(1,r,n);let i=t.template;i!==null&&bw(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[In]?.finishViewCreation(t),t.staticContentQueries&&kw(t,e),t.staticViewQueries&&Ih(2,t.viewQuery,n);let s=t.components;s!==null&&NM(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[x]&=-5,lf()}}function NM(t,e){for(let n=0;n<e.length;n++)MM(t,e[n])}function PM(t,e,n,r){let i=te(null);try{let s=e.tView,a=t[x]&4096?4096:16,c=qc(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=t[e.index];c[Ks]=u;let l=t[In];return l!==null&&(c[In]=l.createEmbeddedView(s)),bf(s,c,n),c}finally{te(i)}}function L_(t,e){return!e||e.firstChild===null||sw(t)}function OM(t,e,n,r=!0){let i=e[U];if(BR(i,e,t,n),r){let o=vh(n,t),a=e[He],c=wf(a,t[_r]);c!==null&&UR(i,t[Lt],a,e,c,o)}let s=e[Ic];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function Sc(t,e,n,r,i=!1){for(;n!==null;){let s=e[n.index];s!==null&&r.push(Zt(s)),bn(s)&&kM(s,r);let o=n.type;if(o&8)Sc(t,e,n.child,r);else if(o&32){let a=If(n,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=_w(e,n);if(Array.isArray(a))r.push(...a);else{let c=$s(e[Jt]);Sc(c[U],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function kM(t,e){for(let n=ft;n<t.length;n++){let r=t[n],i=r[U].firstChild;i!==null&&Sc(r[U],r,i,e)}t[_r]!==t[Tn]&&e.push(t[_r])}var Uw=[];function FM(t){return t[vr]??VM(t)}function VM(t){let e=Uw.pop()??Object.create(UM);return e.lView=t,e}function LM(t){t.lView[vr]!==t&&(t.lView=null,Uw.push(t))}var UM=ce(E({},Bv),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Bs(t.lView)},consumerOnSignalRead(){this.lView[vr]=this}}),jw=100;function Bw(t,e=!0,n=0){let r=t[Yt],i=r.rendererFactory,s=!1;s||i.begin?.();try{jM(t,n)}catch(o){throw e&&Lw(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function jM(t,e){wh(t,e);let n=0;for(;of(t);){if(n===jw)throw new T(103,!1);n++,wh(t,1)}}function BM(t,e,n,r){let i=e[x];if((i&256)===256)return;let s=!1;!s&&e[Yt].inlineEffectRunner?.flush(),uf(e);let o=null,a=null;!s&&$M(t)&&(a=FM(e),o=$v(a));try{OI(e),JA(t.bindingStartIndex),n!==null&&bw(t,e,n,2,r);let c=(i&3)===3;if(!s)if(c){let d=t.preOrderCheckHooks;d!==null&&dc(e,d,null)}else{let d=t.preOrderHooks;d!==null&&hc(e,d,0,null),$d(e,0)}if(HM(e),$w(e,0),t.contentQueries!==null&&kw(t,e),!s)if(c){let d=t.contentCheckHooks;d!==null&&dc(e,d)}else{let d=t.contentHooks;d!==null&&hc(e,d,1),$d(e,1)}rM(t,e);let u=t.components;u!==null&&qw(e,u,0);let l=t.viewQuery;if(l!==null&&Ih(2,l,r),!s)if(c){let d=t.viewCheckHooks;d!==null&&dc(e,d)}else{let d=t.viewHooks;d!==null&&hc(e,d,2),$d(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Bd]){for(let d of e[Bd])d();e[Bd]=null}s||(e[x]&=-73)}catch(c){throw Bs(e),c}finally{a!==null&&(Hv(a,o),LM(a)),lf()}}function $M(t){return t.type!==2}function $w(t,e){for(let n=aw(t);n!==null;n=cw(n))for(let r=ft;r<n.length;r++){let i=n[r];Hw(i,e)}}function HM(t){for(let e=aw(t);e!==null;e=cw(e)){if(!(e[x]&nf.HasTransplantedViews))continue;let n=e[Ni];for(let r=0;r<n.length;r++){let i=n[r],s=i[$e];LA(i)}}}function qM(t,e,n){let r=Kn(e,t);Hw(r,n)}function Hw(t,e){sf(t)&&wh(t,e)}function wh(t,e){let r=t[U],i=t[x],s=t[vr],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&md(s)),s&&(s.dirty=!1),t[x]&=-9217,o)BM(r,t,r.template,t[Vt]);else if(i&8192){$w(t,1);let a=r.components;a!==null&&qw(t,a,1)}}function qw(t,e,n){for(let r=0;r<e.length;r++)qM(t,e[r],n)}function Sf(t){for(t[Yt].changeDetectionScheduler?.notify();t;){t[x]|=64;let e=$s(t);if(SA(t)&&!e)return t;t=e}return null}var Cr=class{get rootNodes(){let e=this._lView,n=e[U];return Sc(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Vt]}set context(e){this._lView[Vt]=e}get destroyed(){return(this._lView[x]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[$e];if(bn(e)){let n=e[wc],r=n?n.indexOf(this):-1;r>-1&&(yh(e,r),vc(n,r))}this._attachedToViewContainer=!1}yw(this._lView[U],this._lView)}onDestroy(e){kI(this._lView,e)}markForCheck(){Sf(this._cdRefInjectingView||this._lView)}detach(){this._lView[x]&=-129}reattach(){ah(this._lView),this._lView[x]|=128}detectChanges(){this._lView[x]|=1024,Bw(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new T(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,gw(this._lView[U],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new T(902,!1);this._appRef=e,ah(this._lView)}},Tr=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=WM;let t=e;return t})(),zM=Tr,GM=class extends zM{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=PM(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new Cr(i)}};function WM(){return Af(At(),fe())}function Af(t,e){return t.type&4?new GM(e,t,Ui(t,e)):null}var qz=new RegExp(`^(\\d+)*(${xR}|${MR})*(.*)`);var KM=()=>null;function U_(t,e){return KM(t,e)}var Ac=class{},Eh=class{},Rc=class{};function QM(t){let e=Error(`No component factory found for ${tt(t)}.`);return e[YM]=t,e}var YM="ngComponent";var Dh=class{resolveComponentFactory(e){throw QM(e)}},Wc=(()=>{let e=class e{};e.NULL=new Dh;let t=e;return t})(),Hs=class{},xr=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>JM();let t=e;return t})();function JM(){let t=fe(),e=At(),n=Kn(e.index,t);return(mr(n)?n:t)[He]}var ZM=(()=>{let e=class e{};e.\u0275prov=S({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),Wd={};var j_=new Set;function Rf(t){j_.has(t)||(j_.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var Ci=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Ci||{}),XM={destroy(){}};function Kc(t,e){!e&&CA(Kc);let n=e?.injector??w(nt);if(!OR(n))return XM;Rf("NgAfterNextRender");let r=n.get(Mf),i=r.handler??=new Th,s=e?.phase??Ci.MixedReadWrite,o=()=>{i.unregister(c),a()},a=n.get(gf).onDestroy(o),c=Cn(n,()=>new Ch(s,()=>{o(),t()}));return i.register(c),{destroy:o}}var Ch=class{constructor(e,n){this.phase=e,this.callbackFn=n,this.errorHandler=w(Xt,{optional:!0}),w(Ac,{optional:!0})?.notify(1)}invoke(){try{this.callbackFn()}catch(e){this.errorHandler?.handleError(e)}}},Th=class{constructor(){this.executingCallbacks=!1,this.buckets={[Ci.EarlyRead]:new Set,[Ci.Write]:new Set,[Ci.MixedReadWrite]:new Set,[Ci.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},Mf=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=S({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function bh(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=m_(i,a);else if(s==2){let c=a,u=e[++o];r=m_(r,c+": "+u+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Mc=class extends Wc{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=zn(e);return new Pi(n,this.ngModule)}};function B_(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function ex(t){let e=t.toLowerCase();return e==="svg"?xA:e==="math"?NA:null}var Sh=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Lc(r);let i=this.injector.get(e,Wd,r);return i!==Wd||n===Wd?i:this.parentInjector.get(e,n,r)}},Pi=class extends Rc{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=B_(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return B_(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=cA(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=te(null);try{i=i||this.ngModule;let o=i instanceof ct?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new Sh(e,o):e,c=a.get(Hs,null);if(c===null)throw new T(407,!1);let u=a.get(ZM,null),l=a.get(Mf,null),d=a.get(Ac,null),h={rendererFactory:c,sanitizer:u,inlineEffectRunner:null,afterRenderEventManager:l,changeDetectionScheduler:d},f=c.createRenderer(null,this.componentDef),g=this.componentDef.selectors[0][0]||"div",v=r?oM(f,r,this.componentDef.encapsulation,a):pw(f,g,ex(g)),_=512;this.componentDef.signals?_|=4096:this.componentDef.onPush||(_|=16);let C=null;v!==null&&(C=vf(v,a,!0));let Y=Cf(0,null,null,1,0,null,null,null,null,null,null),$=qc(null,Y,null,_,null,null,h,f,a,null,C);uf($);let he,je;try{let se=this.componentDef,Ke,zt=null;se.findHostDirectiveDefs?(Ke=[],zt=new Map,se.findHostDirectiveDefs(se,Ke,zt),Ke.push(se)):Ke=[se];let lr=tx($,v),oi=nx(lr,v,se,Ke,$,h,f);je=PI(Y,wn),v&&sx(f,se,v,r),n!==void 0&&ox(je,this.ngContentSelectors,n),he=ix(oi,se,Ke,zt,$,[ax]),bf(Y,$,null)}finally{lf()}return new Ah(this.componentType,he,Ui(je,$),$,je)}finally{te(s)}}},Ah=class extends Eh{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new Cr(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;Tf(s[U],s,i,e,n),this.previousInputValues.set(e,n);let o=Kn(this._tNode.index,s);Sf(o)}}get injector(){return new yr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function tx(t,e){let n=t[U],r=wn;return t[r]=e,zc(n,r,2,"#host",null)}function nx(t,e,n,r,i,s,o){let a=i[U];rx(r,t,e,o);let c=null;e!==null&&(c=vf(e,i[xi]));let u=s.rendererFactory.createRenderer(e,n),l=16;n.signals?l=4096:n.onPush&&(l=64);let d=qc(i,Mw(n),null,l,i[t.index],t,s,u,null,null,c);return a.firstCreatePass&&_h(a,t,r.length-1),Gc(i,d),i[t.index]=d}function rx(t,e,n,r){for(let i of t)e.mergedAttrs=Vs(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(bh(e,e.mergedAttrs,!0),n!==null&&ww(r,n,e))}function ix(t,e,n,r,i,s){let o=At(),a=i[U],c=St(o,i);Nw(a,i,o,n,null,r);for(let l=0;l<n.length;l++){let d=o.directiveStart+l,h=Er(i,a,d,o);Dr(h,i)}Pw(a,i,o),c&&Dr(c,i);let u=Er(i,a,o.directiveStart+o.componentOffset,o);if(t[Vt]=i[Vt]=u,s!==null)for(let l of s)l(u,e);return Sw(a,o,i),u}function sx(t,e,n,r){if(r)nh(t,n,["ng-version","17.3.7"]);else{let{attrs:i,classes:s}=uA(e.selectors[0]);i&&nh(t,n,i),s&&s.length>0&&Iw(t,n,s.join(" "))}}function ox(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function ax(){let t=At();ff(fe()[U],t)}var Qn=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=cx;let t=e;return t})();function cx(){let t=At();return Gw(t,fe())}var ux=Qn,zw=class extends ux{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Ui(this._hostTNode,this._hostLView)}get injector(){return new yr(this._hostTNode,this._hostLView)}get parentInjector(){let e=pf(this._hostTNode,this._hostLView);if(KI(e)){let n=Cc(e,this._hostLView),r=Dc(e),i=n[U].data[r+8];return new yr(i,n)}else return new yr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=$_(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-ft}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=U_(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,L_(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!bA(e),a;if(o)a=n;else{let g=n||{};a=g.index,r=g.injector,i=g.projectableNodes,s=g.environmentInjector||g.ngModuleRef}let c=o?e:new Pi(zn(e)),u=r||this.parentInjector;if(!s&&c.ngModule==null){let v=(o?u:this.parentInjector).get(ct,null);v&&(s=v)}let l=zn(c.componentType??{}),d=U_(this._lContainer,l?.id??null),h=d?.firstChild??null,f=c.create(u,i,h,s);return this.insertImpl(f.hostView,a,L_(this._hostTNode,d)),f}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(VA(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[$e],u=new zw(c,c[Lt],c[$e]);u.detach(u.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return OM(o,i,s,r),e.attachToViewContainerRef(),uI(Kd(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=$_(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=yh(this._lContainer,n);r&&(vc(Kd(this._lContainer),n),yw(r[U],r))}detach(e){let n=this._adjustIndex(e,-1),r=yh(this._lContainer,n);return r&&vc(Kd(this._lContainer),n)!=null?new Cr(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function $_(t){return t[wc]}function Kd(t){return t[wc]||(t[wc]=[])}function Gw(t,e){let n,r=e[t.index];return bn(r)?n=r:(n=Ow(r,e,null,t),e[t.index]=n,Gc(e,n)),dx(n,e,t,r),new zw(n,t,e)}function lx(t,e){let n=t[He],r=n.createComment(""),i=St(e,t),s=wf(n,i);return bc(n,s,r,KR(n,i),!1),r}var dx=px,hx=()=>!1;function fx(t,e,n){return hx(t,e,n)}function px(t,e,n,r){if(t[_r])return;let i;n.type&8?i=Zt(r):i=lx(e,n),t[_r]=i}var Rh=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},Mh=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let r=e.contentQueries!==null?e.contentQueries[0]:n.length,i=[];for(let s=0;s<r;s++){let o=n.getByIndex(s),a=this.queries[o.indexInDeclarationView];i.push(a.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)xf(e,n).matches!==null&&this.queries[n].setDirty()}},xh=class{constructor(e,n,r=null){this.flags=n,this.read=r,typeof e=="string"?this.predicate=Ex(e):this.predicate=e}},Nh=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){let i=n!==null?n.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,n!==null?n.push(s):n=[s])}return n!==null?new t(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Ph=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==n;)r=r.parent;return n===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let s=r[i];this.matchTNodeWithReadOption(e,n,gx(n,s)),this.matchTNodeWithReadOption(e,n,fc(n,e,s,!1,!1))}else r===Tr?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,fc(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===Ut||i===Qn||i===Tr&&n.type&4)this.addMatch(n.index,-2);else{let s=fc(n,e,i,!1,!1);s!==null&&this.addMatch(n.index,s)}else this.addMatch(n.index,r)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function gx(t,e){let n=t.localNames;if(n!==null){for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1]}return null}function mx(t,e){return t.type&11?Ui(t,e):t.type&4?Af(t,e):null}function yx(t,e,n,r){return n===-1?mx(e,t):n===-2?vx(t,e,r):Er(t,t[U],n,e)}function vx(t,e,n){if(n===Ut)return Ui(e,t);if(n===Tr)return Af(e,t);if(n===Qn)return Gw(e,t)}function Ww(t,e,n,r){let i=e[In].queries[r];if(i.matches===null){let s=t.data,o=n.matches,a=[];for(let c=0;o!==null&&c<o.length;c+=2){let u=o[c];if(u<0)a.push(null);else{let l=s[u];a.push(yx(e,l,o[c+1],n.metadata.read))}}i.matches=a}return i.matches}function Oh(t,e,n,r){let i=t.queries.getByIndex(n),s=i.matches;if(s!==null){let o=Ww(t,e,i,n);for(let a=0;a<s.length;a+=2){let c=s[a];if(c>0)r.push(o[a/2]);else{let u=s[a+1],l=e[-c];for(let d=ft;d<l.length;d++){let h=l[d];h[Ks]===h[$e]&&Oh(h[U],h,u,r)}if(l[Ni]!==null){let d=l[Ni];for(let h=0;h<d.length;h++){let f=d[h];Oh(f[U],f,u,r)}}}}}return r}function _x(t,e){return t[In].queries[e].queryList}function Ix(t,e,n){let r=new ph((n&4)===4);return uM(t,e,r,r.destroy),(e[In]??=new Mh).queries.push(new Rh(r))-1}function wx(t,e,n){let r=pt();return r.firstCreatePass&&(Dx(r,new xh(t,e,n),-1),(e&2)===2&&(r.staticViewQueries=!0)),Ix(r,fe(),e)}function Ex(t){return t.split(",").map(e=>e.trim())}function Dx(t,e,n){t.queries===null&&(t.queries=new Nh),t.queries.track(new Ph(e,n))}function xf(t,e){return t.queries.getByIndex(e)}function Cx(t,e){let n=t[U],r=xf(n,e);return r.crossesNgTemplate?Oh(n,t,e,[]):Ww(n,t,r,e)}function Tx(t){let e=[],n=new Map;function r(i){let s=n.get(i);if(!s){let o=t(i);n.set(i,s=o.then(Rx))}return s}return xc.forEach((i,s)=>{let o=[];i.templateUrl&&o.push(r(i.templateUrl).then(u=>{i.template=u}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let u=i.styles.length,l=i.styleUrls;i.styleUrls.forEach((d,h)=>{a.push(""),o.push(r(d).then(f=>{a[u+h]=f,l.splice(l.indexOf(d),1),l.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&o.push(r(i.styleUrl).then(u=>{a.push(u),i.styleUrl=void 0}));let c=Promise.all(o).then(()=>Mx(s));e.push(c)}),Sx(),Promise.all(e).then(()=>{})}var xc=new Map,bx=new Set;function Sx(){let t=xc;return xc=new Map,t}function Ax(){return xc.size===0}function Rx(t){return typeof t=="string"?t:t.text()}function Mx(t){bx.delete(t)}function xx(t){return Object.getPrototypeOf(t.prototype).constructor}function Sn(t){let e=xx(t.type),n=!0,r=[t];for(;e;){let i;if(Gn(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new T(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=ac(t.inputs),o.inputTransforms=ac(t.inputTransforms),o.declaredInputs=ac(t.declaredInputs),o.outputs=ac(t.outputs);let a=i.hostBindings;a&&Fx(t,a);let c=i.viewQuery,u=i.contentQueries;if(c&&Ox(t,c),u&&kx(t,u),Nx(t,i),SS(t.outputs,i.outputs),Gn(i)&&i.data.animation){let l=t.data;l.animation=(l.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===Sn&&(n=!1)}}e=Object.getPrototypeOf(e)}Px(r)}function Nx(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function Px(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Vs(i.hostAttrs,n=Vs(n,i.hostAttrs))}}function ac(t){return t===Ai?{}:t===Tt?[]:t}function Ox(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function kx(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function Fx(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}var Wn=class{},qs=class{};var Nc=class extends Wn{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Mc(this);let i=yI(e);this._bootstrapComponents=fw(i.bootstrap),this._r3Injector=rw(e,n,[{provide:Wn,useValue:this},{provide:Wc,useValue:this.componentFactoryResolver},...r],tt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Pc=class extends qs{constructor(e){super(),this.moduleType=e}create(e){return new Nc(this.moduleType,e,[])}};function Vx(t,e,n){return new Nc(t,e,n)}var kh=class extends Wn{constructor(e){super(),this.componentFactoryResolver=new Mc(this),this.instance=null;let n=new Ls([...e.providers,{provide:Wn,useValue:this},{provide:Wc,useValue:this.componentFactoryResolver}],e.parent||tf(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Qc(t,e,n=null){return new kh({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var Yc=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Be(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Kw(t){return Ux(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function Lx(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function Ux(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function jx(t,e,n){return t[e]=n}function br(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function Bx(t,e,n,r){let i=br(t,e,n);return br(t,e+1,r)||i}function $x(t,e,n,r,i){let s=Bx(t,e,n,r);return br(t,e+2,i)||s}function Hx(t){return(t.flags&32)===32}function qx(t,e,n,r,i,s,o,a,c){let u=e.consts,l=zc(e,t,4,o||null,Ec(u,a));xw(e,n,l,Ec(u,c)),ff(e,l);let d=l.tView=Cf(2,l,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,l),d.queries=e.queries.embeddedTView(l)),l}function gt(t,e,n,r,i,s,o,a){let c=fe(),u=pt(),l=t+wn,d=u.firstCreatePass?qx(l,u,c,e,n,r,i,s,o):u.data[l];Qs(d,!1);let h=zx(u,c,d,t);df()&&Ef(u,c,h,d),Dr(h,c);let f=Ow(h,c,h,d);return c[l]=f,Gc(c,f),fx(f,d,c),rf(d)&&Aw(u,c,d),o!=null&&Rw(c,d,a),gt}var zx=Gx;function Gx(t,e,n,r){return hf(!0),e[He].createComment("")}function H_(...t){}function Wx(){let t=typeof ht.requestAnimationFrame=="function",e=ht[t?"requestAnimationFrame":"setTimeout"],n=ht[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var ne=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Te(!1),this.onMicrotaskEmpty=new Te(!1),this.onStable=new Te(!1),this.onError=new Te(!1),typeof Zone>"u")throw new T(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=Wx().nativeRequestAnimationFrame,Yx(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new T(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new T(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,Kx,H_,H_);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},Kx={};function Nf(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Qx(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(ht,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Fh(t),t.isCheckStableRunning=!0,Nf(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Fh(t))}function Yx(t){let e=()=>{Qx(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(Jx(a))return n.invokeTask(i,s,o,a);try{return q_(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),z_(t)}},onInvoke:(n,r,i,s,o,a,c)=>{try{return q_(t),n.invoke(i,s,o,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),z_(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Fh(t),Nf(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Fh(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function q_(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function z_(t){t._nesting--,Nf(t)}var Vh=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Te,this.onMicrotaskEmpty=new Te,this.onStable=new Te,this.onError=new Te}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function Jx(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}function Zx(t="zone.js",e){return t==="noop"?new Vh:t==="zone.js"?new ne(e):t}function Jc(t,e,n,r){let i=fe(),s=af();if(br(i,s,e)){let o=pt(),a=zI();TM(a,i,t,e,n,r)}return Jc}function Xx(t,e,n,r){return br(t,af(),n)?e+Qh(n)+r:Mr}function cc(t,e){return t<<17|e<<2}function Sr(t){return t>>17&32767}function eN(t){return(t&2)==2}function tN(t,e){return t&131071|e<<17}function Lh(t){return t|2}function Oi(t){return(t&131068)>>2}function Qd(t,e){return t&-131069|e<<2}function nN(t){return(t&1)===1}function Uh(t){return t|1}function rN(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Sr(o),c=Oi(o);t[r]=n;let u=!1,l;if(Array.isArray(n)){let d=n;l=d[1],(l===null||Ws(d,l)>0)&&(u=!0)}else l=n;if(i)if(c!==0){let h=Sr(t[a+1]);t[r+1]=cc(h,a),h!==0&&(t[h+1]=Qd(t[h+1],r)),t[a+1]=tN(t[a+1],r)}else t[r+1]=cc(a,0),a!==0&&(t[a+1]=Qd(t[a+1],r)),a=r;else t[r+1]=cc(c,0),a===0?a=r:t[c+1]=Qd(t[c+1],r),c=r;u&&(t[r+1]=Lh(t[r+1])),G_(t,l,r,!0),G_(t,l,r,!1),iN(e,l,t,r,s),o=cc(a,c),s?e.classBindings=o:e.styleBindings=o}function iN(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&Ws(s,e)>=0&&(n[r+1]=Uh(n[r+1]))}function G_(t,e,n,r){let i=t[n+1],s=e===null,o=r?Sr(i):Oi(i),a=!1;for(;o!==0&&(a===!1||s);){let c=t[o],u=t[o+1];sN(c,e)&&(a=!0,t[o+1]=r?Uh(u):Lh(u)),o=r?Sr(u):Oi(u)}a&&(t[n+1]=r?Lh(i):Uh(i))}function sN(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Ws(t,e)>=0:!1}function ye(t,e,n){let r=fe(),i=af();if(br(r,i,e)){let s=pt(),o=zI();fM(s,o,r,t,e,r[He],n,!1)}return ye}function W_(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";Tf(t,n,s[o],o,r)}function Zc(t,e){return oN(t,e,null,!0),Zc}function oN(t,e,n,r){let i=fe(),s=pt(),o=ZA(2);if(s.firstUpdatePass&&cN(s,t,o,r),e!==Mr&&br(i,o,e)){let a=s.data[Vi()];fN(s,a,i,i[He],t,i[o+1]=pN(e,n),r,o)}}function aN(t,e){return e>=t.expandoStartIndex}function cN(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[Vi()],o=aN(t,n);gN(s,r)&&e===null&&!o&&(e=!1),e=uN(i,s,e,r),rN(i,s,e,n,o,r)}}function uN(t,e,n,r){let i=nR(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Yd(null,t,e,n,r),n=zs(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=Yd(i,t,e,n,r),s===null){let c=lN(t,e,r);c!==void 0&&Array.isArray(c)&&(c=Yd(null,t,e,c[1],r),c=zs(c,e.attrs,r),dN(t,e,r,c))}else s=hN(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function lN(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Oi(r)!==0)return t[Sr(r)]}function dN(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Sr(i)]=r}function hN(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=zs(r,o,n)}return zs(r,e.attrs,n)}function Yd(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=zs(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function zs(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),QS(t,o,n?!0:e[++s]))}return t===void 0?null:t}function fN(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let c=t.data,u=c[a+1],l=nN(u)?K_(c,e,n,i,Oi(u),o):void 0;if(!Oc(l)){Oc(s)||eN(u)&&(s=K_(c,null,n,i,a,o));let d=NI(Vi(),n);tM(r,o,d,i,s)}}function K_(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let c=t[i],u=Array.isArray(c),l=u?c[1]:c,d=l===null,h=n[i+1];h===Mr&&(h=d?Tt:void 0);let f=d?Ud(h,r):l===r?h:void 0;if(u&&!Oc(f)&&(f=Ud(c,r)),Oc(f)&&(a=f,o))return a;let g=t[i+1];i=o?Sr(g):Oi(g)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=Ud(c,r))}return a}function Oc(t){return t!==void 0}function pN(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=tt(_f(t)))),t}function gN(t,e){return(t.flags&(e?8:16))!==0}function mN(t,e,n,r,i,s){let o=e.consts,a=Ec(o,i),c=zc(e,t,2,r,a);return xw(e,n,c,Ec(o,s)),c.attrs!==null&&bh(c,c.attrs,!1),c.mergedAttrs!==null&&bh(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function W(t,e,n,r){let i=fe(),s=pt(),o=wn+t,a=i[He],c=s.firstCreatePass?mN(o,s,i,e,n,r):s.data[o],u=yN(s,i,c,a,e,t);i[o]=u;let l=rf(c);return Qs(c,!0),ww(a,u,c),!Hx(c)&&df()&&Ef(s,i,u,c),BA()===0&&Dr(u,i),$A(),l&&(Aw(s,i,c),Sw(s,c,i)),r!==null&&Rw(i,c),W}function K(){let t=At();LI()?KA():(t=t.parent,Qs(t,!1));let e=t;zA(e)&&GA(),HA();let n=pt();return n.firstCreatePass&&(ff(n,t),SI(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&uR(e)&&W_(n,e,fe(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&lR(e)&&W_(n,e,fe(),e.stylesWithoutHost,!1),K}function de(t,e,n,r){return W(t,e,n,r),K(),de}var yN=(t,e,n,r,i,s)=>(hf(!0),pw(r,i,sR()));function mt(){return fe()}var kc="en-US";var vN=kc;function _N(t){typeof t=="string"&&(vN=t.toLowerCase().replace(/_/g,"-"))}function ue(t,e,n,r){let i=fe(),s=pt(),o=At();return wN(s,i,i[He],o,t,e,r),ue}function IN(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[Us],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function wN(t,e,n,r,i,s,o){let a=rf(r),u=t.firstCreatePass&&Vw(t),l=e[Vt],d=Fw(e),h=!0;if(r.type&3||o){let v=St(r,e),_=o?o(v):v,C=d.length,Y=o?he=>o(Zt(he[r.index])):r.index,$=null;if(!o&&a&&($=IN(t,e,i,r.index)),$!==null){let he=$.__ngLastListenerFn__||$;he.__ngNextListenerFn__=s,$.__ngLastListenerFn__=s,h=!1}else{s=Y_(r,e,l,s,!1);let he=n.listen(_,i,s);d.push(s,he),u&&u.push(i,Y,C,C+1)}}else s=Y_(r,e,l,s,!1);let f=r.outputs,g;if(h&&f!==null&&(g=f[i])){let v=g.length;if(v)for(let _=0;_<v;_+=2){let C=g[_],Y=g[_+1],je=e[C][Y].subscribe(s),se=d.length;d.push(s,je),u&&u.push(i,r.index,se,-(se+1))}}}function Q_(t,e,n,r){let i=te(null);try{return Wt(6,e,n),n(r)!==!1}catch(s){return Lw(t,s),!1}finally{Wt(7,e,n),te(i)}}function Y_(t,e,n,r,i){return function s(o){if(o===Function)return r;let a=t.componentOffset>-1?Kn(t.index,e):e;Sf(a);let c=Q_(e,n,r,o),u=s.__ngNextListenerFn__;for(;u;)c=Q_(e,n,u,o)&&c,u=u.__ngNextListenerFn__;return i&&c===!1&&o.preventDefault(),c}}function Q(t=1){return iR(t)}function Qw(t,e,n){wx(t,e,n)}function Pf(t){let e=fe(),n=pt(),r=UI();cf(r+1);let i=xf(n,r);if(t.dirty&&FA(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let s=Cx(e,r);t.reset(s,ER),t.notifyOnChanges()}return!0}return!1}function Of(){return _x(fe(),UI())}function Nr(t){let e=QA();return kA(e,wn+t)}function rt(t,e=""){let n=fe(),r=pt(),i=t+wn,s=r.firstCreatePass?zc(r,i,1,e,null):r.data[i],o=EN(r,n,s,e,t);n[i]=o,df()&&Ef(r,n,o,s),Qs(s,!1)}var EN=(t,e,n,r,i)=>(hf(!0),FR(e[He],r));function kf(t){return Xc("",t,""),kf}function Xc(t,e,n){let r=fe(),i=Xx(r,t,e,n);return i!==Mr&&RM(r,Vi(),i),Xc}function DN(t,e,n){let r=pt();if(r.firstCreatePass){let i=Gn(t);jh(n,r.data,r.blueprint,i,!0),jh(e,r.data,r.blueprint,i,!1)}}function jh(t,e,n,r,i){if(t=et(t),Array.isArray(t))for(let s=0;s<t.length;s++)jh(t[s],e,n,r,i);else{let s=pt(),o=fe(),a=At(),c=Mi(t)?t:et(t.provide),u=DI(t),l=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(Mi(t)||!t.multi){let f=new wr(u,i,ee),g=Zd(c,e,i?l:l+h,d);g===-1?(lh(Tc(a,o),s,c),Jd(s,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(f),o.push(f)):(n[g]=f,o[g]=f)}else{let f=Zd(c,e,l+h,d),g=Zd(c,e,l,l+h),v=f>=0&&n[f],_=g>=0&&n[g];if(i&&!_||!i&&!v){lh(Tc(a,o),s,c);let C=bN(i?TN:CN,n.length,i,r,u);!i&&_&&(n[g].providerFactory=C),Jd(s,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(C),o.push(C)}else{let C=Yw(n[i?g:f],u,!i&&r);Jd(s,t,f>-1?f:g,C)}!i&&r&&_&&n[g].componentProviders++}}}function Jd(t,e,n,r){let i=Mi(e),s=yA(e);if(i||s){let c=(s?et(e.useClass):e).prototype.ngOnDestroy;if(c){let u=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let l=u.indexOf(n);l===-1?u.push(n,[r,c]):u[l+1].push(r,c)}else u.push(n,c)}}}function Yw(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Zd(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function CN(t,e,n,r){return Bh(this.multi,[])}function TN(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=Er(n,n[U],this.providerFactory.index,r);s=a.slice(0,o),Bh(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],Bh(i,s);return s}function Bh(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function bN(t,e,n,r,i){let s=new wr(t,n,ee);return s.multi=[],s.index=e,s.componentProviders=0,Yw(s,i,r&&!n),s}function Ys(t,e=[]){return n=>{n.providersResolver=(r,i)=>DN(r,i?i(t):t,e)}}var SN=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=II(!1,r.type),s=i.length>0?Qc([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=S({token:e,providedIn:"environment",factory:()=>new e(A(ct))});let t=e;return t})();function Jw(t){Rf("NgStandalone"),t.getStandaloneInjector=e=>e.get(SN).getOrCreateStandaloneInjector(t)}function Ff(t,e,n,r,i,s){return RN(fe(),YA(),t,e,n,r,i,s)}function AN(t,e){let n=t[e];return n===Mr?void 0:n}function RN(t,e,n,r,i,s,o,a){let c=e+n;return $x(t,c,i,s,o)?jx(t,c+3,a?r.call(a,i,s,o):r(i,s,o)):AN(t,c+3)}var uc=null;function MN(t){uc!==null&&(t.defaultEncapsulation!==uc.defaultEncapsulation||t.preserveWhitespaces!==uc.preserveWhitespaces)||(uc=t)}var Dn=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},Zw=new Dn("17.3.7"),eu=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var Vf=new b(""),Js=new b(""),tu=(()=>{let e=class e{constructor(r,i,s){this._ngZone=r,this.registry=i,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,Lf||(xN(s),s.addToWindow(i)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ne.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&this._pendingCount===0&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb()}});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(i=>i.updateCb&&i.updateCb(r)?(clearTimeout(i.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,i,s){let o=-1;i&&i>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(a=>a.timeoutId!==o),r()},i)),this._callbacks.push({doneCb:r,timeoutId:o,updateCb:s})}whenStable(r,i,s){if(s&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,i,s),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,i,s){return[]}};e.\u0275fac=function(i){return new(i||e)(A(ne),A(nu),A(Js))},e.\u0275prov=S({token:e,factory:e.\u0275fac});let t=e;return t})(),nu=(()=>{let e=class e{constructor(){this._applications=new Map}registerApplication(r,i){this._applications.set(r,i)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,i=!0){return Lf?.findTestabilityInTree(this,r,i)??null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();function xN(t){Lf=t}var Lf;function Pr(t){return!!t&&typeof t.then=="function"}function Xw(t){return!!t&&typeof t.subscribe=="function"}var ru=new b(""),eE=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=w(ru,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(Pr(o))r.push(o);else if(Xw(o)){let a=new Promise((c,u)=>{o.subscribe({complete:c,error:u})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Uf=new b("");function NN(){zv(()=>{throw new T(600,!1)})}function PN(t){return t.isBoundToModule}function ON(t,e,n){try{let r=n();return Pr(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}function tE(t,e){return Array.isArray(e)?e.reduce(tE,t):E(E({},t),e)}var ji=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=w(iw),this.afterRenderEffectManager=w(Mf),this.externalTestViews=new Set,this.beforeRender=new Xe,this.afterTick=new Xe,this.componentTypes=[],this.components=[],this.isStable=w(Yc).hasPendingTasks.pipe(q(r=>!r)),this._injector=w(ct)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof Rc;if(!this._injector.get(eE).done){let f=!s&&mI(r),g=!1;throw new T(405,g)}let a;s?a=r:a=this._injector.get(Wc).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=PN(a)?void 0:this._injector.get(Wn),u=i||a.selector,l=a.create(nt.NULL,[],u,c),d=l.location.nativeElement,h=l.injector.get(Vf,null);return h?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),gc(this.components,l),h?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new T(101,!1);let i=te(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(s){this.internalErrorHandler(s)}finally{this.afterTick.next(),this._runningTick=!1,te(i)}}detectChangesInAttachedViews(r){let i=0,s=this.afterRenderEffectManager;for(;;){if(i===jw)throw new T(103,!1);if(r){let o=i===0;this.beforeRender.next(o);for(let{_lView:a,notifyErrorHandler:c}of this._views)kN(a,o,c)}if(i++,s.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>$h(o))&&(s.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>$h(o))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;gc(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(Uf,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>gc(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new T(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function gc(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function kN(t,e,n){!e&&!$h(t)||FN(t,n,e)}function $h(t){return of(t)}function FN(t,e,n){let r;n?(r=0,t[x]|=1024):t[x]&64?r=0:r=1,Bw(t,e,r)}var Hh=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},iu=(()=>{let e=class e{compileModuleSync(r){return new Pc(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=yI(r),o=fw(s.declarations).reduce((a,c)=>{let u=zn(c);return u&&a.push(new Pi(u)),a},[]);return new Hh(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),VN=new b("");function LN(t,e,n){let r=new Pc(n);return Promise.resolve(r)}function J_(t){for(let e=t.length-1;e>=0;e--)if(t[e]!==void 0)return t[e]}var UN=(()=>{let e=class e{constructor(){this.zone=w(ne),this.applicationRef=w(ji)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function jN(t){return[{provide:ne,useFactory:t},{provide:Ri,multi:!0,useFactory:()=>{let e=w(UN,{optional:!0});return()=>e.initialize()}},{provide:Ri,multi:!0,useFactory:()=>{let e=w(HN);return()=>{e.initialize()}}},{provide:iw,useFactory:BN}]}function BN(){let t=w(ne),e=w(Xt);return n=>t.runOutsideAngular(()=>e.handleError(n))}function $N(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var HN=(()=>{let e=class e{constructor(){this.subscription=new Ce,this.initialized=!1,this.zone=w(ne),this.pendingTasks=w(Yc)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ne.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ne.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function qN(){return typeof $localize<"u"&&$localize.locale||kc}var jf=new b("",{providedIn:"root",factory:()=>w(jf,B.Optional|B.SkipSelf)||qN()});var nE=new b(""),rE=(()=>{let e=class e{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,i){let s=Zx(i?.ngZone,$N({eventCoalescing:i?.ngZoneEventCoalescing,runCoalescing:i?.ngZoneRunCoalescing}));return s.run(()=>{let o=Vx(r.moduleType,this.injector,jN(()=>s)),a=o.injector.get(Xt,null);return s.runOutsideAngular(()=>{let c=s.onError.subscribe({next:u=>{a.handleError(u)}});o.onDestroy(()=>{gc(this._modules,o),c.unsubscribe()})}),ON(a,s,()=>{let c=o.injector.get(eE);return c.runInitializers(),c.donePromise.then(()=>{let u=o.injector.get(jf,kc);return _N(u||kc),this._moduleDoBootstrap(o),o})})})}bootstrapModule(r,i=[]){let s=tE({},i);return LN(this.injector,s,r).then(o=>this.bootstrapModuleFactory(o,s))}_moduleDoBootstrap(r){let i=r.injector.get(ji);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(s=>i.bootstrap(s));else if(r.instance.ngDoBootstrap)r.instance.ngDoBootstrap(i);else throw new T(-403,!1);this._modules.push(r)}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new T(404,!1);this._modules.slice().forEach(i=>i.destroy()),this._destroyListeners.forEach(i=>i());let r=this._injector.get(nE,null);r&&(r.forEach(i=>i()),r.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}};e.\u0275fac=function(i){return new(i||e)(A(nt))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),ks=null,iE=new b("");function zN(t){if(ks&&!ks.get(iE,!1))throw new T(400,!1);NN(),ks=t;let e=t.get(rE);return KN(t),e}function Bf(t,e,n=[]){let r=`Platform: ${e}`,i=new b(r);return(s=[])=>{let o=sE();if(!o||o.injector.get(iE,!1)){let a=[...n,...s,{provide:i,useValue:!0}];t?t(a):zN(GN(a,r))}return WN(i)}}function GN(t=[],e){return nt.create({name:e,providers:[{provide:Uc,useValue:"platform"},{provide:nE,useValue:new Set([()=>ks=null])},...t]})}function WN(t){let e=sE();if(!e)throw new T(401,!1);return e}function sE(){return ks?.get(rE)??null}function KN(t){t.get(mf,null)?.forEach(n=>n())}var Or=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=QN;let t=e;return t})();function QN(t){return YN(At(),fe(),(t&16)===16)}function YN(t,e,n){if(Bc(t)&&!n){let r=Kn(t.index,e);return new Cr(r,r)}else if(t.type&47){let r=e[Jt];return new Cr(r,e)}return null}var qh=class{constructor(){}supports(e){return Kw(e)}create(e){return new zh(e)}},JN=(t,e)=>e,zh=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||JN}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){let o=!r||n&&n.currentIndex<Z_(r,i,s)?n:r,a=Z_(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,o.previousIndex==null)i++;else{s||(s=[]);let u=a-i,l=c-i;if(u!=l){for(let h=0;h<u;h++){let f=h<s.length?s[h]:s[h]=0,g=f+h;l<=g&&g<u&&(s[h]=f+1)}let d=o.previousIndex;s[d]=l-u}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!Kw(e))throw new T(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,a),r=!0):(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else i=0,Lx(e,a=>{o=this._trackByFn(i,a),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,a,o,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new Gh(n,r),s,i)),e}_verifyReinsertion(e,n,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Fc),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Fc),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Gh=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Wh=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Fc=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Wh,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function Z_(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function X_(){return new $f([new qh])}var $f=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||X_()),deps:[[e,new Jh,new bt]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i!=null)return i;throw new T(901,!1)}};e.\u0275prov=S({token:e,providedIn:"root",factory:X_});let t=e;return t})();var oE=Bf(null,"core",[]),aE=(()=>{let e=class e{constructor(r){}};e.\u0275fac=function(i){return new(i||e)(A(ji))},e.\u0275mod=Oe({type:e}),e.\u0275inj=Pe({});let t=e;return t})();function Zs(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function cE(t){let e=zn(t);if(!e)return null;let n=new Pi(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var pE=null;function tn(){return pE}function gE(t){pE??=t}var su=class{};var ut=new b(""),Kf=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:()=>w(eP),providedIn:"platform"});let t=e;return t})(),mE=new b(""),eP=(()=>{let e=class e extends Kf{constructor(){super(),this._doc=w(ut),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return tn().getBaseHref(this._doc)}onPopState(r){let i=tn().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=tn().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function Qf(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function uE(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function An(t){return t&&t[0]!=="?"?"?"+t:t}var kr=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:()=>w(Yf),providedIn:"root"});let t=e;return t})(),yE=new b(""),Yf=(()=>{let e=class e extends kr{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??w(ut).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return Qf(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+An(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+An(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+An(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(A(Kf),A(yE,8))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),vE=(()=>{let e=class e extends kr{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=Qf(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+An(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+An(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(A(Kf),A(yE,8))},e.\u0275prov=S({token:e,factory:e.\u0275fac});let t=e;return t})(),Bi=(()=>{let e=class e{constructor(r){this._subject=new Te,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=rP(uE(lE(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+An(i))}normalize(r){return e.stripTrailingSlash(nP(this._basePath,lE(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+An(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+An(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=An,e.joinWithSlash=Qf,e.stripTrailingSlash=uE,e.\u0275fac=function(i){return new(i||e)(A(kr))},e.\u0275prov=S({token:e,factory:()=>tP(),providedIn:"root"});let t=e;return t})();function tP(){return new Bi(A(kr))}function nP(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function lE(t){return t.replace(/\/index.html$/,"")}function rP(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function _E(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var Hf=/\s+/,dE=[],IE=(()=>{let e=class e{constructor(r,i){this._ngEl=r,this._renderer=i,this.initialClasses=dE,this.stateMap=new Map}set klass(r){this.initialClasses=r!=null?r.trim().split(Hf):dE}set ngClass(r){this.rawClass=typeof r=="string"?r.trim().split(Hf):r}ngDoCheck(){for(let i of this.initialClasses)this._updateState(i,!0);let r=this.rawClass;if(Array.isArray(r)||r instanceof Set)for(let i of r)this._updateState(i,!0);else if(r!=null)for(let i of Object.keys(r))this._updateState(i,!!r[i]);this._applyStateDiff()}_updateState(r,i){let s=this.stateMap.get(r);s!==void 0?(s.enabled!==i&&(s.changed=!0,s.enabled=i),s.touched=!0):this.stateMap.set(r,{enabled:i,changed:!0,touched:!0})}_applyStateDiff(){for(let r of this.stateMap){let i=r[0],s=r[1];s.changed?(this._toggleClass(i,s.enabled),s.changed=!1):s.touched||(s.enabled&&this._toggleClass(i,!1),this.stateMap.delete(i)),s.touched=!1}}_toggleClass(r,i){r=r.trim(),r.length>0&&r.split(Hf).forEach(s=>{i?this._renderer.addClass(this._ngEl.nativeElement,s):this._renderer.removeClass(this._ngEl.nativeElement,s)})}};e.\u0275fac=function(i){return new(i||e)(ee(Ut),ee(xr))},e.\u0275dir=qe({type:e,selectors:[["","ngClass",""]],inputs:{klass:[at.None,"class","klass"],ngClass:"ngClass"},standalone:!0});let t=e;return t})();var qf=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},wE=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,s){this._viewContainer=r,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((s,o,a)=>{if(s.previousIndex==null)i.createEmbeddedView(this._template,new qf(s.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(o===null?void 0:o);else if(o!==null){let c=i.get(o);i.move(c,a),hE(c,s)}});for(let s=0,o=i.length;s<o;s++){let c=i.get(s).context;c.index=s,c.count=o,c.ngForOf=this._ngForOf}r.forEachIdentityChange(s=>{let o=i.get(s.currentIndex);hE(o,s)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(ee(Qn),ee(Tr),ee($f))},e.\u0275dir=qe({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function hE(t,e){t.context.$implicit=e.item}var EE=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new zf,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){fE("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){fE("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(ee(Qn),ee(Tr))},e.\u0275dir=qe({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),zf=class{constructor(){this.$implicit=null,this.ngIf=null}};function fE(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${tt(e)}'.`)}var DE=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Oe({type:e}),e.\u0275inj=Pe({});let t=e;return t})(),Jf="browser",iP="server";function sP(t){return t===Jf}function Zf(t){return t===iP}var CE=(()=>{let e=class e{};e.\u0275prov=S({token:e,providedIn:"root",factory:()=>sP(w(en))?new Gf(w(ut),window):new Wf});let t=e;return t})(),Gf=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=oP(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function oP(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var Wf=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},ou=class{};var tp=class extends su{constructor(){super(...arguments),this.supportsDOMEvents=!0}},np=class t extends tp{static makeCurrent(){gE(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=uP();return n==null?null:lP(n)}resetBaseElement(){Xs=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return _E(document.cookie,e)}},Xs=null;function uP(){return Xs=Xs||document.querySelector("base"),Xs?Xs.getAttribute("href"):null}function lP(t){return new URL(t,document.baseURI).pathname}var rp=class{addToWindow(e){ht.getAngularTestability=(r,i=!0)=>{let s=e.findTestabilityInTree(r,i);if(s==null)throw new T(5103,!1);return s},ht.getAllAngularTestabilities=()=>e.getAllTestabilities(),ht.getAllAngularRootElements=()=>e.getAllRootElements();let n=r=>{let i=ht.getAllAngularTestabilities(),s=i.length,o=function(){s--,s==0&&r()};i.forEach(a=>{a.whenStable(o)})};ht.frameworkStabilizers||(ht.frameworkStabilizers=[]),ht.frameworkStabilizers.push(n)}findTestabilityInTree(e,n,r){if(n==null)return null;let i=e.getTestability(n);return i??(r?tn().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},dP=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac});let t=e;return t})(),ip=new b(""),AE=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new T(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(A(ip),A(ne))},e.\u0275prov=S({token:e,factory:e.\u0275fac});let t=e;return t})(),au=class{constructor(e){this._doc=e}},Xf="ng-app-id",RE=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Zf(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${Xf}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(Xf),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(Xf,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(A(ut),A($c),A(yf,8),A(en))},e.\u0275prov=S({token:e,factory:e.\u0275fac});let t=e;return t})(),ep={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},op=/%COMP%/g,ME="%COMP%",hP=`_nghost-${ME}`,fP=`_ngcontent-${ME}`,pP=!0,gP=new b("",{providedIn:"root",factory:()=>pP});function mP(t){return fP.replace(op,t)}function yP(t){return hP.replace(op,t)}function xE(t,e){return e.map(n=>n.replace(op,t))}var TE=(()=>{let e=class e{constructor(r,i,s,o,a,c,u,l=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Zf(c),this.defaultRenderer=new eo(r,a,u,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Qt.ShadowDom&&(i=ce(E({},i),{encapsulation:Qt.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof cu?s.applyToHost(r):s instanceof to&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,c=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case Qt.Emulated:o=new cu(u,l,i,this.appId,d,a,c,h);break;case Qt.ShadowDom:return new sp(u,l,r,i,a,c,this.nonce,h);default:o=new to(u,l,i,d,a,c,h);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(A(AE),A(RE),A($c),A(gP),A(ut),A(en),A(ne),A(yf))},e.\u0275prov=S({token:e,factory:e.\u0275fac});let t=e;return t})(),eo=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(ep[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(bE(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(bE(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new T(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=ep[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=ep[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(En.DashCase|En.Important)?e.style.setProperty(n,r,i&En.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&En.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=tn().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function bE(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var sp=class extends eo{constructor(e,n,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=xE(i.id,i.styles);for(let l of u){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=l,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},to=class extends eo{constructor(e,n,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?xE(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},cu=class extends to{constructor(e,n,r,i,s,o,a,c){let u=i+"-"+r.id;super(e,n,r,s,o,a,c,u),this.contentAttr=mP(u),this.hostAttr=yP(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},vP=(()=>{let e=class e extends au{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(A(ut))},e.\u0275prov=S({token:e,factory:e.\u0275fac});let t=e;return t})(),SE=["alt","control","meta","shift"],_P={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},IP={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},wP=(()=>{let e=class e extends au{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>tn().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),SE.forEach(l=>{let d=i.indexOf(l);d>-1&&(i.splice(d,1),a+=l+".")}),a+=o,i.length!=0||o.length===0)return null;let u={};return u.domEventName=s,u.fullKey=a,u}static matchEventFullKeyCode(r,i){let s=_P[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),SE.forEach(a=>{if(a!==s){let c=IP[a];c(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(A(ut))},e.\u0275prov=S({token:e,factory:e.\u0275fac});let t=e;return t})();function EP(){np.makeCurrent()}function DP(){return new Xt}function CP(){return lw(document),document}var TP=[{provide:en,useValue:Jf},{provide:mf,useValue:EP,multi:!0},{provide:ut,useFactory:CP,deps:[]}],NE=Bf(oE,"browser",TP),bP=new b(""),SP=[{provide:Js,useClass:rp,deps:[]},{provide:Vf,useClass:tu,deps:[ne,nu,Js]},{provide:tu,useClass:tu,deps:[ne,nu,Js]}],AP=[{provide:Uc,useValue:"root"},{provide:Xt,useFactory:DP,deps:[]},{provide:ip,useClass:vP,multi:!0,deps:[ut,ne,en]},{provide:ip,useClass:wP,multi:!0,deps:[ut]},TE,RE,AE,{provide:Hs,useExisting:TE},{provide:ou,useClass:dP,deps:[]},[]],PE=(()=>{let e=class e{constructor(r){}static withServerTransition(r){return{ngModule:e,providers:[{provide:$c,useValue:r.appId}]}}};e.\u0275fac=function(i){return new(i||e)(A(bP,12))},e.\u0275mod=Oe({type:e}),e.\u0275inj=Pe({providers:[...AP,...SP],imports:[DE,aE]});let t=e;return t})();var OE=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(A(ut))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var L="primary",yo=Symbol("RouteTitle"),dp=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Gi(t){return new dp(t)}function RP(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function MP(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!nn(t[n],e[n]))return!1;return!0}function nn(t,e){let n=t?hp(t):void 0,r=e?hp(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!qE(t[i],e[i]))return!1;return!0}function hp(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function qE(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function zE(t){return t.length>0?t[t.length-1]:null}function er(t){return Nd(t)?t:Pr(t)?ve(Promise.resolve(t)):N(t)}var xP={exact:WE,subset:KE},GE={exact:NP,subset:PP,ignored:()=>!0};function FE(t,e,n){return xP[n.paths](t.root,e.root,n.matrixParams)&&GE[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function NP(t,e){return nn(t,e)}function WE(t,e,n){if(!Vr(t.segments,e.segments)||!du(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!WE(t.children[r],e.children[r],n))return!1;return!0}function PP(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>qE(t[n],e[n]))}function KE(t,e,n){return QE(t,e,e.segments,n)}function QE(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Vr(i,n)||e.hasChildren()||!du(i,n,r))}else if(t.segments.length===n.length){if(!Vr(t.segments,n)||!du(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!KE(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!Vr(t.segments,i)||!du(t.segments,i,r)||!t.children[L]?!1:QE(t.children[L],e,s,r)}}function du(t,e,n){return e.every((r,i)=>GE[n](t[i].parameters,r.parameters))}var Yn=class{constructor(e=new oe([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Gi(this.queryParams),this._queryParamMap}toString(){return FP.serialize(this)}},oe=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return hu(this)}},Fr=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Gi(this.parameters),this._parameterMap}toString(){return JE(this)}};function OP(t,e){return Vr(t,e)&&t.every((n,r)=>nn(n.parameters,e[r].parameters))}function Vr(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function kP(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===L&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==L&&(n=n.concat(e(i,r)))}),n}var vo=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:()=>new co,providedIn:"root"});let t=e;return t})(),co=class{parse(e){let n=new pp(e);return new Yn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${no(e.root,!0)}`,r=UP(e.queryParams),i=typeof e.fragment=="string"?`#${VP(e.fragment)}`:"";return`${n}${r}${i}`}},FP=new co;function hu(t){return t.segments.map(e=>JE(e)).join("/")}function no(t,e){if(!t.hasChildren())return hu(t);if(e){let n=t.children[L]?no(t.children[L],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==L&&r.push(`${i}:${no(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=kP(t,(r,i)=>i===L?[no(t.children[L],!1)]:[`${i}:${no(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[L]!=null?`${hu(t)}/${n[0]}`:`${hu(t)}/(${n.join("//")})`}}function YE(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function uu(t){return YE(t).replace(/%3B/gi,";")}function VP(t){return encodeURI(t)}function fp(t){return YE(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function fu(t){return decodeURIComponent(t)}function VE(t){return fu(t.replace(/\+/g,"%20"))}function JE(t){return`${fp(t.path)}${LP(t.parameters)}`}function LP(t){return Object.entries(t).map(([e,n])=>`;${fp(e)}=${fp(n)}`).join("")}function UP(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${uu(n)}=${uu(i)}`).join("&"):`${uu(n)}=${uu(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var jP=/^[^\/()?;#]+/;function ap(t){let e=t.match(jP);return e?e[0]:""}var BP=/^[^\/()?;=#]+/;function $P(t){let e=t.match(BP);return e?e[0]:""}var HP=/^[^=?&#]+/;function qP(t){let e=t.match(HP);return e?e[0]:""}var zP=/^[^&#]+/;function GP(t){let e=t.match(zP);return e?e[0]:""}var pp=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new oe([],{}):new oe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[L]=new oe(e,n)),r}parseSegment(){let e=ap(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new T(4009,!1);return this.capture(e),new Fr(fu(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=$P(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=ap(this.remaining);i&&(r=i,this.capture(r))}e[fu(n)]=fu(r)}parseQueryParam(e){let n=qP(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=GP(this.remaining);o&&(r=o,this.capture(r))}let i=VE(n),s=VE(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=ap(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new T(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=L);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[L]:new oe([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new T(4011,!1)}};function ZE(t){return t.segments.length>0?new oe([],{[L]:t}):t}function XE(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=XE(i);if(r===L&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new oe(t.segments,e);return WP(n)}function WP(t){if(t.numberOfChildren===1&&t.children[L]){let e=t.children[L];return new oe(t.segments.concat(e.segments),e.children)}return t}function Wi(t){return t instanceof Yn}function KP(t,e,n=null,r=null){let i=eD(t);return tD(i,e,n,r)}function eD(t){let e;function n(s){let o={};for(let c of s.children){let u=n(c);o[c.outlet]=u}let a=new oe(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=ZE(r);return e??i}function tD(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return cp(i,i,i,n,r);let s=QP(e);if(s.toRoot())return cp(i,i,new oe([],{}),n,r);let o=YP(s,i,t),a=o.processChildren?so(o.segmentGroup,o.index,s.commands):rD(o.segmentGroup,o.index,s.commands);return cp(i,o.segmentGroup,a,n,r)}function pu(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function uo(t){return typeof t=="object"&&t!=null&&t.outlets}function cp(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([c,u])=>{s[c]=Array.isArray(u)?u.map(l=>`${l}`):`${u}`});let o;t===e?o=n:o=nD(t,e,n);let a=ZE(XE(o));return new Yn(a,s,i)}function nD(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=nD(s,e,n)}),new oe(t.segments,r)}var gu=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&pu(r[0]))throw new T(4003,!1);let i=r.find(uo);if(i&&i!==zE(r))throw new T(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function QP(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new gu(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new gu(n,e,r)}var qi=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function YP(t,e,n){if(t.isAbsolute)return new qi(e,!0,0);if(!n)return new qi(e,!1,NaN);if(n.parent===null)return new qi(n,!0,0);let r=pu(t.commands[0])?0:1,i=n.segments.length-1+r;return JP(n,i,t.numberOfDoubleDots)}function JP(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new T(4005,!1);i=r.segments.length}return new qi(r,!1,i-s)}function ZP(t){return uo(t[0])?t[0].outlets:{[L]:t}}function rD(t,e,n){if(t??=new oe([],{}),t.segments.length===0&&t.hasChildren())return so(t,e,n);let r=XP(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new oe(t.segments.slice(0,r.pathIndex),{});return s.children[L]=new oe(t.segments.slice(r.pathIndex),t.children),so(s,0,i)}else return r.match&&i.length===0?new oe(t.segments,{}):r.match&&!t.hasChildren()?gp(t,e,n):r.match?so(t,0,i):gp(t,e,n)}function so(t,e,n){if(n.length===0)return new oe(t.segments,{});{let r=ZP(n),i={};if(Object.keys(r).some(s=>s!==L)&&t.children[L]&&t.numberOfChildren===1&&t.children[L].segments.length===0){let s=so(t.children[L],e,n);return new oe(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=rD(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new oe(t.segments,i)}}function XP(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(uo(a))break;let c=`${a}`,u=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!UE(c,u,o))return s;r+=2}else{if(!UE(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function gp(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(uo(s)){let c=eO(s.outlets);return new oe(r,c)}if(i===0&&pu(n[0])){let c=t.segments[e];r.push(new Fr(c.path,LE(n[0]))),i++;continue}let o=uo(s)?s.outlets[L]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&pu(a)?(r.push(new Fr(o,LE(a))),i+=2):(r.push(new Fr(o,{})),i++)}return new oe(r,{})}function eO(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=gp(new oe([],{}),0,r))}),e}function LE(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function UE(t,e,n){return t==n.path&&nn(e,n.parameters)}var oo="imperative",ke=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(ke||{}),Rt=class{constructor(e,n){this.id=e,this.url=n}},Ki=class extends Rt{constructor(e,n,r="imperative",i=null){super(e,n),this.type=ke.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Rn=class extends Rt{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=ke.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},vt=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(vt||{}),mu=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(mu||{}),Jn=class extends Rt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=ke.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Zn=class extends Rt{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=ke.NavigationSkipped}},lo=class extends Rt{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=ke.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},yu=class extends Rt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ke.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},mp=class extends Rt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ke.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},yp=class extends Rt{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=ke.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},vp=class extends Rt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ke.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},_p=class extends Rt{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ke.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ip=class{constructor(e){this.route=e,this.type=ke.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},wp=class{constructor(e){this.route=e,this.type=ke.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Ep=class{constructor(e){this.snapshot=e,this.type=ke.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Dp=class{constructor(e){this.snapshot=e,this.type=ke.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Cp=class{constructor(e){this.snapshot=e,this.type=ke.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Tp=class{constructor(e){this.snapshot=e,this.type=ke.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},vu=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=ke.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},ho=class{},fo=class{constructor(e){this.url=e}};var bp=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new _o,this.attachRef=null}},_o=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new bp,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),_u=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Sp(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Sp(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Ap(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Ap(e,this._root).map(n=>n.value)}};function Sp(t,e){if(t===e.value)return e;for(let n of e.children){let r=Sp(t,n);if(r)return r}return null}function Ap(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Ap(t,n);if(r.length)return r.unshift(e),r}return[]}var yt=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Hi(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Iu=class extends _u{constructor(e,n){super(e),this.snapshot=n,Lp(this,e)}toString(){return this.snapshot.toString()}};function iD(t){let e=tO(t),n=new Be([new Fr("",{})]),r=new Be({}),i=new Be({}),s=new Be({}),o=new Be(""),a=new Xn(n,r,s,o,i,L,t,e.root);return a.snapshot=e.root,new Iu(new yt(a,[]),e)}function tO(t){let e={},n={},r={},i="",s=new po([],e,r,i,n,L,t,null,{});return new wu("",new yt(s,[]))}var Xn=class{constructor(e,n,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(q(u=>u[yo]))??N(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(q(e=>Gi(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(q(e=>Gi(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Vp(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:E(E({},e.params),t.params),data:E(E({},e.data),t.data),resolve:E(E(E(E({},t.data),e.data),i?.data),t._resolvedData)}:r={params:E({},t.params),data:E({},t.data),resolve:E(E({},t.data),t._resolvedData??{})},i&&oD(i)&&(r.resolve[yo]=i.title),r}var po=class{get title(){return this.data?.[yo]}constructor(e,n,r,i,s,o,a,c,u){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Gi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Gi(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},wu=class extends _u{constructor(e,n){super(n),this.url=e,Lp(this,n)}toString(){return sD(this._root)}};function Lp(t,e){e.value._routerState=t,e.children.forEach(n=>Lp(t,n))}function sD(t){let e=t.children.length>0?` { ${t.children.map(sD).join(", ")} } `:"";return`${t.value}${e}`}function up(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,nn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),nn(e.params,n.params)||t.paramsSubject.next(n.params),MP(e.url,n.url)||t.urlSubject.next(n.url),nn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Rp(t,e){let n=nn(t.params,e.params)&&OP(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Rp(t.parent,e.parent))}function oD(t){return typeof t.title=="string"||t.title===null}var Up=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=L,this.activateEvents=new Te,this.deactivateEvents=new Te,this.attachEvents=new Te,this.detachEvents=new Te,this.parentContexts=w(_o),this.location=w(Qn),this.changeDetector=w(Or),this.environmentInjector=w(ct),this.inputBinder=w(bu,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new T(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new T(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new T(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new T(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new Mp(r,c,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:u,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=qe({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Rr]});let t=e;return t})(),Mp=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Xn?this.route:e===_o?this.childContexts:this.parent.get(e,n)}},bu=new b(""),jE=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,s=Ns([i.queryParams,i.params,i.data]).pipe(Dt(([o,a,c],u)=>(c=E(E(E({},o),a),c),u===0?N(c):Promise.resolve(c)))).subscribe(o=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=cE(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:c}of a.inputs)r.activatedComponentRef.setInput(c,o[c])});this.outletDataSubscriptions.set(r,s)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac});let t=e;return t})();function nO(t,e,n){let r=go(t,e._root,n?n._root:void 0);return new Iu(r,e)}function go(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=rO(t,e,n);return new yt(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>go(t,a)),o}}let r=iO(e.value),i=e.children.map(s=>go(t,s));return new yt(r,i)}}function rO(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return go(t,r,i);return go(t,r)})}function iO(t){return new Xn(new Be(t.url),new Be(t.params),new Be(t.queryParams),new Be(t.fragment),new Be(t.data),t.outlet,t.component,t)}var aD="ngNavigationCancelingError";function cD(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Wi(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=uD(!1,vt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function uD(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[aD]=!0,n.cancellationCode=e,n}function sO(t){return lD(t)&&Wi(t.url)}function lD(t){return!!t&&t[aD]}var oO=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=ki({type:e,selectors:[["ng-component"]],standalone:!0,features:[Jw],decls:1,vars:0,template:function(i,s){i&1&&de(0,"router-outlet")},dependencies:[Up],encapsulation:2});let t=e;return t})();function aO(t,e){return t.providers&&!t._injector&&(t._injector=Qc(t.providers,e,`Route: ${t.path}`)),t._injector??e}function jp(t){let e=t.children&&t.children.map(jp),n=e?ce(E({},t),{children:e}):E({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==L&&(n.component=oO),n}function rn(t){return t.outlet||L}function cO(t,e){let n=t.filter(r=>rn(r)===e);return n.push(...t.filter(r=>rn(r)!==e)),n}function Io(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var uO=(t,e,n,r)=>q(i=>(new xp(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),xp=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),up(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Hi(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Hi(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Hi(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Hi(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Tp(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Dp(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(up(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),up(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=Io(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},Eu=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},zi=class{constructor(e,n){this.component=e,this.route=n}};function lO(t,e,n){let r=t._root,i=e?e._root:null;return ro(r,i,n,[r.value])}function dO(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Yi(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!nI(t)?t:e.get(t):r}function ro(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Hi(e);return t.children.forEach(o=>{hO(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>ao(a,n.getContext(o),i)),i}function hO(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=fO(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Eu(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?ro(t,e,a?a.children:null,r,i):ro(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new zi(a.outlet.component,o))}else o&&ao(e,a,i),i.canActivateChecks.push(new Eu(r)),s.component?ro(t,null,a?a.children:null,r,i):ro(t,null,n,r,i);return i}function fO(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Vr(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Vr(t.url,e.url)||!nn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Rp(t,e)||!nn(t.queryParams,e.queryParams);case"paramsChange":default:return!Rp(t,e)}}function ao(t,e,n){let r=Hi(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?ao(o,e.children.getContext(s),n):ao(o,null,n):ao(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new zi(e.outlet.component,i)):n.canDeactivateChecks.push(new zi(null,i)):n.canDeactivateChecks.push(new zi(null,i))}function wo(t){return typeof t=="function"}function pO(t){return typeof t=="boolean"}function gO(t){return t&&wo(t.canLoad)}function mO(t){return t&&wo(t.canActivate)}function yO(t){return t&&wo(t.canActivateChild)}function vO(t){return t&&wo(t.canDeactivate)}function _O(t){return t&&wo(t.canMatch)}function dD(t){return t instanceof vn||t?.name==="EmptyError"}var lu=Symbol("INITIAL_VALUE");function Qi(){return Dt(t=>Ns(t.map(e=>e.pipe(_n(1),Vd(lu)))).pipe(q(e=>{for(let n of e)if(n!==!0){if(n===lu)return lu;if(n===!1||n instanceof Yn)return n}return!0}),Et(e=>e!==lu),_n(1)))}function IO(t,e){return Se(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?N(ce(E({},n),{guardsResult:!0})):wO(o,r,i,t).pipe(Se(a=>a&&pO(a)?EO(r,s,t,e):N(a)),q(a=>ce(E({},n),{guardsResult:a})))})}function wO(t,e,n,r){return ve(t).pipe(Se(i=>SO(i.component,i.route,n,e,r)),Gt(i=>i!==!0,!0))}function EO(t,e,n,r){return ve(e).pipe(gr(i=>_i(CO(i.route.parent,r),DO(i.route,r),bO(t,i.path,n),TO(t,i.route,n))),Gt(i=>i!==!0,!0))}function DO(t,e){return t!==null&&e&&e(new Cp(t)),N(!0)}function CO(t,e){return t!==null&&e&&e(new Ep(t)),N(!0)}function TO(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return N(!0);let i=r.map(s=>ic(()=>{let o=Io(e)??n,a=Yi(s,o),c=mO(a)?a.canActivate(e,t):Cn(o,()=>a(e,t));return er(c).pipe(Gt())}));return N(i).pipe(Qi())}function bO(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>dO(o)).filter(o=>o!==null).map(o=>ic(()=>{let a=o.guards.map(c=>{let u=Io(o.node)??n,l=Yi(c,u),d=yO(l)?l.canActivateChild(r,t):Cn(u,()=>l(r,t));return er(d).pipe(Gt())});return N(a).pipe(Qi())}));return N(s).pipe(Qi())}function SO(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return N(!0);let o=s.map(a=>{let c=Io(e)??i,u=Yi(a,c),l=vO(u)?u.canDeactivate(t,e,n,r):Cn(c,()=>u(t,e,n,r));return er(l).pipe(Gt())});return N(o).pipe(Qi())}function AO(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return N(!0);let s=i.map(o=>{let a=Yi(o,t),c=gO(a)?a.canLoad(e,n):Cn(t,()=>a(e,n));return er(c)});return N(s).pipe(Qi(),hD(r))}function hD(t){return Cd(xe(e=>{if(Wi(e))throw cD(t,e)}),q(e=>e===!0))}function RO(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return N(!0);let s=i.map(o=>{let a=Yi(o,t),c=_O(a)?a.canMatch(e,n):Cn(t,()=>a(e,n));return er(c)});return N(s).pipe(Qi(),hD(r))}var mo=class{constructor(e){this.segmentGroup=e||null}},Du=class extends Error{constructor(e){super(),this.urlTree=e}};function $i(t){return yi(new mo(t))}function MO(t){return yi(new T(4e3,!1))}function xO(t){return yi(uD(!1,vt.GuardRejected))}var Np=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return N(r);if(i.numberOfChildren>1||!i.children[L])return MO(e.redirectTo);i=i.children[L]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new Du(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new Yn(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new oe(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new T(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},Pp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function NO(t,e,n,r,i){let s=Bp(t,e,n);return s.matched?(r=aO(e,r),RO(r,e,n,i).pipe(q(o=>o===!0?s:E({},Pp)))):N(s)}function Bp(t,e,n){if(e.path==="**")return PO(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?E({},Pp):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||RP)(n,t,e);if(!i)return E({},Pp);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?E(E({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function PO(t){return{matched:!0,parameters:t.length>0?zE(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function BE(t,e,n,r){return n.length>0&&FO(t,n,r)?{segmentGroup:new oe(e,kO(r,new oe(n,t.children))),slicedSegments:[]}:n.length===0&&VO(t,n,r)?{segmentGroup:new oe(t.segments,OO(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new oe(t.segments,t.children),slicedSegments:n}}function OO(t,e,n,r){let i={};for(let s of n)if(Su(t,e,s)&&!r[rn(s)]){let o=new oe([],{});i[rn(s)]=o}return E(E({},r),i)}function kO(t,e){let n={};n[L]=e;for(let r of t)if(r.path===""&&rn(r)!==L){let i=new oe([],{});n[rn(r)]=i}return n}function FO(t,e,n){return n.some(r=>Su(t,e,r)&&rn(r)!==L)}function VO(t,e,n){return n.some(r=>Su(t,e,r))}function Su(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function LO(t,e,n,r){return rn(t)!==r&&(r===L||!Su(e,n,t))?!1:Bp(e,t,n).matched}function UO(t,e,n){return e.length===0&&!t.children[n]}var Op=class{};function jO(t,e,n,r,i,s,o="emptyOnly"){return new kp(t,e,n,r,i,o,s).recognize()}var BO=31,kp=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Np(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new T(4002,`'${e.segmentGroup}'`)}recognize(){let e=BE(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(q(n=>{let r=new po([],Object.freeze({}),Object.freeze(E({},this.urlTree.queryParams)),this.urlTree.fragment,{},L,this.rootComponentType,null,{}),i=new yt(r,n),s=new wu("",i),o=KP(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,L).pipe(Bn(r=>{if(r instanceof Du)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof mo?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=Vp(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(q(s=>s instanceof yt?[s]:[]))}processChildren(e,n,r){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return ve(i).pipe(gr(s=>{let o=r.children[s],a=cO(n,s);return this.processSegmentGroup(e,a,o,s)}),Fd((s,o)=>(s.push(...o),s)),$n(null),kd(),Se(s=>{if(s===null)return $i(r);let o=fD(s);return $O(o),N(o)}))}processSegment(e,n,r,i,s,o){return ve(n).pipe(gr(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(Bn(c=>{if(c instanceof mo)return N(null);throw c}))),Gt(a=>!!a),Bn(a=>{if(dD(a))return UO(r,i,s)?N(new Op):$i(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return LO(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):$i(i):$i(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){let{matched:a,consumedSegments:c,positionalParamSegments:u,remainingSegments:l}=Bp(n,i,s);if(!a)return $i(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>BO&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,u);return this.applyRedirects.lineralizeSegments(i,d).pipe(Se(h=>this.processSegment(e,r,n,h.concat(l),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s){let o=NO(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),o.pipe(Dt(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Dt(({routes:c})=>{let u=r._loadedInjector??e,{consumedSegments:l,remainingSegments:d,parameters:h}=a,f=new po(l,h,Object.freeze(E({},this.urlTree.queryParams)),this.urlTree.fragment,qO(r),rn(r),r.component??r._loadedComponent??null,r,zO(r)),{segmentGroup:g,slicedSegments:v}=BE(n,l,d,c);if(v.length===0&&g.hasChildren())return this.processChildren(u,c,g).pipe(q(C=>C===null?null:new yt(f,C)));if(c.length===0&&v.length===0)return N(new yt(f,[]));let _=rn(r)===s;return this.processSegment(u,c,g,v,_?L:s,!0).pipe(q(C=>new yt(f,C instanceof yt?[C]:[])))}))):$i(n)))}getChildConfig(e,n,r){return n.children?N({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?N({routes:n._loadedRoutes,injector:n._loadedInjector}):AO(e,n,r,this.urlSerializer).pipe(Se(i=>i?this.configLoader.loadChildren(e,n).pipe(xe(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):xO(n))):N({routes:[],injector:e})}};function $O(t){t.sort((e,n)=>e.value.outlet===L?-1:n.value.outlet===L?1:e.value.outlet.localeCompare(n.value.outlet))}function HO(t){let e=t.value.routeConfig;return e&&e.path===""}function fD(t){let e=[],n=new Set;for(let r of t){if(!HO(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=fD(r.children);e.push(new yt(r.value,i))}return e.filter(r=>!n.has(r))}function qO(t){return t.data||{}}function zO(t){return t.resolve||{}}function GO(t,e,n,r,i,s){return Se(o=>jO(t,e,n,r,o.extractedUrl,i,s).pipe(q(({state:a,tree:c})=>ce(E({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function WO(t,e){return Se(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return N(n);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let u of pD(c))o.add(u);let a=0;return ve(o).pipe(gr(c=>s.has(c)?KO(c,r,t,e):(c.data=Vp(c,c.parent,t).resolve,N(void 0))),xe(()=>a++),Ii(1),Se(c=>a===o.size?N(n):dt))})}function pD(t){let e=t.children.map(n=>pD(n)).flat();return[t,...e]}function KO(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!oD(i)&&(s[yo]=i.title),QO(s,t,e,r).pipe(q(o=>(t._resolvedData=o,t.data=Vp(t,t.parent,n).resolve,null)))}function QO(t,e,n,r){let i=hp(t);if(i.length===0)return N({});let s={};return ve(i).pipe(Se(o=>YO(t[o],e,n,r).pipe(Gt(),xe(a=>{s[o]=a}))),Ii(1),Od(s),Bn(o=>dD(o)?dt:yi(o)))}function YO(t,e,n,r){let i=Io(e)??r,s=Yi(t,i),o=s.resolve?s.resolve(e,n):Cn(i,()=>s(e,n));return er(o)}function lp(t){return Dt(e=>{let n=t(e);return n?ve(n).pipe(q(()=>e)):N(e)})}var gD=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===L);return i}getResolvedTitleForRoute(r){return r.data[yo]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:()=>w(JO),providedIn:"root"});let t=e;return t})(),JO=(()=>{let e=class e extends gD{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(A(OE))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Eo=new b("",{providedIn:"root",factory:()=>({})}),Cu=new b(""),$p=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=w(iu)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return N(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=er(r.loadComponent()).pipe(q(mD),xe(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),Ps(()=>{this.componentLoaders.delete(r)})),s=new fi(i,()=>new Xe).pipe(hi());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return N({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=ZO(i,this.compiler,r,this.onLoadEndListener).pipe(Ps(()=>{this.childrenLoaders.delete(i)})),a=new fi(o,()=>new Xe).pipe(hi());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function ZO(t,e,n,r){return er(t.loadChildren()).pipe(q(mD),Se(i=>i instanceof qs||Array.isArray(i)?N(i):ve(e.compileModuleAsync(i))),q(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(Cu,[],{optional:!0,self:!0}).flat()),{routes:o.map(jp),injector:s}}))}function XO(t){return t&&typeof t=="object"&&"default"in t}function mD(t){return XO(t)?t.default:t}var Hp=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:()=>w(ek),providedIn:"root"});let t=e;return t})(),ek=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),yD=new b(""),vD=new b("");function tk(t,e,n){let r=t.get(vD),i=t.get(ut);return t.get(ne).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,Promise.resolve();let s,o=new Promise(u=>{s=u}),a=i.startViewTransition(()=>(s(),nk(t))),{onViewTransitionCreated:c}=r;return c&&Cn(t,()=>c({transition:a,from:e,to:n})),o})}function nk(t){return new Promise(e=>{Kc(e,{injector:t})})}var qp=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Xe,this.transitionAbortSubject=new Xe,this.configLoader=w($p),this.environmentInjector=w(ct),this.urlSerializer=w(vo),this.rootContexts=w(_o),this.location=w(Bi),this.inputBindingEnabled=w(bu,{optional:!0})!==null,this.titleStrategy=w(gD),this.options=w(Eo,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=w(Hp),this.createViewTransition=w(yD,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>N(void 0),this.rootComponentType=null;let r=s=>this.events.next(new Ip(s)),i=s=>this.events.next(new wp(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(ce(E(E({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new Be({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:oo,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Et(o=>o.id!==0),q(o=>ce(E({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Dt(o=>{let a=!1,c=!1;return N(o).pipe(Dt(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",vt.SupersededByNewNavigation),dt;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?ce(E({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=u.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!l&&d!=="reload"){let h="";return this.events.next(new Zn(u.id,this.urlSerializer.serialize(u.rawUrl),h,mu.IgnoredSameUrlNavigation)),u.resolve(null),dt}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return N(u).pipe(Dt(h=>{let f=this.transitions?.getValue();return this.events.next(new Ki(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?dt:Promise.resolve(h)}),GO(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),xe(h=>{o.targetSnapshot=h.targetSnapshot,o.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=ce(E({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new yu(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:h,extractedUrl:f,source:g,restoredState:v,extras:_}=u,C=new Ki(h,this.urlSerializer.serialize(f),g,v);this.events.next(C);let Y=iD(this.rootComponentType).snapshot;return this.currentTransition=o=ce(E({},u),{targetSnapshot:Y,urlAfterRedirects:f,extras:ce(E({},_),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,N(o)}else{let h="";return this.events.next(new Zn(u.id,this.urlSerializer.serialize(u.extractedUrl),h,mu.IgnoredByUrlHandlingStrategy)),u.resolve(null),dt}}),xe(u=>{let l=new mp(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),q(u=>(this.currentTransition=o=ce(E({},u),{guards:lO(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),IO(this.environmentInjector,u=>this.events.next(u)),xe(u=>{if(o.guardsResult=u.guardsResult,Wi(u.guardsResult))throw cD(this.urlSerializer,u.guardsResult);let l=new yp(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),Et(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",vt.GuardRejected),!1)),lp(u=>{if(u.guards.canActivateChecks.length)return N(u).pipe(xe(l=>{let d=new vp(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),Dt(l=>{let d=!1;return N(l).pipe(WO(this.paramsInheritanceStrategy,this.environmentInjector),xe({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",vt.NoDataFromResolver)}}))}),xe(l=>{let d=new _p(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),lp(u=>{let l=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(xe(f=>{d.component=f}),q(()=>{})));for(let f of d.children)h.push(...l(f));return h};return Ns(l(u.targetSnapshot.root)).pipe($n(null),_n(1))}),lp(()=>this.afterPreactivation()),Dt(()=>{let{currentSnapshot:u,targetSnapshot:l}=o,d=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return d?ve(d).pipe(q(()=>o)):N(o)}),q(u=>{let l=nO(r.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=ce(E({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),xe(()=>{this.events.next(new ho)}),uO(this.rootContexts,r.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),_n(1),xe({next:u=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Rn(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{a=!0}}),Ld(this.transitionAbortSubject.pipe(xe(u=>{throw u}))),Ps(()=>{!a&&!c&&this.cancelNavigationTransition(o,"",vt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Bn(u=>{if(c=!0,lD(u))this.events.next(new Jn(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),sO(u)?this.events.next(new fo(u.url)):o.resolve(!1);else{this.events.next(new lo(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0));try{o.resolve(r.errorHandler(u))}catch(l){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(l)}}return dt}))}))}cancelNavigationTransition(r,i,s){let o=new Jn(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function rk(t){return t!==oo}var ik=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:()=>w(sk),providedIn:"root"});let t=e;return t})(),Fp=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},sk=(()=>{let e=class e extends Fp{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Li(e)))(s||e)}})(),e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),_D=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:()=>w(ok),providedIn:"root"});let t=e;return t})(),ok=(()=>{let e=class e extends _D{constructor(){super(...arguments),this.location=w(Bi),this.urlSerializer=w(vo),this.options=w(Eo,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=w(Hp),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Yn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=iD(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Ki)this.stateMemento=this.createStateMemento();else if(r instanceof Zn)this.rawUrlTree=i.initialUrl;else if(r instanceof yu){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else r instanceof ho?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof Jn&&(r.code===vt.GuardRejected||r.code===vt.NoDataFromResolver)?this.restoreHistory(i):r instanceof lo?this.restoreHistory(i,!0):r instanceof Rn&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=E(E({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=E(E({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Li(e)))(s||e)}})(),e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),io=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(io||{});function ID(t,e){t.events.pipe(Et(n=>n instanceof Rn||n instanceof Jn||n instanceof lo||n instanceof Zn),q(n=>n instanceof Rn||n instanceof Zn?io.COMPLETE:(n instanceof Jn?n.code===vt.Redirect||n.code===vt.SupersededByNewNavigation:!1)?io.REDIRECTING:io.FAILED),Et(n=>n!==io.REDIRECTING),_n(1)).subscribe(()=>{e()})}function ak(t){throw t}var ck={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},uk={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Mn=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=w(eu),this.stateManager=w(_D),this.options=w(Eo,{optional:!0})||{},this.pendingTasks=w(Yc),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=w(qp),this.urlSerializer=w(vo),this.location=w(Bi),this.urlHandlingStrategy=w(Hp),this._events=new Xe,this.errorHandler=this.options.errorHandler||ak,this.navigated=!1,this.routeReuseStrategy=w(ik),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=w(Cu,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!w(bu,{optional:!0}),this.eventsSubscription=new Ce,this.isNgZoneEnabled=w(ne)instanceof ne&&ne.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Jn&&i.code!==vt.Redirect&&i.code!==vt.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Rn)this.navigated=!0;else if(i instanceof fo){let a=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),c={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||rk(s.source)};this.scheduleNavigation(a,oo,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}dk(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),oo,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let u=E({},s);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(jp),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:u}=i,l=u?this.currentUrlTree.fragment:a,d=null;switch(c){case"merge":d=E(E({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let f=s?s.snapshot:this.routerState.snapshot.root;h=eD(f)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),h=this.currentUrlTree.root}return tD(h,r,d,l??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=Wi(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,oo,null,i)}navigate(r,i={skipLocationChange:!1}){return lk(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=E({},ck):i===!1?s=E({},uk):s=i,Wi(r))return FE(this.currentUrlTree,r,s);let o=this.parseUrl(r);return FE(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let c,u,l;a?(c=a.resolve,u=a.reject,l=a.promise):l=new Promise((h,f)=>{c=h,u=f});let d=this.pendingTasks.add();return ID(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:c,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(h=>Promise.reject(h))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function lk(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new T(4008,!1)}function dk(t){return!(t instanceof ho)&&!(t instanceof fo)}var Tu=class{};var hk=(()=>{let e=class e{constructor(r,i,s,o,a){this.router=r,this.injector=s,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Et(r=>r instanceof Rn),gr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let s=[];for(let o of i){o.providers&&!o._injector&&(o._injector=Qc(o.providers,r,`Route: ${o.path}`));let a=o._injector??r,c=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(c,o.children??o._loadedRoutes))}return ve(s).pipe(vi())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let s;i.loadChildren&&i.canLoad===void 0?s=this.loader.loadChildren(r,i):s=N(null);let o=s.pipe(Se(a=>a===null?N(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return ve([o,a]).pipe(vi())}else return o})}};e.\u0275fac=function(i){return new(i||e)(A(Mn),A(iu),A(ct),A(Tu),A($p))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),wD=new b(""),fk=(()=>{let e=class e{constructor(r,i,s,o,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=s,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=w(ct),a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof Ki?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof Rn?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof Zn&&r.code===mu.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof vu&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>p(this,null,function*(){yield new Promise(s=>{setTimeout(()=>{s()}),Kc(()=>{s()},{injector:this.environmentInjector})}),this.zone.run(()=>{this.transitions.events.next(new vu(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){Dw()},e.\u0275prov=S({token:e,factory:e.\u0275fac});let t=e;return t})();function pk(t){return t.routerState.root}function Do(t,e){return{\u0275kind:t,\u0275providers:e}}function gk(){let t=w(nt);return e=>{let n=t.get(ji);if(e!==n.components[0])return;let r=t.get(Mn),i=t.get(ED);t.get(zp)===1&&r.initialNavigation(),t.get(DD,null,B.Optional)?.setUpPreloading(),t.get(wD,null,B.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var ED=new b("",{factory:()=>new Xe}),zp=new b("",{providedIn:"root",factory:()=>1});function mk(){return Do(2,[{provide:zp,useValue:0},{provide:ru,multi:!0,deps:[nt],useFactory:e=>{let n=e.get(mE,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(Mn),s=e.get(ED);ID(i,()=>{r(!0)}),e.get(qp).afterPreactivation=()=>(r(!0),s.closed?N(void 0):s),i.initialNavigation()}))}}])}function yk(){return Do(3,[{provide:ru,multi:!0,useFactory:()=>{let e=w(Mn);return()=>{e.setUpLocationChangeListener()}}},{provide:zp,useValue:2}])}var DD=new b("");function vk(t){return Do(0,[{provide:DD,useExisting:hk},{provide:Tu,useExisting:t}])}function _k(){return Do(8,[jE,{provide:bu,useExisting:jE}])}function Ik(t){let e=[{provide:yD,useValue:tk},{provide:vD,useValue:E({skipNextTransition:!!t?.skipInitialTransition},t)}];return Do(9,e)}var $E=new b("ROUTER_FORROOT_GUARD"),wk=[Bi,{provide:vo,useClass:co},Mn,_o,{provide:Xn,useFactory:pk,deps:[Mn]},$p,[]],Gp=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[wk,[],{provide:Cu,multi:!0,useValue:r},{provide:$E,useFactory:Tk,deps:[[Mn,new bt,new Jh]]},{provide:Eo,useValue:i||{}},i?.useHash?Dk():Ck(),Ek(),i?.preloadingStrategy?vk(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?bk(i):[],i?.bindToComponentInputs?_k().\u0275providers:[],i?.enableViewTransitions?Ik().\u0275providers:[],Sk()]}}static forChild(r){return{ngModule:e,providers:[{provide:Cu,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(A($E,8))},e.\u0275mod=Oe({type:e}),e.\u0275inj=Pe({});let t=e;return t})();function Ek(){return{provide:wD,useFactory:()=>{let t=w(CE),e=w(ne),n=w(Eo),r=w(qp),i=w(vo);return n.scrollOffset&&t.setOffset(n.scrollOffset),new fk(i,r,t,e,n)}}}function Dk(){return{provide:kr,useClass:vE}}function Ck(){return{provide:kr,useClass:Yf}}function Tk(t){return"guarded"}function bk(t){return[t.initialNavigation==="disabled"?yk().\u0275providers:[],t.initialNavigation==="enabledBlocking"?mk().\u0275providers:[]]}var HE=new b("");function Sk(){return[{provide:HE,useFactory:gk},{provide:Uf,multi:!0,useExisting:HE}]}var bD=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Ak=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},SD={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,l=s>>2,d=(s&3)<<4|a>>4,h=(a&15)<<2|u>>6,f=u&63;c||(f=64,o||(h=64)),r.push(n[l],n[d],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(bD(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Ak(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let u=i<t.length?n[t.charAt(i)]:64;++i;let d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||d==null)throw new Kp;let h=s<<2|a>>4;if(r.push(h),u!==64){let f=a<<4&240|u>>2;if(r.push(f),d!==64){let g=u<<6&192|d;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Kp=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Rk=function(t){let e=bD(t);return SD.encodeByteArray(e,!0)},Co=function(t){return Rk(t).replace(/\./g,"")},Yp=function(t){try{return SD.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Mk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var xk=()=>Mk().__FIREBASE_DEFAULTS__,Nk=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Pk=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Yp(t[1]);return e&&JSON.parse(e)},Ru=()=>{try{return xk()||Nk()||Pk()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},AD=t=>{var e,n;return(n=(e=Ru())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},RD=t=>{let e=AD(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Jp=()=>{var t;return(t=Ru())===null||t===void 0?void 0:t.config},MD=t=>{var e;return(e=Ru())===null||e===void 0?void 0:e[`_${t}`]};var Au=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function xD(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Co(JSON.stringify(n)),Co(JSON.stringify(o)),""].join(".")}function _t(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ND(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_t())}function Ok(){var t;let e=(t=Ru())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function PD(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function OD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function kD(){return!Ok()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Zp(){try{return typeof indexedDB=="object"}catch{return!1}}function FD(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var kk="FirebaseError",Mt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=kk,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xn.prototype.create)}},xn=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?Fk(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Mt(i,a,r)}};function Fk(t,e){return t.replace(Vk,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var Vk=/\{\$([^}]+)}/g;function Ji(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(TD(s)&&TD(o)){if(!Ji(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function TD(t){return t!==null&&typeof t=="object"}function Xp(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function VD(t,e){let n=new Qp(t,e);return n.subscribe.bind(n)}var Qp=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Lk(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Wp),i.error===void 0&&(i.error=Wp),i.complete===void 0&&(i.complete=Wp);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Lk(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Wp(){}var s3=4*60*60*1e3;function sn(t){return t&&t._delegate?t._delegate:t}var xt=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Lr="[DEFAULT]";var eg=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Au;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(jk(e))try{this.getOrInitializeService({instanceIdentifier:Lr})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Lr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return p(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Lr){return this.instances.has(e)}getOptions(e=Lr){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Uk(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Lr){return this.component?this.component.multipleInstances?e:Lr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Uk(t){return t===Lr?void 0:t}function jk(t){return t.instantiationMode==="EAGER"}var Mu=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new eg(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var Bk=[],z=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(z||{}),$k={debug:z.DEBUG,verbose:z.VERBOSE,info:z.INFO,warn:z.WARN,error:z.ERROR,silent:z.SILENT},Hk=z.INFO,qk={[z.DEBUG]:"log",[z.VERBOSE]:"log",[z.INFO]:"info",[z.WARN]:"warn",[z.ERROR]:"error"},zk=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=qk[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},tr=class{constructor(e){this.name=e,this._logLevel=Hk,this._logHandler=zk,this._userLogHandler=null,Bk.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in z))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?$k[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,z.DEBUG,...e),this._logHandler(this,z.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,z.VERBOSE,...e),this._logHandler(this,z.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,z.INFO,...e),this._logHandler(this,z.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,z.WARN,...e),this._logHandler(this,z.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,z.ERROR,...e),this._logHandler(this,z.ERROR,...e)}};var Gk=(t,e)=>e.some(n=>t instanceof n),LD,UD;function Wk(){return LD||(LD=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Kk(){return UD||(UD=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var jD=new WeakMap,ng=new WeakMap,BD=new WeakMap,tg=new WeakMap,ig=new WeakMap;function Qk(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(on(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&jD.set(n,t)}).catch(()=>{}),ig.set(e,t),e}function Yk(t){if(ng.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});ng.set(t,e)}var rg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ng.get(t);if(e==="objectStoreNames")return t.objectStoreNames||BD.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return on(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function $D(t){rg=t(rg)}function Jk(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(xu(this),e,...n);return BD.set(r,e.sort?e.sort():[e]),on(r)}:Kk().includes(t)?function(...e){return t.apply(xu(this),e),on(jD.get(this))}:function(...e){return on(t.apply(xu(this),e))}}function Zk(t){return typeof t=="function"?Jk(t):(t instanceof IDBTransaction&&Yk(t),Gk(t,Wk())?new Proxy(t,rg):t)}function on(t){if(t instanceof IDBRequest)return Qk(t);if(tg.has(t))return tg.get(t);let e=Zk(t);return e!==t&&(tg.set(t,e),ig.set(e,t)),e}var xu=t=>ig.get(t);function qD(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=on(o);return r&&o.addEventListener("upgradeneeded",c=>{r(on(o.result),c.oldVersion,c.newVersion,on(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}var Xk=["get","getKey","getAll","getAllKeys","count"],e1=["put","add","delete","clear"],sg=new Map;function HD(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(sg.get(e))return sg.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=e1.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Xk.includes(n)))return;let s=function(o,...a){return p(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),u=c.store;return r&&(u=u.index(a.shift())),(yield Promise.all([u[n](...a),i&&c.done]))[0]})};return sg.set(e,s),s}$D(t=>ce(E({},t),{get:(e,n,r)=>HD(e,n)||t.get(e,n,r),has:(e,n)=>!!HD(e,n)||t.has(e,n)}));var ag=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(t1(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function t1(t){let e=t.getComponent();return e?.type==="VERSION"}var cg="@firebase/app",zD="0.10.2";var Ur=new tr("@firebase/app"),n1="@firebase/app-compat",r1="@firebase/analytics-compat",i1="@firebase/analytics",s1="@firebase/app-check-compat",o1="@firebase/app-check",a1="@firebase/auth",c1="@firebase/auth-compat",u1="@firebase/database",l1="@firebase/database-compat",d1="@firebase/functions",h1="@firebase/functions-compat",f1="@firebase/installations",p1="@firebase/installations-compat",g1="@firebase/messaging",m1="@firebase/messaging-compat",y1="@firebase/performance",v1="@firebase/performance-compat",_1="@firebase/remote-config",I1="@firebase/remote-config-compat",w1="@firebase/storage",E1="@firebase/storage-compat",D1="@firebase/firestore",C1="@firebase/firestore-compat",T1="firebase",b1="10.11.1";var ug="[DEFAULT]",S1={[cg]:"fire-core",[n1]:"fire-core-compat",[i1]:"fire-analytics",[r1]:"fire-analytics-compat",[o1]:"fire-app-check",[s1]:"fire-app-check-compat",[a1]:"fire-auth",[c1]:"fire-auth-compat",[u1]:"fire-rtdb",[l1]:"fire-rtdb-compat",[d1]:"fire-fn",[h1]:"fire-fn-compat",[f1]:"fire-iid",[p1]:"fire-iid-compat",[g1]:"fire-fcm",[m1]:"fire-fcm-compat",[y1]:"fire-perf",[v1]:"fire-perf-compat",[_1]:"fire-rc",[I1]:"fire-rc-compat",[w1]:"fire-gcs",[E1]:"fire-gcs-compat",[D1]:"fire-fst",[C1]:"fire-fst-compat","fire-js":"fire-js",[T1]:"fire-js-all"};var To=new Map,A1=new Map,lg=new Map;function GD(t,e){try{t.container.addComponent(e)}catch(n){Ur.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function rr(t){let e=t.name;if(lg.has(e))return Ur.debug(`There were multiple attempts to register component ${e}.`),!1;lg.set(e,t);for(let n of To.values())GD(n,t);for(let n of A1.values())GD(n,t);return!0}function pg(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Zi(t){return t.settings!==void 0}var R1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},nr=new xn("app","Firebase",R1);var dg=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new xt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw nr.create("app-deleted",{appName:this._name})}};var Xi=b1;function gg(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:ug,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw nr.create("bad-app-name",{appName:String(i)});if(n||(n=Jp()),!n)throw nr.create("no-options");let s=To.get(i);if(s){if(Ji(n,s.options)&&Ji(r,s.config))return s;throw nr.create("duplicate-app",{appName:i})}let o=new Mu(i);for(let c of lg.values())o.addComponent(c);let a=new dg(n,r,o);return To.set(i,a),a}function So(t=ug){let e=To.get(t);if(!e&&t===ug&&Jp())return gg();if(!e)throw nr.create("no-app",{appName:t});return e}function Nu(){return Array.from(To.values())}function Fe(t,e,n){var r;let i=(r=S1[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ur.warn(a.join(" "));return}rr(new xt(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var M1="firebase-heartbeat-database",x1=1,bo="firebase-heartbeat-store",og=null;function YD(){return og||(og=qD(M1,x1,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(bo)}catch(n){console.warn(n)}}}}).catch(t=>{throw nr.create("idb-open",{originalErrorMessage:t.message})})),og}function N1(t){return p(this,null,function*(){try{let n=(yield YD()).transaction(bo),r=yield n.objectStore(bo).get(JD(t));return yield n.done,r}catch(e){if(e instanceof Mt)Ur.warn(e.message);else{let n=nr.create("idb-get",{originalErrorMessage:e?.message});Ur.warn(n.message)}}})}function WD(t,e){return p(this,null,function*(){try{let r=(yield YD()).transaction(bo,"readwrite");yield r.objectStore(bo).put(e,JD(t)),yield r.done}catch(n){if(n instanceof Mt)Ur.warn(n.message);else{let r=nr.create("idb-set",{originalErrorMessage:n?.message});Ur.warn(r.message)}}})}function JD(t){return`${t.name}!${t.options.appId}`}var P1=1024,O1=30*24*60*60*1e3,hg=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new fg(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return p(this,null,function*(){var e,n;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=KD();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=O1}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return p(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=KD(),{heartbeatsToSend:r,unsentEntries:i}=k1(this._heartbeatsCache.heartbeats),s=Co(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function KD(){return new Date().toISOString().substring(0,10)}function k1(t,e=P1){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),QD(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),QD(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var fg=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return p(this,null,function*(){return Zp()?FD().then(()=>!0).catch(()=>!1):!1})}read(){return p(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield N1(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return p(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return WD(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return p(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return WD(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function QD(t){return Co(JSON.stringify({version:2,heartbeats:t})).length}function F1(t){rr(new xt("platform-logger",e=>new ag(e),"PRIVATE")),rr(new xt("heartbeat",e=>new hg(e),"PRIVATE")),Fe(cg,zD,t),Fe(cg,zD,"esm2017"),Fe("fire-js","")}F1("");var V1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},$t={},I,Vg=Vg||{},O=V1||self;function Gu(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Bo(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function L1(t){return Object.prototype.hasOwnProperty.call(t,mg)&&t[mg]||(t[mg]=++U1)}var mg="closure_uid_"+(1e9*Math.random()>>>0),U1=0;function j1(t,e,n){return t.call.apply(t.bind,arguments)}function B1(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Qe(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Qe=j1:Qe=B1,Qe.apply(null,arguments)}function Pu(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Le(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function ir(){this.s=this.s,this.o=this.o}var $1=0;ir.prototype.s=!1;ir.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),$1!=0)&&L1(this)};ir.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var lC=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Lg(t){let e=t.length;if(0<e){let n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function ZD(t,e){for(let n=1;n<arguments.length;n++){let r=arguments[n];if(Gu(r)){let i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function Ye(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Ye.prototype.h=function(){this.defaultPrevented=!0};var H1=function(){if(!O.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let n=()=>{};O.addEventListener("test",n,e),O.removeEventListener("test",n,e)}catch{}return t}();function Po(t){return/^[\s\xa0]*$/.test(t)}function Wu(){var t=O.navigator;return t&&(t=t.userAgent)?t:""}function an(t){return Wu().indexOf(t)!=-1}function Ug(t){return Ug[" "](t),t}Ug[" "]=function(){};function q1(t,e){var n=NF;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var z1=an("Opera"),rs=an("Trident")||an("MSIE"),dC=an("Edge"),wg=dC||rs,hC=an("Gecko")&&!(Wu().toLowerCase().indexOf("webkit")!=-1&&!an("Edge"))&&!(an("Trident")||an("MSIE"))&&!an("Edge"),G1=Wu().toLowerCase().indexOf("webkit")!=-1&&!an("Edge");function fC(){var t=O.document;return t?t.documentMode:void 0}var Eg;e:{if(Ou="",ku=function(){var t=Wu();if(hC)return/rv:([^\);]+)(\)|;)/.exec(t);if(dC)return/Edge\/([\d\.]+)/.exec(t);if(rs)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(G1)return/WebKit\/(\S+)/.exec(t);if(z1)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),ku&&(Ou=ku?ku[1]:""),rs&&(Fu=fC(),Fu!=null&&Fu>parseFloat(Ou))){Eg=String(Fu);break e}Eg=Ou}var Ou,ku,Fu,Dg;O.document&&rs?(yg=fC(),Dg=yg||parseInt(Eg,10)||void 0):Dg=void 0;var yg,W1=Dg;function Oo(t,e){if(Ye.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(hC){e:{try{Ug(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:K1[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Oo.$.h.call(this)}}Le(Oo,Ye);var K1={2:"touch",3:"pen",4:"mouse"};Oo.prototype.h=function(){Oo.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var $o="closure_listenable_"+(1e6*Math.random()|0),Q1=0;function Y1(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++Q1,this.fa=this.ia=!1}function Ku(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function jg(t,e,n){for(let r in t)e.call(n,t[r],r,t)}function J1(t,e){for(let n in t)e.call(void 0,t[n],n,t)}function pC(t){let e={};for(let n in t)e[n]=t[n];return e}var XD="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function gC(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<XD.length;s++)n=XD[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Qu(t){this.src=t,this.g={},this.h=0}Qu.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=Tg(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new Y1(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function Cg(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=lC(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Ku(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Tg(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var Bg="closure_lm_"+(1e6*Math.random()|0),vg={};function mC(t,e,n,r,i){if(r&&r.once)return vC(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)mC(t,e[s],n,r,i);return null}return n=qg(n),t&&t[$o]?t.O(e,n,Bo(r)?!!r.capture:!!r,i):yC(t,e,n,!1,r,i)}function yC(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=Bo(i)?!!i.capture:!!i,a=Hg(t);if(a||(t[Bg]=a=new Qu(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=Z1(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)H1||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(IC(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function Z1(){function t(n){return e.call(t.src,t.listener,n)}let e=X1;return t}function vC(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)vC(t,e[s],n,r,i);return null}return n=qg(n),t&&t[$o]?t.P(e,n,Bo(r)?!!r.capture:!!r,i):yC(t,e,n,!0,r,i)}function _C(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)_C(t,e[s],n,r,i);else r=Bo(r)?!!r.capture:!!r,n=qg(n),t&&t[$o]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=Tg(s,n,r,i),-1<n&&(Ku(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=Hg(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Tg(e,n,r,i)),(n=-1<t?e[t]:null)&&$g(n))}function $g(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[$o])Cg(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(IC(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Hg(e))?(Cg(n,t),n.h==0&&(n.src=null,e[Bg]=null)):Ku(t)}}}function IC(t){return t in vg?vg[t]:vg[t]="on"+t}function X1(t,e){if(t.fa)t=!0;else{e=new Oo(e,this);var n=t.listener,r=t.la||t.src;t.ia&&$g(t),t=n.call(r,e)}return t}function Hg(t){return t=t[Bg],t instanceof Qu?t:null}var _g="__closure_events_fn_"+(1e9*Math.random()>>>0);function qg(t){return typeof t=="function"?t:(t[_g]||(t[_g]=function(e){return t.handleEvent(e)}),t[_g])}function Ve(){ir.call(this),this.i=new Qu(this),this.S=this,this.J=null}Le(Ve,ir);Ve.prototype[$o]=!0;Ve.prototype.removeEventListener=function(t,e,n,r){_C(this,t,e,n,r)};function Ge(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Ye(e,t);else if(e instanceof Ye)e.target=e.target||t;else{var i=e;e=new Ye(r,t),gC(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=Vu(o,r,!0,e)&&i}if(o=e.g=t,i=Vu(o,r,!0,e)&&i,i=Vu(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=Vu(o,r,!1,e)&&i}Ve.prototype.N=function(){if(Ve.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Ku(n[r]);delete t.g[e],t.h--}}this.J=null};Ve.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};Ve.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Vu(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&Cg(t.i,o),i=a.call(c,r)!==!1&&i}}return i&&!r.defaultPrevented}var zg=O.JSON.stringify,bg=class{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function eF(){var t=Gg;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Sg=class{constructor(){this.h=this.g=null}add(e,n){let r=wC.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},wC=new bg(()=>new Ag,t=>t.reset()),Ag=class{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function tF(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function nF(t){O.setTimeout(()=>{throw t},0)}var ko,Fo=!1,Gg=new Sg,EC=()=>{let t=O.Promise.resolve(void 0);ko=()=>{t.then(rF)}},rF=()=>{for(var t;t=eF();){try{t.h.call(t.g)}catch(n){nF(n)}var e=wC;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Fo=!1};function Yu(t,e){Ve.call(this),this.h=t||1,this.g=e||O,this.j=Qe(this.qb,this),this.l=Date.now()}Le(Yu,Ve);I=Yu.prototype;I.ga=!1;I.T=null;I.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ge(this,"tick"),this.ga&&(Wg(this),this.start()))}};I.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Wg(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}I.N=function(){Yu.$.N.call(this),Wg(this),delete this.g};function Kg(t,e,n){if(typeof t=="function")n&&(t=Qe(t,n));else if(t&&typeof t.handleEvent=="function")t=Qe(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:O.setTimeout(t,e||0)}function DC(t){t.g=Kg(()=>{t.g=null,t.i&&(t.i=!1,DC(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}var Rg=class extends ir{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:DC(this)}N(){super.N(),this.g&&(O.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function Vo(t){ir.call(this),this.h=t,this.g={}}Le(Vo,ir);var eC=[];function CC(t,e,n,r){Array.isArray(n)||(n&&(eC[0]=n.toString()),n=eC);for(var i=0;i<n.length;i++){var s=mC(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function TC(t){jg(t.g,function(e,n){this.g.hasOwnProperty(n)&&$g(e)},t),t.g={}}Vo.prototype.N=function(){Vo.$.N.call(this),TC(this)};Vo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Ju(){this.g=!0}Ju.prototype.Ea=function(){this.g=!1};function iF(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var l=u[0];u=u[1];var d=l.split("_");o=2<=d.length&&d[1]=="type"?o+(l+"="+u+"&"):o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function sF(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function ts(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+aF(t,n)+(r?" "+r:"")})}function oF(t,e){t.info(function(){return"TIMEOUT: "+e})}Ju.prototype.info=function(){};function aF(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return zg(n)}catch{return e}}var Hr={},tC=null;function Zu(){return tC=tC||new Ve}Hr.Ta="serverreachability";function bC(t){Ye.call(this,Hr.Ta,t)}Le(bC,Ye);function Lo(t){let e=Zu();Ge(e,new bC(e))}Hr.STAT_EVENT="statevent";function SC(t,e){Ye.call(this,Hr.STAT_EVENT,t),this.stat=e}Le(SC,Ye);function it(t){let e=Zu();Ge(e,new SC(e,t))}Hr.Ua="timingevent";function AC(t,e){Ye.call(this,Hr.Ua,t),this.size=e}Le(AC,Ye);function Ho(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return O.setTimeout(function(){t()},e)}var Xu={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},RC={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Qg(){}Qg.prototype.h=null;function nC(t){return t.h||(t.h=t.i())}function MC(){}var qo={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Yg(){Ye.call(this,"d")}Le(Yg,Ye);function Jg(){Ye.call(this,"c")}Le(Jg,Ye);var Mg;function el(){}Le(el,Qg);el.prototype.g=function(){return new XMLHttpRequest};el.prototype.i=function(){return{}};Mg=new el;function zo(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Vo(this),this.P=cF,t=wg?125:void 0,this.V=new Yu(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new xC}function xC(){this.i=null,this.g="",this.h=!1}var cF=45e3,NC={},xg={};I=zo.prototype;I.setTimeout=function(t){this.P=t};function Ng(t,e,n){t.L=1,t.A=nl(Pn(e)),t.u=n,t.S=!0,PC(t,null)}function PC(t,e){t.G=Date.now(),Go(t),t.B=Pn(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),BC(n.i,"t",r),t.o=0,n=t.l.J,t.h=new xC,t.g=cT(t.l,n?e:null,!t.u),0<t.O&&(t.M=new Rg(Qe(t.Pa,t,t.g),t.O)),CC(t.U,t.g,"readystatechange",t.nb),e=t.I?pC(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),Lo(),iF(t.j,t.v,t.B,t.m,t.W,t.u)}I.nb=function(t){t=t.target;let e=this.M;e&&cn(t)==3?e.l():this.Pa(t)};I.Pa=function(t){try{if(t==this.g)e:{let l=cn(this.g);var e=this.g.Ia();let d=this.g.da();if(!(3>l)&&(l!=3||wg||this.g&&(this.h.h||this.g.ja()||oC(this.g)))){this.J||l!=4||e==7||(e==8||0>=d?Lo(3):Lo(2)),tl(this);var n=this.g.da();this.ca=n;t:if(OC(this)){var r=oC(this.g);t="";var i=r.length,s=cn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){jr(this),No(this);var o="";break t}this.h.i=new O.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,sF(this.j,this.v,this.B,this.m,this.W,l,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Po(a)){var u=a;break t}}u=null}if(n=u)ts(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Pg(this,n);else{this.i=!1,this.s=3,it(12),jr(this),No(this);break e}}this.S?(kC(this,l,o),wg&&this.i&&l==3&&(CC(this.U,this.V,"tick",this.mb),this.V.start())):(ts(this.j,this.m,o,null),Pg(this,o)),l==4&&jr(this),this.i&&!this.J&&(l==4?iT(this.l,this):(this.i=!1,Go(this)))}else RF(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,it(12)):(this.s=0,it(13)),jr(this),No(this)}}}catch{}finally{}};function OC(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function kC(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=uF(t,n),i==xg){e==4&&(t.s=4,it(14),r=!1),ts(t.j,t.m,null,"[Incomplete Response]");break}else if(i==NC){t.s=4,it(15),ts(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else ts(t.j,t.m,i,null),Pg(t,i);OC(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,it(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),rm(e),e.M=!0,it(11))):(ts(t.j,t.m,n,"[Invalid Chunked Response]"),jr(t),No(t))}I.mb=function(){if(this.g){var t=cn(this.g),e=this.g.ja();this.o<e.length&&(tl(this),kC(this,t,e),this.i&&t!=4&&Go(this))}};function uF(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?xg:(n=Number(e.substring(n,r)),isNaN(n)?NC:(r+=1,r+n>e.length?xg:(e=e.slice(r,r+n),t.o=r+n,e)))}I.cancel=function(){this.J=!0,jr(this)};function Go(t){t.Y=Date.now()+t.P,FC(t,t.P)}function FC(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=Ho(Qe(t.lb,t),e)}function tl(t){t.C&&(O.clearTimeout(t.C),t.C=null)}I.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?(oF(this.j,this.B),this.L!=2&&(Lo(),it(17)),jr(this),this.s=2,No(this)):FC(this,this.Y-t)};function No(t){t.l.H==0||t.J||iT(t.l,t)}function jr(t){tl(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Wg(t.V),TC(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Pg(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||Og(n.i,t))){if(!t.K&&Og(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)$u(n),sl(n);else break e;nm(n),it(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=Ho(Qe(n.ib,n),6e3));if(1>=qC(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Br(n,11)}else if((t.K||n.g==t)&&$u(n),!Po(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(n.V=u[0],u=u[1],n.H==2)if(u[0]=="c"){n.K=u[1],n.pa=u[2];let l=u[3];l!=null&&(n.ra=l,n.l.info("VER="+n.ra));let d=u[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));let h=u[5];h!=null&&typeof h=="number"&&0<h&&(r=1.5*h,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;let f=t.g;if(f){let g=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(g){var s=r.i;s.g||g.indexOf("spdy")==-1&&g.indexOf("quic")==-1&&g.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(Zg(s,s.h),s.h=null))}if(r.F){let v=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;v&&(r.Da=v,me(r.I,r.F,v))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=aT(r,r.J?r.pa:null,r.Y),o.K){zC(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.C&&(tl(a),Go(a)),r.g=o}else nT(r);0<n.j.length&&ol(n)}else u[0]!="stop"&&u[0]!="close"||Br(n,7);else n.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?Br(n,7):tm(n):u[0]!="noop"&&n.h&&n.h.Aa(u),n.A=0)}}Lo(4)}catch{}}function lF(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Gu(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function dF(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Gu(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(let r in t)e[n++]=r;return e}}}function VC(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Gu(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=dF(t),r=lF(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var LC=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hF(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function $r(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof $r){this.h=t.h,ju(this,t.j),this.s=t.s,this.g=t.g,Bu(this,t.m),this.l=t.l;var e=t.i,n=new Uo;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),rC(this,n),this.o=t.o}else t&&(e=String(t).match(LC))?(this.h=!1,ju(this,e[1]||"",!0),this.s=Mo(e[2]||""),this.g=Mo(e[3]||"",!0),Bu(this,e[4]),this.l=Mo(e[5]||"",!0),rC(this,e[6]||"",!0),this.o=Mo(e[7]||"")):(this.h=!1,this.i=new Uo(null,this.h))}$r.prototype.toString=function(){var t=[],e=this.j;e&&t.push(xo(e,iC,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(xo(e,iC,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(xo(n,n.charAt(0)=="/"?gF:pF,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",xo(n,yF)),t.join("")};function Pn(t){return new $r(t)}function ju(t,e,n){t.j=n?Mo(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Bu(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function rC(t,e,n){e instanceof Uo?(t.i=e,vF(t.i,t.h)):(n||(e=xo(e,mF)),t.i=new Uo(e,t.h))}function me(t,e,n){t.i.set(e,n)}function nl(t){return me(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Mo(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function xo(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,fF),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function fF(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var iC=/[#\/\?@]/g,pF=/[#\?:]/g,gF=/[#\?]/g,mF=/[#\?@]/g,yF=/#/g;function Uo(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function sr(t){t.g||(t.g=new Map,t.h=0,t.i&&hF(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}I=Uo.prototype;I.add=function(t,e){sr(this),this.i=null,t=is(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function UC(t,e){sr(t),e=is(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function jC(t,e){return sr(t),e=is(t,e),t.g.has(e)}I.forEach=function(t,e){sr(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};I.ta=function(){sr(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){let i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};I.Z=function(t){sr(this);let e=[];if(typeof t=="string")jC(this,t)&&(e=e.concat(this.g.get(is(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};I.set=function(t,e){return sr(this),this.i=null,t=is(this,t),jC(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};I.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function BC(t,e,n){UC(t,e),0<n.length&&(t.i=null,t.g.set(is(t,e),Lg(n)),t.h+=n.length)}I.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];let s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function is(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function vF(t,e){e&&!t.j&&(sr(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(UC(this,r),BC(this,i,n))},t)),t.j=e}var _F=class{constructor(t,e){this.g=t,this.map=e}};function $C(t){this.l=t||IF,O.PerformanceNavigationTiming?(t=O.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(O.g&&O.g.Ka&&O.g.Ka()&&O.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var IF=10;function HC(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function qC(t){return t.h?1:t.g?t.g.size:0}function Og(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Zg(t,e){t.g?t.g.add(e):t.h=e}function zC(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}$C.prototype.cancel=function(){if(this.i=GC(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function GC(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return Lg(t.i)}var wF=class{stringify(t){return O.JSON.stringify(t,void 0)}parse(t){return O.JSON.parse(t,void 0)}};function EF(){this.g=new wF}function DF(t,e,n){let r=n||"";try{VC(t,function(i,s){let o=i;Bo(i)&&(o=zg(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function CF(t,e){let n=new Ju;if(O.Image){let r=new Image;r.onload=Pu(Lu,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Pu(Lu,n,r,"TestLoadImage: error",!1,e),r.onabort=Pu(Lu,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Pu(Lu,n,r,"TestLoadImage: timeout",!1,e),O.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Lu(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Wo(t){this.l=t.ec||null,this.j=t.ob||!1}Le(Wo,Qg);Wo.prototype.g=function(){return new rl(this.l,this.j)};Wo.prototype.i=function(t){return function(){return t}}({});function rl(t,e){Ve.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Xg,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Le(rl,Ve);var Xg=0;I=rl.prototype;I.open=function(t,e){if(this.readyState!=Xg)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,jo(this)};I.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||O).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};I.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ko(this)),this.readyState=Xg};I.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,jo(this)),this.g&&(this.readyState=3,jo(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof O.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;WC(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function WC(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}I.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Ko(this):jo(this),this.readyState==3&&WC(this)}};I.Za=function(t){this.g&&(this.response=this.responseText=t,Ko(this))};I.Ya=function(t){this.g&&(this.response=t,Ko(this))};I.ka=function(){this.g&&Ko(this)};function Ko(t){t.readyState=4,t.l=null,t.j=null,t.A=null,jo(t)}I.setRequestHeader=function(t,e){this.v.append(t,e)};I.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};I.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function jo(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(rl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var TF=O.JSON.parse;function we(t){Ve.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=KC,this.L=this.M=!1}Le(we,Ve);var KC="",bF=/^https?$/i,SF=["POST","PUT"];I=we.prototype;I.Oa=function(t){this.M=t};I.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Mg.g(),this.C=this.u?nC(this.u):nC(Mg),this.g.onreadystatechange=Qe(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){sC(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(let s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=O.FormData&&t instanceof O.FormData,!(0<=lC(SF,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{JC(this),0<this.B&&((this.L=AF(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Qe(this.ua,this)):this.A=Kg(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){sC(this,s)}};function AF(t){return rs&&typeof t.timeout=="number"&&t.ontimeout!==void 0}I.ua=function(){typeof Vg<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ge(this,"timeout"),this.abort(8))};function sC(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,QC(t),il(t)}function QC(t){t.F||(t.F=!0,Ge(t,"complete"),Ge(t,"error"))}I.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Ge(this,"complete"),Ge(this,"abort"),il(this))};I.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),il(this,!0)),we.$.N.call(this)};I.La=function(){this.s||(this.G||this.v||this.l?YC(this):this.kb())};I.kb=function(){YC(this)};function YC(t){if(t.h&&typeof Vg<"u"&&(!t.C[1]||cn(t)!=4||t.da()!=2)){if(t.v&&cn(t)==4)Kg(t.La,0,t);else if(Ge(t,"readystatechange"),cn(t)==4){t.h=!1;try{let o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(LC)[1]||null;!i&&O.self&&O.self.location&&(i=O.self.location.protocol.slice(0,-1)),r=!bF.test(i?i.toLowerCase():"")}n=r}if(n)Ge(t,"complete"),Ge(t,"success");else{t.m=6;try{var s=2<cn(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",QC(t)}}finally{il(t)}}}}function il(t,e){if(t.g){JC(t);let n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Ge(t,"ready");try{n.onreadystatechange=r}catch{}}}function JC(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(O.clearTimeout(t.A),t.A=null)}I.isActive=function(){return!!this.g};function cn(t){return t.g?t.g.readyState:0}I.da=function(){try{return 2<cn(this)?this.g.status:-1}catch{return-1}};I.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};I.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),TF(e)}};function oC(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case KC:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function RF(t){let e={};t=(t.g&&2<=cn(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Po(t[r]))continue;var n=tF(t[r]);let i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let s=e[i]||[];e[i]=s,s.push(n)}J1(e,function(r){return r.join(", ")})}I.Ia=function(){return this.m};I.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function ZC(t){let e="";return jg(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function em(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=ZC(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):me(t,e,n))}function Ao(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function XC(t){this.Ga=0,this.j=[],this.l=new Ju,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ao("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ao("baseRetryDelayMs",5e3,t),this.hb=Ao("retryDelaySeedMs",1e4,t),this.eb=Ao("forwardChannelMaxRetries",2,t),this.xa=Ao("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new $C(t&&t.concurrentRequestLimit),this.Ja=new EF,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}I=XC.prototype;I.ra=8;I.H=1;function tm(t){if(eT(t),t.H==3){var e=t.W++,n=Pn(t.I);if(me(n,"SID",t.K),me(n,"RID",e),me(n,"TYPE","terminate"),Qo(t,n),e=new zo(t,t.l,e),e.L=2,e.A=nl(Pn(n)),n=!1,O.navigator&&O.navigator.sendBeacon)try{n=O.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&O.Image&&(new Image().src=e.A,n=!0),n||(e.g=cT(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Go(e)}oT(t)}function sl(t){t.g&&(rm(t),t.g.cancel(),t.g=null)}function eT(t){sl(t),t.u&&(O.clearTimeout(t.u),t.u=null),$u(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&O.clearTimeout(t.m),t.m=null)}function ol(t){if(!HC(t.i)&&!t.m){t.m=!0;var e=t.Na;ko||EC(),Fo||(ko(),Fo=!0),Gg.add(e,t),t.C=0}}function MF(t,e){return qC(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Ho(Qe(t.Na,t,e),sT(t,t.C)),t.C++,!0)}I.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let i=new zo(this,this.l,t),s=this.s;if(this.U&&(s?(s=pC(s),gC(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=tT(this,i,e),n=Pn(this.I),me(n,"RID",t),me(n,"CVER",22),this.F&&me(n,"X-HTTP-Session-Id",this.F),Qo(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(ZC(s)))+"&"+e:this.o&&em(n,this.o,s)),Zg(this.i,i),this.bb&&me(n,"TYPE","init"),this.P?(me(n,"$req",e),me(n,"SID","null"),i.aa=!0,Ng(i,n,null)):Ng(i,n,e),this.H=2}}else this.H==3&&(t?aC(this,t):this.j.length==0||HC(this.i)||aC(this))};function aC(t,e){var n;e?n=e.m:n=t.W++;let r=Pn(t.I);me(r,"SID",t.K),me(r,"RID",n),me(r,"AID",t.V),Qo(t,r),t.o&&t.s&&em(r,t.o,t.s),n=new zo(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=tT(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),Zg(t.i,n),Ng(n,r,e)}function Qo(t,e){t.na&&jg(t.na,function(n,r){me(e,r,n)}),t.h&&VC({},function(n,r){me(e,r,n)})}function tT(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Qe(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){let o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let c=0;c<n;c++){let u=i[c].g,l=i[c].map;if(u-=s,0>u)s=Math.max(0,i[c].g-100),a=!1;else try{DF(l,o,"req"+u+"_")}catch{r&&r(l)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function nT(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;ko||EC(),Fo||(ko(),Fo=!0),Gg.add(e,t),t.A=0}}function nm(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Ho(Qe(t.Ma,t),sT(t,t.A)),t.A++,!0)}I.Ma=function(){if(this.u=null,rT(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Ho(Qe(this.jb,this),t)}};I.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,it(10),sl(this),rT(this))};function rm(t){t.B!=null&&(O.clearTimeout(t.B),t.B=null)}function rT(t){t.g=new zo(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Pn(t.wa);me(e,"RID","rpc"),me(e,"SID",t.K),me(e,"AID",t.V),me(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&me(e,"TO",t.qa),me(e,"TYPE","xmlhttp"),Qo(t,e),t.o&&t.s&&em(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=nl(Pn(e)),n.u=null,n.S=!0,PC(n,t)}I.ib=function(){this.v!=null&&(this.v=null,sl(this),nm(this),it(19))};function $u(t){t.v!=null&&(O.clearTimeout(t.v),t.v=null)}function iT(t,e){var n=null;if(t.g==e){$u(t),rm(t),t.g=null;var r=2}else if(Og(t.i,e))n=e.F,zC(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=Zu(),Ge(r,new AC(r,n)),ol(t)}else nT(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&MF(t,e)||r==2&&nm(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Br(t,5);break;case 4:Br(t,10);break;case 3:Br(t,6);break;default:Br(t,2)}}}function sT(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Br(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=Qe(t.pb,t);n||(n=new $r("//www.google.com/images/cleardot.gif"),O.location&&O.location.protocol=="http"||ju(n,"https"),nl(n)),CF(n.toString(),r)}else it(2);t.H=0,t.h&&t.h.za(e),oT(t),eT(t)}I.pb=function(t){t?(this.l.info("Successfully pinged google.com"),it(2)):(this.l.info("Failed to ping google.com"),it(1))};function oT(t){if(t.H=0,t.ma=[],t.h){let e=GC(t.i);(e.length!=0||t.j.length!=0)&&(ZD(t.ma,e),ZD(t.ma,t.j),t.i.i.length=0,Lg(t.j),t.j.length=0),t.h.ya()}}function aT(t,e,n){var r=n instanceof $r?Pn(n):new $r(n);if(r.g!="")e&&(r.g=e+"."+r.g),Bu(r,r.m);else{var i=O.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new $r(null);r&&ju(s,r),e&&(s.g=e),i&&Bu(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&me(r,n,e),me(r,"VER",t.ra),Qo(t,r),r}function cT(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new we(new Wo({ob:n})):new we(t.va),e.Oa(t.J),e}I.isActive=function(){return!!this.h&&this.h.isActive(this)};function uT(){}I=uT.prototype;I.Ba=function(){};I.Aa=function(){};I.za=function(){};I.ya=function(){};I.isActive=function(){return!0};I.Va=function(){};function Hu(){if(rs&&!(10<=Number(W1)))throw Error("Environmental error: no available transport.")}Hu.prototype.g=function(t,e){return new It(t,e)};function It(t,e){Ve.call(this),this.g=new XC(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Po(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Po(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new ss(this)}Le(It,Ve);It.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;it(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=aT(t,null,t.Y),ol(t)};It.prototype.close=function(){tm(this.g)};It.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=zg(t),t=n);e.j.push(new _F(e.fb++,t)),e.H==3&&ol(e)};It.prototype.N=function(){this.g.h=null,delete this.j,tm(this.g),delete this.g,It.$.N.call(this)};function lT(t){Yg.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Le(lT,Yg);function dT(){Jg.call(this),this.status=1}Le(dT,Jg);function ss(t){this.g=t}Le(ss,uT);ss.prototype.Ba=function(){Ge(this.g,"a")};ss.prototype.Aa=function(t){Ge(this.g,new lT(t))};ss.prototype.za=function(t){Ge(this.g,new dT)};ss.prototype.ya=function(){Ge(this.g,"b")};function xF(){this.blockSize=-1}function Bt(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Le(Bt,xF);Bt.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Ig(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}Bt.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)Ig(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){Ig(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){Ig(this,r),i=0;break}}this.h=i,this.i+=e};Bt.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function ae(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var NF={};function im(t){return-128<=t&&128>t?q1(t,function(e){return new ae([e|0],0>e?-1:0)}):new ae([t|0],0>t?-1:0)}function un(t){if(isNaN(t)||!isFinite(t))return ns;if(0>t)return ze(un(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=kg;return new ae(e,0)}function hT(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return ze(hT(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=un(Math.pow(e,8)),r=ns,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=un(Math.pow(e,s)),r=r.R(s).add(un(o))):(r=r.R(n),r=r.add(un(o)))}return r}var kg=4294967296,ns=im(0),Fg=im(1),cC=im(16777216);I=ae.prototype;I.ea=function(){if(Nt(this))return-ze(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:kg+r)*e,e*=kg}return t};I.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Nn(this))return"0";if(Nt(this))return"-"+ze(this).toString(t);for(var e=un(Math.pow(t,6)),n=this,r="";;){var i=zu(n,e).g;n=qu(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,Nn(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};I.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Nn(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Nt(t){return t.h==-1}I.X=function(t){return t=qu(this,t),Nt(t)?-1:Nn(t)?0:1};function ze(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new ae(n,~t.h).add(Fg)}I.abs=function(){return Nt(this)?ze(this):this};I.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new ae(n,n[n.length-1]&-2147483648?-1:0)};function qu(t,e){return t.add(ze(e))}I.R=function(t){if(Nn(this)||Nn(t))return ns;if(Nt(this))return Nt(t)?ze(this).R(ze(t)):ze(ze(this).R(t));if(Nt(t))return ze(this.R(ze(t)));if(0>this.X(cC)&&0>t.X(cC))return un(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,c=t.D(i)&65535;n[2*r+2*i]+=o*c,Uu(n,2*r+2*i),n[2*r+2*i+1]+=s*c,Uu(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,Uu(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,Uu(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new ae(n,0)};function Uu(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Ro(t,e){this.g=t,this.h=e}function zu(t,e){if(Nn(e))throw Error("division by zero");if(Nn(t))return new Ro(ns,ns);if(Nt(t))return e=zu(ze(t),e),new Ro(ze(e.g),ze(e.h));if(Nt(e))return e=zu(t,ze(e)),new Ro(ze(e.g),e.h);if(30<t.g.length){if(Nt(t)||Nt(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Fg,r=e;0>=r.X(t);)n=uC(n),r=uC(r);var i=es(n,1),s=es(r,1);for(r=es(r,2),n=es(n,2);!Nn(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=es(r,1),n=es(n,1)}return e=qu(t,i.R(e)),new Ro(i,e)}for(i=ns;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=un(n),o=s.R(e);Nt(o)||0<o.X(t);)n-=r,s=un(n),o=s.R(e);Nn(s)&&(s=Fg),i=i.add(s),t=qu(t,o)}return new Ro(i,t)}I.gb=function(t){return zu(this,t).h};I.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new ae(n,this.h&t.h)};I.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new ae(n,this.h|t.h)};I.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new ae(n,this.h^t.h)};function uC(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new ae(n,t.h)}function es(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new ae(i,t.h)}Hu.prototype.createWebChannel=Hu.prototype.g;It.prototype.send=It.prototype.u;It.prototype.open=It.prototype.m;It.prototype.close=It.prototype.close;Xu.NO_ERROR=0;Xu.TIMEOUT=8;Xu.HTTP_ERROR=6;RC.COMPLETE="complete";MC.EventType=qo;qo.OPEN="a";qo.CLOSE="b";qo.ERROR="c";qo.MESSAGE="d";Ve.prototype.listen=Ve.prototype.O;we.prototype.listenOnce=we.prototype.P;we.prototype.getLastError=we.prototype.Sa;we.prototype.getLastErrorCode=we.prototype.Ia;we.prototype.getStatus=we.prototype.da;we.prototype.getResponseJson=we.prototype.Wa;we.prototype.getResponseText=we.prototype.ja;we.prototype.send=we.prototype.ha;we.prototype.setWithCredentials=we.prototype.Oa;Bt.prototype.digest=Bt.prototype.l;Bt.prototype.reset=Bt.prototype.reset;Bt.prototype.update=Bt.prototype.j;ae.prototype.add=ae.prototype.add;ae.prototype.multiply=ae.prototype.R;ae.prototype.modulo=ae.prototype.gb;ae.prototype.compare=ae.prototype.X;ae.prototype.toNumber=ae.prototype.ea;ae.prototype.toString=ae.prototype.toString;ae.prototype.getBits=ae.prototype.D;ae.fromNumber=un;ae.fromString=hT;var fT=$t.createWebChannelTransport=function(){return new Hu},pT=$t.getStatEventTarget=function(){return Zu()},al=$t.ErrorCode=Xu,gT=$t.EventType=RC,mT=$t.Event=Hr,sm=$t.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},yT=$t.FetchXmlHttpFactory=Wo,Yo=$t.WebChannel=MC,vT=$t.XhrIo=we,_T=$t.Md5=Bt,qr=$t.Integer=ae;var IT="@firebase/firestore";var Ue=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Ue.UNAUTHENTICATED=new Ue(null),Ue.GOOGLE_CREDENTIALS=new Ue("google-credentials-uid"),Ue.FIRST_PARTY=new Ue("first-party-uid"),Ue.MOCK_USER=new Ue("mock-user");var Ds="10.11.1";var Kr=new tr("@firebase/firestore");function Jo(){return Kr.logLevel}function D(t,...e){if(Kr.logLevel<=z.DEBUG){let n=e.map(qy);Kr.debug(`Firestore (${Ds}): ${t}`,...n)}}function On(t,...e){if(Kr.logLevel<=z.ERROR){let n=e.map(qy);Kr.error(`Firestore (${Ds}): ${t}`,...n)}}function ds(t,...e){if(Kr.logLevel<=z.WARN){let n=e.map(qy);Kr.warn(`Firestore (${Ds}): ${t}`,...n)}}function qy(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function P(t="Unexpected state"){let e=`FIRESTORE (${Ds}) INTERNAL ASSERTION FAILED: `+t;throw On(e),new Error(e)}function pe(t,e){t||P()}function F(t,e){return t}var m={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},R=class extends Mt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var hn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var hl=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},lm=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ue.UNAUTHENTICATED))}shutdown(){}},dm=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},hm=class{constructor(e){this.t=e,this.currentUser=Ue.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),s=new hn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new hn,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>p(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{D("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(D("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new hn)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(D("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(pe(typeof r.accessToken=="string"),new hl(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return pe(e===null||typeof e=="string"),new Ue(e)}},fm=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ue.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},pm=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new fm(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ue.FIRST_PARTY))}shutdown(){}invalidateToken(){}},gm=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},mm=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=s=>{s.error!=null&&D("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,D("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{D("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):D("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(pe(typeof n.token=="string"),this.R=n.token,new gm(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function OF(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var fl=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=OF(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function re(t,e){return t<e?-1:t>e?1:0}function hs(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var We=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new R(m.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new R(m.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new R(m.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new R(m.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?re(this.nanoseconds,e.nanoseconds):re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var V=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new We(0,0))}static max(){return new t(new We(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var pl=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&P(),r===void 0?r=e.length-n:r>e.length-n&&P(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Me=class t extends pl{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new R(m.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},kF=/^[_a-zA-Z][_a-zA-Z0-9]*$/,wt=class t extends pl{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return kF.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new R(m.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new R(m.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new R(m.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new R(m.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var M=class t{constructor(e){this.path=e}static fromPath(e){return new t(Me.fromString(e))}static fromName(e){return new t(Me.fromString(e).popFirst(5))}static empty(){return new t(Me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Me.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Me(e.slice()))}};var ym=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};ym.UNKNOWN_ID=-1;function FF(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=V.fromTimestamp(r===1e9?new We(n+1,0):new We(n,r));return new Qr(i,M.empty(),e)}function VF(t){return new Qr(t.readTime,t.key,-1)}var Qr=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(V.min(),M.empty(),-1)}static max(){return new t(V.max(),M.empty(),-1)}};function LF(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=M.comparator(t.documentKey,e.documentKey),n!==0?n:re(t.largestBatchId,e.largestBatchId))}var UF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",vm=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function ya(t){return p(this,null,function*(){if(t.code!==m.FAILED_PRECONDITION||t.message!==UF)throw t;D("LocalStore","Unexpectedly lost primary lease")})}var y=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&P(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let u=c;n(e[u]).next(l=>{o[u]=l,++a,a===s&&r(o)},l=>i(l))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};function jF(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function va(t){return t.name==="IndexedDbTransactionError"}var WT=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function Bl(t){return t==null}function ra(t){return t===0&&1/t==-1/0}function BF(t){return typeof t=="number"&&Number.isInteger(t)&&!ra(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var $F=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],k3=[...$F,"documentOverlays"],HF=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],qF=HF,F3=[...qF,"indexConfiguration","indexState","indexEntries"];function wT(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Cs(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function KT(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var De=class t{constructor(e,n){this.comparator=e,this.root=n||fn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,fn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,fn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new us(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new us(this.root,e,this.comparator,!1)}getReverseIterator(){return new us(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new us(this.root,e,this.comparator,!0)}},us=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},fn=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw P();let e=this.left.check();if(e!==this.right.check())throw P();return e+(this.isRed()?0:1)}};fn.EMPTY=null,fn.RED=!0,fn.BLACK=!1;fn.EMPTY=new class{constructor(){this.size=0}get key(){throw P()}get value(){throw P()}get color(){throw P()}get left(){throw P()}get right(){throw P()}copy(e,n,r,i,s){return this}insert(e,n,r){return new fn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ze=class t{constructor(e){this.comparator=e,this.data=new De(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new gl(this.data.getIterator())}getIteratorFrom(e){return new gl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},gl=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var dn=class t{constructor(e){this.fields=e,e.sort(wt.comparator)}static empty(){return new t([])}unionWith(e){let n=new Ze(wt.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return hs(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var ml=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var st=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new ml("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};st.EMPTY_BYTE_STRING=new st("");var zF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function kn(t){if(pe(!!t),typeof t=="string"){let e=0,n=zF.exec(t);if(pe(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ee(t.seconds),nanos:Ee(t.nanos)}}function Ee(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function or(t){return typeof t=="string"?st.fromBase64String(t):st.fromUint8Array(t)}function zy(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Gy(t){let e=t.mapValue.fields.__previous_value__;return zy(e)?Gy(e):e}function ia(t){let e=kn(t.mapValue.fields.__local_write_time__.timestampValue);return new We(e.seconds,e.nanos)}var _m=class{constructor(e,n,r,i,s,o,a,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}},yl=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var cl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Yr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?zy(t)?4:QT(t)?9007199254740991:10:P()}function mn(t,e){if(t===e)return!0;let n=Yr(t);if(n!==Yr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ia(t).isEqual(ia(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=kn(i.timestampValue),a=kn(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return or(i.bytesValue).isEqual(or(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Ee(i.geoPointValue.latitude)===Ee(s.geoPointValue.latitude)&&Ee(i.geoPointValue.longitude)===Ee(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ee(i.integerValue)===Ee(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=Ee(i.doubleValue),a=Ee(s.doubleValue);return o===a?ra(o)===ra(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return hs(t.arrayValue.values||[],e.arrayValue.values||[],mn);case 10:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(wT(o)!==wT(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!mn(o[c],a[c])))return!1;return!0}(t,e);default:return P()}}function sa(t,e){return(t.values||[]).find(n=>mn(n,e))!==void 0}function fs(t,e){if(t===e)return 0;let n=Yr(t),r=Yr(e);if(n!==r)return re(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return re(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Ee(s.integerValue||s.doubleValue),c=Ee(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return ET(t.timestampValue,e.timestampValue);case 4:return ET(ia(t),ia(e));case 5:return re(t.stringValue,e.stringValue);case 6:return function(s,o){let a=or(s),c=or(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){let l=re(a[u],c[u]);if(l!==0)return l}return re(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=re(Ee(s.latitude),Ee(o.latitude));return a!==0?a:re(Ee(s.longitude),Ee(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){let a=s.values||[],c=o.values||[];for(let u=0;u<a.length&&u<c.length;++u){let l=fs(a[u],c[u]);if(l)return l}return re(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===cl.mapValue&&o===cl.mapValue)return 0;if(s===cl.mapValue)return 1;if(o===cl.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),u=o.fields||{},l=Object.keys(u);c.sort(),l.sort();for(let d=0;d<c.length&&d<l.length;++d){let h=re(c[d],l[d]);if(h!==0)return h;let f=fs(a[c[d]],u[l[d]]);if(f!==0)return f}return re(c.length,l.length)}(t.mapValue,e.mapValue);default:throw P()}}function ET(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return re(t,e);let n=kn(t),r=kn(e),i=re(n.seconds,r.seconds);return i!==0?i:re(n.nanos,r.nanos)}function ps(t){return Im(t)}function Im(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=kn(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return or(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return M.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=Im(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${Im(n.fields[o])}`;return i+"}"}(t.mapValue):P()}function wm(t){return!!t&&"integerValue"in t}function Wy(t){return!!t&&"arrayValue"in t}function DT(t){return!!t&&"nullValue"in t}function CT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ll(t){return!!t&&"mapValue"in t}function Xo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Cs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Xo(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Xo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function QT(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Ht=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ll(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xo(n)}setAll(e){let n=wt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Xo(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());ll(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return mn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];ll(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Cs(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(Xo(this.value))}};function YT(t){let e=[];return Cs(t.fields,(n,r)=>{let i=new wt([n]);if(ll(r)){let s=YT(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new dn(e)}var qt=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,V.min(),V.min(),V.min(),Ht.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,V.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,V.min(),V.min(),Ht.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,V.min(),V.min(),Ht.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(V.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ht.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ht.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=V.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var gs=class{constructor(e,n){this.position=e,this.inclusive=n}};function TT(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=M.comparator(M.fromName(o.referenceValue),n.key):r=fs(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function bT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!mn(t.position[n],e.position[n]))return!1;return!0}var ms=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function GF(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var vl=class{},Ne=class t extends vl{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Dm(e,n,r):n==="array-contains"?new bm(e,r):n==="in"?new Sm(e,r):n==="not-in"?new Am(e,r):n==="array-contains-any"?new Rm(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Cm(e,r):new Tm(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(fs(n,this.value)):n!==null&&Yr(this.value)===Yr(n)&&this.matchesComparison(fs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return P()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},yn=class t extends vl{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return JT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function JT(t){return t.op==="and"}function ZT(t){return WF(t)&&JT(t)}function WF(t){for(let e of t.filters)if(e instanceof yn)return!1;return!0}function Em(t){if(t instanceof Ne)return t.field.canonicalString()+t.op.toString()+ps(t.value);if(ZT(t))return t.filters.map(e=>Em(e)).join(",");{let e=t.filters.map(n=>Em(n)).join(",");return`${t.op}(${e})`}}function XT(t,e){return t instanceof Ne?function(r,i){return i instanceof Ne&&r.op===i.op&&r.field.isEqual(i.field)&&mn(r.value,i.value)}(t,e):t instanceof yn?function(r,i){return i instanceof yn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&XT(o,i.filters[a]),!0):!1}(t,e):void P()}function e0(t){return t instanceof Ne?function(n){return`${n.field.canonicalString()} ${n.op} ${ps(n.value)}`}(t):t instanceof yn?function(n){return n.op.toString()+" {"+n.getFilters().map(e0).join(" ,")+"}"}(t):"Filter"}var Dm=class extends Ne{constructor(e,n,r){super(e,n,r),this.key=M.fromName(r.referenceValue)}matches(e){let n=M.comparator(e.key,this.key);return this.matchesComparison(n)}},Cm=class extends Ne{constructor(e,n){super(e,"in",n),this.keys=t0("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Tm=class extends Ne{constructor(e,n){super(e,"not-in",n),this.keys=t0("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function t0(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>M.fromName(r.referenceValue))}var bm=class extends Ne{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return Wy(n)&&sa(n.arrayValue,this.value)}},Sm=class extends Ne{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&sa(this.value.arrayValue,n)}},Am=class extends Ne{constructor(e,n){super(e,"not-in",n)}matches(e){if(sa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!sa(this.value.arrayValue,n)}},Rm=class extends Ne{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!Wy(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>sa(this.value.arrayValue,r))}};var Mm=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function ST(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Mm(t,e,n,r,i,s,o)}function Ky(t){let e=F(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Em(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Bl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ps(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ps(r)).join(",")),e.ue=n}return e.ue}function Qy(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!GF(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!XT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!bT(t.startAt,e.startAt)&&bT(t.endAt,e.endAt)}function xm(t){return M.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var ys=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function KF(t,e,n,r,i,s,o,a){return new ys(t,e,n,r,i,s,o,a)}function Yy(t){return new ys(t)}function AT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function QF(t){return t.collectionGroup!==null}function ea(t){let e=F(t);if(e.ce===null){e.ce=[];let n=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ze(wt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new ms(s,r))}),n.has(wt.keyField().canonicalString())||e.ce.push(new ms(wt.keyField(),r))}return e.ce}function pn(t){let e=F(t);return e.le||(e.le=YF(e,ea(t))),e.le}function YF(t,e){if(t.limitType==="F")return ST(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new ms(i.field,s)});let n=t.endAt?new gs(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new gs(t.startAt.position,t.startAt.inclusive):null;return ST(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Nm(t,e,n){return new ys(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function $l(t,e){return Qy(pn(t),pn(e))&&t.limitType===e.limitType}function n0(t){return`${Ky(pn(t))}|lt:${t.limitType}`}function os(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>e0(i)).join(", ")}]`),Bl(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ps(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ps(i)).join(",")),`Target(${r})`}(pn(t))}; limitType=${t.limitType})`}function Hl(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):M.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of ea(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let u=TT(o,a,c);return o.inclusive?u<=0:u<0}(r.startAt,ea(r),i)||r.endAt&&!function(o,a,c){let u=TT(o,a,c);return o.inclusive?u>=0:u>0}(r.endAt,ea(r),i))}(t,e)}function JF(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function r0(t){return(e,n)=>{let r=!1;for(let i of ea(t)){let s=ZF(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function ZF(t,e,n){let r=t.field.isKeyField()?M.comparator(e.key,n.key):function(s,o,a){let c=o.data.field(s),u=a.data.field(s);return c!==null&&u!==null?fs(c,u):P()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return P()}}var ar=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Cs(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return KT(this.inner)}size(){return this.innerSize}};var XF=new De(M.comparator);function Fn(){return XF}var i0=new De(M.comparator);function Zo(...t){let e=i0;for(let n of t)e=e.insert(n.key,n);return e}function s0(t){let e=i0;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function zr(){return ta()}function o0(){return ta()}function ta(){return new ar(t=>t.toString(),(t,e)=>t.isEqual(e))}var eV=new De(M.comparator),tV=new Ze(M.comparator);function G(...t){let e=tV;for(let n of t)e=e.add(n);return e}var nV=new Ze(re);function rV(){return nV}function a0(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ra(e)?"-0":e}}function c0(t){return{integerValue:""+t}}function iV(t,e){return BF(e)?c0(e):a0(t,e)}var vs=class{constructor(){this._=void 0}};function sV(t,e,n){return t instanceof _s?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&zy(s)&&(s=Gy(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Jr?l0(t,e):t instanceof Zr?d0(t,e):function(i,s){let o=u0(i,s),a=RT(o)+RT(i.Pe);return wm(o)&&wm(i.Pe)?c0(a):a0(i.serializer,a)}(t,e)}function oV(t,e,n){return t instanceof Jr?l0(t,e):t instanceof Zr?d0(t,e):n}function u0(t,e){return t instanceof Is?function(r){return wm(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var _s=class extends vs{},Jr=class extends vs{constructor(e){super(),this.elements=e}};function l0(t,e){let n=h0(e);for(let r of t.elements)n.some(i=>mn(i,r))||n.push(r);return{arrayValue:{values:n}}}var Zr=class extends vs{constructor(e){super(),this.elements=e}};function d0(t,e){let n=h0(e);for(let r of t.elements)n=n.filter(i=>!mn(i,r));return{arrayValue:{values:n}}}var Is=class extends vs{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function RT(t){return Ee(t.integerValue||t.doubleValue)}function h0(t){return Wy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function aV(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Jr&&i instanceof Jr||r instanceof Zr&&i instanceof Zr?hs(r.elements,i.elements,mn):r instanceof Is&&i instanceof Is?mn(r.Pe,i.Pe):r instanceof _s&&i instanceof _s}(t.transform,e.transform)}var Pm=class{constructor(e,n){this.version=e,this.transformResults=n}},Wr=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function dl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var ws=class{};function f0(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new _l(t.key,Wr.none()):new Xr(t.key,t.data,Wr.none());{let n=t.data,r=Ht.empty(),i=new Ze(wt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Vn(t.key,r,new dn(i.toArray()),Wr.none())}}function cV(t,e,n){t instanceof Xr?function(i,s,o){let a=i.value.clone(),c=xT(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Vn?function(i,s,o){if(!dl(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=xT(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(p0(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function na(t,e,n,r){return t instanceof Xr?function(s,o,a,c){if(!dl(s.precondition,o))return a;let u=s.value.clone(),l=NT(s.fieldTransforms,c,o);return u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Vn?function(s,o,a,c){if(!dl(s.precondition,o))return a;let u=NT(s.fieldTransforms,c,o),l=o.data;return l.setAll(p0(s)),l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return dl(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function uV(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=u0(r.transform,i||null);s!=null&&(n===null&&(n=Ht.empty()),n.set(r.field,s))}return n||null}function MT(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&hs(r,i,(s,o)=>aV(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Xr=class extends ws{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Vn=class extends ws{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function p0(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function xT(t,e,n){let r=new Map;pe(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,oV(o,a,n[i]))}return r}function NT(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,sV(s,o,e))}return r}var _l=class extends ws{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Om=class extends ws{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var km=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&cV(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=na(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=na(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=o0();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let c=f0(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(V.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),G())}isEqual(e){return this.batchId===e.batchId&&hs(this.mutations,e.mutations,(n,r)=>MT(n,r))&&hs(this.baseMutations,e.baseMutations,(n,r)=>MT(n,r))}},Fm=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){pe(e.mutations.length===r.length);let i=function(){return eV}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var Vm=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Lm=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Ae,X;function lV(t){switch(t){default:return P();case m.CANCELLED:case m.UNKNOWN:case m.DEADLINE_EXCEEDED:case m.RESOURCE_EXHAUSTED:case m.INTERNAL:case m.UNAVAILABLE:case m.UNAUTHENTICATED:return!1;case m.INVALID_ARGUMENT:case m.NOT_FOUND:case m.ALREADY_EXISTS:case m.PERMISSION_DENIED:case m.FAILED_PRECONDITION:case m.ABORTED:case m.OUT_OF_RANGE:case m.UNIMPLEMENTED:case m.DATA_LOSS:return!0}}function g0(t){if(t===void 0)return On("GRPC error has no .code"),m.UNKNOWN;switch(t){case Ae.OK:return m.OK;case Ae.CANCELLED:return m.CANCELLED;case Ae.UNKNOWN:return m.UNKNOWN;case Ae.DEADLINE_EXCEEDED:return m.DEADLINE_EXCEEDED;case Ae.RESOURCE_EXHAUSTED:return m.RESOURCE_EXHAUSTED;case Ae.INTERNAL:return m.INTERNAL;case Ae.UNAVAILABLE:return m.UNAVAILABLE;case Ae.UNAUTHENTICATED:return m.UNAUTHENTICATED;case Ae.INVALID_ARGUMENT:return m.INVALID_ARGUMENT;case Ae.NOT_FOUND:return m.NOT_FOUND;case Ae.ALREADY_EXISTS:return m.ALREADY_EXISTS;case Ae.PERMISSION_DENIED:return m.PERMISSION_DENIED;case Ae.FAILED_PRECONDITION:return m.FAILED_PRECONDITION;case Ae.ABORTED:return m.ABORTED;case Ae.OUT_OF_RANGE:return m.OUT_OF_RANGE;case Ae.UNIMPLEMENTED:return m.UNIMPLEMENTED;case Ae.DATA_LOSS:return m.DATA_LOSS;default:return P()}}(X=Ae||(Ae={}))[X.OK=0]="OK",X[X.CANCELLED=1]="CANCELLED",X[X.UNKNOWN=2]="UNKNOWN",X[X.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",X[X.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",X[X.NOT_FOUND=5]="NOT_FOUND",X[X.ALREADY_EXISTS=6]="ALREADY_EXISTS",X[X.PERMISSION_DENIED=7]="PERMISSION_DENIED",X[X.UNAUTHENTICATED=16]="UNAUTHENTICATED",X[X.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",X[X.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",X[X.ABORTED=10]="ABORTED",X[X.OUT_OF_RANGE=11]="OUT_OF_RANGE",X[X.UNIMPLEMENTED=12]="UNIMPLEMENTED",X[X.INTERNAL=13]="INTERNAL",X[X.UNAVAILABLE=14]="UNAVAILABLE",X[X.DATA_LOSS=15]="DATA_LOSS";var PT=null;function dV(){return new TextEncoder}var hV=new qr([4294967295,4294967295],0);function OT(t){let e=dV().encode(t),n=new _T;return n.update(e),new Uint8Array(n.digest())}function kT(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new qr([n,r],0),new qr([i,s],0)]}var Um=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Gr(`Invalid padding: ${n}`);if(r<0)throw new Gr(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Gr(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Gr(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=qr.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(qr.fromNumber(r)));return i.compare(hV)===1&&(i=new qr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=OT(e),[r,i]=kT(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let n=OT(e),[r,i]=kT(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Gr=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Il=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,oa.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(V.min(),i,new De(re),Fn(),G())}},oa=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,G(),G(),G())}};var ls=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},wl=class{constructor(e,n){this.targetId=e,this.me=n}},El=class{constructor(e,n,r=st.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Dl=class{constructor(){this.fe=0,this.ge=VT(),this.pe=st.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=G(),n=G(),r=G();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:P()}}),new oa(this.pe,this.ye,e,n,r)}ve(){this.we=!1,this.ge=VT()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,pe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},jm=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Fn(),this.qe=FT(),this.Qe=new De(re)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:P()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let s=i.target;if(xm(s))if(r===0){let o=new M(s.path);this.Ue(n,o,qt.newNoDocument(o,V.min()))}else pe(r===1);else{let o=this.Ye(n);if(o!==r){let a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(n);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}PT?.et(function(l,d,h,f,g){var v,_,C,Y,$,he;let je={localCacheCount:l,existenceFilterCount:d.count,databaseId:h.database,projectId:h.projectId},se=d.unchangedNames;return se&&(je.bloomFilter={applied:g===0,hashCount:(v=se?.hashCount)!==null&&v!==void 0?v:0,bitmapLength:(Y=(C=(_=se?.bits)===null||_===void 0?void 0:_.bitmap)===null||C===void 0?void 0:C.length)!==null&&Y!==void 0?Y:0,padding:(he=($=se?.bits)===null||$===void 0?void 0:$.padding)!==null&&he!==void 0?he:0,mightContain:Ke=>{var zt;return(zt=f?.mightContain(Ke))!==null&&zt!==void 0&&zt}}),je}(o,e.me,this.Le.tt(),a,c))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=or(r).toUint8Array()}catch(c){if(c instanceof ml)return ds("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Um(o,i,s)}catch(c){return ds(c instanceof Gr?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&xm(a.target)){let c=new M(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,qt.newNoDocument(c,e))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=G();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new Il(e,n,this.Qe,this.ke,r);return this.ke=Fn(),this.qe=FT(),this.Qe=new De(re),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Dl,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ze(re),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||D("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Dl),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function FT(){return new De(M.comparator)}function VT(){return new De(M.comparator)}var fV={asc:"ASCENDING",desc:"DESCENDING"},pV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gV={and:"AND",or:"OR"},Bm=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function $m(t,e){return t.useProto3Json||Bl(e)?e:{value:e}}function Cl(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function m0(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function mV(t,e){return Cl(t,e.toTimestamp())}function gn(t){return pe(!!t),V.fromTimestamp(function(n){let r=kn(n);return new We(r.seconds,r.nanos)}(t))}function Jy(t,e){return Hm(t,e).canonicalString()}function Hm(t,e){let n=function(i){return new Me(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function y0(t){let e=Me.fromString(t);return pe(E0(e)),e}function qm(t,e){return Jy(t.databaseId,e.path)}function om(t,e){let n=y0(e);if(n.get(1)!==t.databaseId.projectId)throw new R(m.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new R(m.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new M(_0(n))}function v0(t,e){return Jy(t.databaseId,e)}function yV(t){let e=y0(t);return e.length===4?Me.emptyPath():_0(e)}function zm(t){return new Me(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function _0(t){return pe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function LT(t,e,n){return{name:qm(t,e),fields:n.value.mapValue.fields}}function vV(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:P()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,l){return u.useProto3Json?(pe(l===void 0||typeof l=="string"),st.fromBase64String(l||"")):(pe(l===void 0||l instanceof Buffer||l instanceof Uint8Array),st.fromUint8Array(l||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){let l=u.code===void 0?m.UNKNOWN:g0(u.code);return new R(l,u.message||"")}(o);n=new El(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=om(t,r.document.name),s=gn(r.document.updateTime),o=r.document.createTime?gn(r.document.createTime):V.min(),a=new Ht({mapValue:{fields:r.document.fields}}),c=qt.newFoundDocument(i,s,o,a),u=r.targetIds||[],l=r.removedTargetIds||[];n=new ls(u,l,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=om(t,r.document),s=r.readTime?gn(r.readTime):V.min(),o=qt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new ls([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=om(t,r.document),s=r.removedTargetIds||[];n=new ls([],s,i,null)}else{if(!("filter"in e))return P();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new Lm(i,s),a=r.targetId;n=new wl(a,o)}}return n}function _V(t,e){let n;if(e instanceof Xr)n={update:LT(t,e.key,e.value)};else if(e instanceof _l)n={delete:qm(t,e.key)};else if(e instanceof Vn)n={update:LT(t,e.key,e.data),updateMask:AV(e.fieldMask)};else{if(!(e instanceof Om))return P();n={verify:qm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof _s)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Jr)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Zr)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Is)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw P()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:mV(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:P()}(t,e.precondition)),n}function IV(t,e){return t&&t.length>0?(pe(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?gn(i.updateTime):gn(s);return o.isEqual(V.min())&&(o=gn(s)),new Pm(o,i.transformResults||[])}(n,e))):[]}function wV(t,e){return{documents:[v0(t,e.path)]}}function EV(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=v0(t,i);let s=function(u){if(u.length!==0)return w0(yn.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(u){if(u.length!==0)return u.map(l=>function(h){return{field:as(h.field),direction:TV(h.dir)}}(l))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=$m(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:i}}function DV(t){let e=yV(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){pe(r===1);let l=n.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let s=[];n.where&&(s=function(d){let h=I0(d);return h instanceof yn&&ZT(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(h=>function(g){return new ms(cs(g.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,Bl(h)?null:h}(n.limit));let c=null;n.startAt&&(c=function(d){let h=!!d.before,f=d.values||[];return new gs(f,h)}(n.startAt));let u=null;return n.endAt&&(u=function(d){let h=!d.before,f=d.values||[];return new gs(f,h)}(n.endAt)),KF(e,i,o,s,a,"F",c,u)}function CV(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return P()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function I0(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=cs(n.unaryFilter.field);return Ne.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=cs(n.unaryFilter.field);return Ne.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=cs(n.unaryFilter.field);return Ne.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=cs(n.unaryFilter.field);return Ne.create(o,"!=",{nullValue:"NULL_VALUE"});default:return P()}}(t):t.fieldFilter!==void 0?function(n){return Ne.create(cs(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return P()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return yn.create(n.compositeFilter.filters.map(r=>I0(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return P()}}(n.compositeFilter.op))}(t):P()}function TV(t){return fV[t]}function bV(t){return pV[t]}function SV(t){return gV[t]}function as(t){return{fieldPath:t.canonicalString()}}function cs(t){return wt.fromServerFormat(t.fieldPath)}function w0(t){return t instanceof Ne?function(n){if(n.op==="=="){if(CT(n.value))return{unaryFilter:{field:as(n.field),op:"IS_NAN"}};if(DT(n.value))return{unaryFilter:{field:as(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(CT(n.value))return{unaryFilter:{field:as(n.field),op:"IS_NOT_NAN"}};if(DT(n.value))return{unaryFilter:{field:as(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:as(n.field),op:bV(n.op),value:n.value}}}(t):t instanceof yn?function(n){let r=n.getFilters().map(i=>w0(i));return r.length===1?r[0]:{compositeFilter:{op:SV(n.op),filters:r}}}(t):P()}function AV(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function E0(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var aa=class t{constructor(e,n,r,i,s=V.min(),o=V.min(),a=st.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Gm=class{constructor(e){this.ut=e}};function RV(t){let e=DV({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Nm(e,e.limit,"L"):e}var Tl=class{constructor(){}ht(e,n){this.Pt(e,n),n.It()}Pt(e,n){if("nullValue"in e)this.Tt(n,5);else if("booleanValue"in e)this.Tt(n,10),n.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(n,15),n.Et(Ee(e.integerValue));else if("doubleValue"in e){let r=Ee(e.doubleValue);isNaN(r)?this.Tt(n,13):(this.Tt(n,15),ra(r)?n.Et(0):n.Et(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Tt(n,20),typeof r=="string"&&(r=kn(r)),n.dt(`${r.seconds||""}`),n.Et(r.nanos||0)}else if("stringValue"in e)this.At(e.stringValue,n),this.Rt(n);else if("bytesValue"in e)this.Tt(n,30),n.Vt(or(e.bytesValue)),this.Rt(n);else if("referenceValue"in e)this.ft(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Tt(n,45),n.Et(r.latitude||0),n.Et(r.longitude||0)}else"mapValue"in e?QT(e)?this.Tt(n,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,n),this.Rt(n)):"arrayValue"in e?(this.yt(e.arrayValue,n),this.Rt(n)):P()}At(e,n){this.Tt(n,25),this.wt(e,n)}wt(e,n){n.dt(e)}gt(e,n){let r=e.fields||{};this.Tt(n,55);for(let i of Object.keys(r))this.At(i,n),this.Pt(r[i],n)}yt(e,n){let r=e.values||[];this.Tt(n,50);for(let i of r)this.Pt(i,n)}ft(e,n){this.Tt(n,37),M.fromName(e).path.forEach(r=>{this.Tt(n,60),this.wt(r,n)})}Tt(e,n){e.Et(n)}Rt(e){e.Et(2)}};Tl.St=new Tl;var Wm=class{constructor(){this.on=new Km}addToCollectionParentIndex(e,n){return this.on.add(n),y.resolve()}getCollectionParents(e,n){return y.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return y.resolve()}deleteFieldIndex(e,n){return y.resolve()}deleteAllFieldIndexes(e){return y.resolve()}createTargetIndexes(e,n){return y.resolve()}getDocumentsMatchingTarget(e,n){return y.resolve(null)}getIndexType(e,n){return y.resolve(0)}getFieldIndexes(e,n){return y.resolve([])}getNextCollectionGroupToUpdate(e){return y.resolve(null)}getMinOffset(e,n){return y.resolve(Qr.min())}getMinOffsetFromCollectionGroup(e,n){return y.resolve(Qr.min())}updateCollectionGroup(e,n,r){return y.resolve()}updateIndexEntries(e,n){return y.resolve()}},Km=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ze(Me.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ze(Me.comparator)).toArray()}};var L3=new Uint8Array(0);var ln=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};ln.DEFAULT_COLLECTION_PERCENTILE=10,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ln.DEFAULT=new ln(41943040,ln.DEFAULT_COLLECTION_PERCENTILE,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ln.DISABLED=new ln(-1,0,0);var ca=class t{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new t(0)}static Nn(){return new t(-1)}};var Qm=class{constructor(){this.changes=new ar(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,qt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?y.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Ym=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Jm=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&na(r.mutation,i,dn.empty(),We.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,G()).next(()=>r))}getLocalViewOfDocuments(e,n,r=G()){let i=zr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Zo();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=zr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,G()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Fn(),o=ta(),a=function(){return ta()}();return n.forEach((c,u)=>{let l=r.get(u.key);i.has(u.key)&&(l===void 0||l.mutation instanceof Vn)?s=s.insert(u.key,u):l!==void 0?(o.set(u.key,l.mutation.getFieldMask()),na(l.mutation,u,l.mutation.getFieldMask(),We.now())):o.set(u.key,dn.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,l)=>o.set(u,l)),n.forEach((u,l)=>{var d;return a.set(u,new Ym(l,(d=o.get(u))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){let r=ta(),i=new De((o,a)=>o-a),s=G();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(c=>{let u=n.get(c);if(u===null)return;let l=r.get(c)||dn.empty();l=a.applyToLocalView(u,l),r.set(c,l);let d=(i.get(a.batchId)||G()).add(c);i=i.insert(a.batchId,d)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,l=c.value,d=o0();l.forEach(h=>{if(!s.has(h)){let f=f0(n.get(h),r.get(h));f!==null&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return y.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return M.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):QF(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):y.resolve(zr()),a=-1,c=s;return o.next(u=>y.forEach(u,(l,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(l)?y.resolve():this.remoteDocumentCache.getEntry(e,l).next(h=>{c=c.insert(l,h)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,G())).next(l=>({batchId:a,changes:s0(l)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new M(n)).next(r=>{let i=Zo();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=Zo();return this.indexManager.getCollectionParents(e,s).next(a=>y.forEach(a,c=>{let u=function(d,h){return new ys(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(l=>{l.forEach((d,h)=>{o=o.insert(d,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((c,u)=>{let l=u.getKey();o.get(l)===null&&(o=o.insert(l,qt.newInvalidDocument(l)))});let a=Zo();return o.forEach((c,u)=>{let l=s.get(c);l!==void 0&&na(l.mutation,u,dn.empty(),We.now()),Hl(n,u)&&(a=a.insert(c,u))}),a})}};var Zm=class{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return y.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,function(i){return{id:i.id,version:i.version,createTime:gn(i.createTime)}}(n)),y.resolve()}getNamedQuery(e,n){return y.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,function(i){return{name:i.name,query:RV(i.bundledQuery),readTime:gn(i.readTime)}}(n)),y.resolve()}};var Xm=class{constructor(){this.overlays=new De(M.comparator),this.lr=new Map}getOverlay(e,n){return y.resolve(this.overlays.get(n))}getOverlays(e,n){let r=zr();return y.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.lt(e,n,s)}),y.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.lr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.lr.delete(r)),y.resolve()}getOverlaysForCollection(e,n,r){let i=zr(),s=n.length+1,o=new M(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return y.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new De((u,l)=>u-l),o=this.overlays.getIterator();for(;o.hasNext();){let u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let l=s.get(u.largestBatchId);l===null&&(l=zr(),s=s.insert(u.largestBatchId,l)),l.set(u.getKey(),u)}}let a=zr(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,l)=>a.set(u,l)),!(a.size()>=i)););return y.resolve(a)}lt(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.lr.get(i.largestBatchId).delete(r.key);this.lr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Vm(n,r));let s=this.lr.get(n);s===void 0&&(s=G(),this.lr.set(n,s)),this.lr.set(n,s.add(r.key))}};var ua=class{constructor(){this.hr=new Ze(Re.Pr),this.Ir=new Ze(Re.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){let r=new Re(e,n);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.dr(new Re(e,n))}Ar(e,n){e.forEach(r=>this.removeReference(r,n))}Rr(e){let n=new M(new Me([])),r=new Re(n,e),i=new Re(n,e+1),s=[];return this.Ir.forEachInRange([r,i],o=>{this.dr(o),s.push(o.key)}),s}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){let n=new M(new Me([])),r=new Re(n,e),i=new Re(n,e+1),s=G();return this.Ir.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new Re(e,0),r=this.hr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Re=class{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return M.comparator(e.key,n.key)||re(e.gr,n.gr)}static Tr(e,n){return re(e.gr,n.gr)||M.comparator(e.key,n.key)}};var ey=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new Ze(Re.Pr)}checkEmpty(e){return y.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new km(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.yr=this.yr.add(new Re(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return y.resolve(o)}lookupMutationBatch(e,n){return y.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.Sr(r),s=i<0?0:i;return y.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return y.resolve(this.mutationQueue.length===0?-1:this.pr-1)}getAllMutationBatches(e){return y.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Re(n,0),i=new Re(n,Number.POSITIVE_INFINITY),s=[];return this.yr.forEachInRange([r,i],o=>{let a=this.wr(o.gr);s.push(a)}),y.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ze(re);return n.forEach(i=>{let s=new Re(i,0),o=new Re(i,Number.POSITIVE_INFINITY);this.yr.forEachInRange([s,o],a=>{r=r.add(a.gr)})}),y.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;M.isDocumentKey(s)||(s=s.child(""));let o=new Re(new M(s),0),a=new Ze(re);return this.yr.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.gr)),!0)},o),y.resolve(this.br(a))}br(e){let n=[];return e.forEach(r=>{let i=this.wr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){pe(this.Dr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.yr;return y.forEach(n.mutations,i=>{let s=new Re(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.yr=r})}Fn(e){}containsKey(e,n){let r=new Re(n,0),i=this.yr.firstAfterOrEqual(r);return y.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,y.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}wr(e){let n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var ty=class{constructor(e){this.Cr=e,this.docs=function(){return new De(M.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Cr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return y.resolve(r?r.document.mutableCopy():qt.newInvalidDocument(n))}getEntries(e,n){let r=Fn();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():qt.newInvalidDocument(i))}),y.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Fn(),o=n.path,a=new M(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:l}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||LF(VF(l),r)<=0||(i.has(l.key)||Hl(n,l))&&(s=s.insert(l.key,l.mutableCopy()))}return y.resolve(s)}getAllFromCollectionGroup(e,n,r,i){P()}vr(e,n){return y.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new ny(this)}getSize(e){return y.resolve(this.size)}},ny=class extends Qm{constructor(e){super(),this._r=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this._r.addEntry(e,i)):this._r.removeEntry(r)}),y.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}};var ry=class{constructor(e){this.persistence=e,this.Fr=new ar(n=>Ky(n),Qy),this.lastRemoteSnapshotVersion=V.min(),this.highestTargetId=0,this.Mr=0,this.Or=new ua,this.targetCount=0,this.Nr=ca.On()}forEachTarget(e,n){return this.Fr.forEach((r,i)=>n(i)),y.resolve()}getLastRemoteSnapshotVersion(e){return y.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return y.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),y.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Mr&&(this.Mr=n),y.resolve()}kn(e){this.Fr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Nr=new ca(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,y.resolve()}updateTargetData(e,n){return this.kn(n),y.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,y.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Fr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Fr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),y.waitFor(s).next(()=>i)}getTargetCount(e){return y.resolve(this.targetCount)}getTargetData(e,n){let r=this.Fr.get(n)||null;return y.resolve(r)}addMatchingKeys(e,n,r){return this.Or.Er(n,r),y.resolve()}removeMatchingKeys(e,n,r){this.Or.Ar(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),y.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),y.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Or.mr(n);return y.resolve(r)}containsKey(e,n){return y.resolve(this.Or.containsKey(n))}};var iy=class{constructor(e,n){this.Lr={},this.overlays={},this.Br=new WT(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new ry(this),this.indexManager=new Wm,this.remoteDocumentCache=function(i){return new ty(i)}(r=>this.referenceDelegate.Qr(r)),this.serializer=new Gm(n),this.Kr=new Zm(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Xm,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Lr[e.toKey()];return r||(r=new ey(n,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,r){D("MemoryPersistence","Starting transaction:",e);let i=new sy(this.Br.next());return this.referenceDelegate.$r(),r(i).next(s=>this.referenceDelegate.Ur(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Wr(e,n){return y.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,n)))}},sy=class extends vm{constructor(e){super(),this.currentSequenceNumber=e}},oy=class t{constructor(e){this.persistence=e,this.Gr=new ua,this.zr=null}static jr(e){return new t(e)}get Hr(){if(this.zr)return this.zr;throw P()}addReference(e,n,r){return this.Gr.addReference(r,n),this.Hr.delete(r.toString()),y.resolve()}removeReference(e,n,r){return this.Gr.removeReference(r,n),this.Hr.add(r.toString()),y.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),y.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(i=>this.Hr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Hr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return y.forEach(this.Hr,r=>{let i=M.fromPath(r);return this.Jr(e,i).next(s=>{s||n.removeEntry(i,V.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(r=>{r?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return y.or([()=>y.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}};var ay=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ki=r,this.qi=i}static Qi(e,n){let r=G(),i=G();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var cy=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var uy=class{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=function(){return kD()?8:jF(_t())>0?6:4}()}initialize(e,n){this.Gi=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.zi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ji(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new cy;return this.Hi(e,n,o).next(a=>{if(s.result=a,this.$i)return this.Ji(e,n,o,a.size)})}).next(()=>s.result)}Ji(e,n,r,i){return r.documentReadCount<this.Ui?(Jo()<=z.DEBUG&&D("QueryEngine","SDK will not create cache indexes for query:",os(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),y.resolve()):(Jo()<=z.DEBUG&&D("QueryEngine","Query:",os(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Wi*i?(Jo()<=z.DEBUG&&D("QueryEngine","The SDK decides to create cache indexes for query:",os(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,pn(n))):y.resolve())}zi(e,n){if(AT(n))return y.resolve(null);let r=pn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Nm(n,null,"F"),r=pn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=G(...s);return this.Gi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.Yi(n,a);return this.Zi(n,u,o,c.readTime)?this.zi(e,Nm(n,null,"F")):this.Xi(e,u,n,c)}))})))}ji(e,n,r,i){return AT(n)||i.isEqual(V.min())?y.resolve(null):this.Gi.getDocuments(e,r).next(s=>{let o=this.Yi(n,s);return this.Zi(n,o,r,i)?y.resolve(null):(Jo()<=z.DEBUG&&D("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),os(n)),this.Xi(e,o,n,FF(i,-1)).next(a=>a))})}Yi(e,n){let r=new Ze(r0(e));return n.forEach((i,s)=>{Hl(e,s)&&(r=r.add(s))}),r}Zi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Hi(e,n,r){return Jo()<=z.DEBUG&&D("QueryEngine","Using full collection scan to execute query:",os(n)),this.Gi.getDocumentsMatchingQuery(e,n,Qr.min(),r)}Xi(e,n,r,i){return this.Gi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var ly=class{constructor(e,n,r,i){this.persistence=e,this.es=n,this.serializer=i,this.ts=new De(re),this.ns=new ar(s=>Ky(s),Qy),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(r)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Jm(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ts))}};function MV(t,e,n,r){return new ly(t,e,n,r)}function D0(t,e){return p(this,null,function*(){let n=F(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.os(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=G();for(let u of i){o.push(u.batchId);for(let l of u.mutations)c=c.add(l.key)}for(let u of s){a.push(u.batchId);for(let l of u.mutations)c=c.add(l.key)}return n.localDocuments.getDocuments(r,c).next(u=>({_s:u,removedBatchIds:o,addedBatchIds:a}))})})})}function xV(t,e){let n=F(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.ss.newChangeBuffer({trackRemovals:!0});return function(a,c,u,l){let d=u.batch,h=d.keys(),f=y.resolve();return h.forEach(g=>{f=f.next(()=>l.getEntry(c,g)).next(v=>{let _=u.docVersions.get(g);pe(_!==null),v.version.compareTo(_)<0&&(d.applyToRemoteDocument(v,u),v.isValidDocument()&&(v.setReadTime(u.commitVersion),l.addEntry(v)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(c,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=G();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function C0(t){let e=F(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function NV(t,e){let n=F(t),r=e.snapshotVersion,i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;let a=[];e.targetChanges.forEach((l,d)=>{let h=i.get(d);if(!h)return;a.push(n.qr.removeMatchingKeys(s,l.removedDocuments,d).next(()=>n.qr.addMatchingKeys(s,l.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(st.EMPTY_BYTE_STRING,V.min()).withLastLimboFreeSnapshotVersion(V.min()):l.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(l.resumeToken,r)),i=i.insert(d,f),function(v,_,C){return v.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(h,f,l)&&a.push(n.qr.updateTargetData(s,f))});let c=Fn(),u=G();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,l))}),a.push(PV(s,o,e.documentUpdates).next(l=>{c=l.us,u=l.cs})),!r.isEqual(V.min())){let l=n.qr.getLastRemoteSnapshotVersion(s).next(d=>n.qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(l)}return y.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(n.ts=i,s))}function PV(t,e,n){let r=G(),i=G();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Fn();return n.forEach((a,c)=>{let u=s.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(V.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):D("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{us:o,cs:i}})}function OV(t,e){let n=F(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function kV(t,e){let n=F(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.qr.getTargetData(r,e).next(s=>s?(i=s,y.resolve(i)):n.qr.allocateTargetId(r).next(o=>(i=new aa(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ts.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ts=n.ts.insert(r.targetId,r),n.ns.set(e,r.targetId)),r})}function dy(t,e,n){return p(this,null,function*(){let r=F(t),i=r.ts.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!va(o))throw o;D("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ts=r.ts.remove(e),r.ns.delete(i.target)})}function UT(t,e,n){let r=F(t),i=V.min(),s=G();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,l){let d=F(c),h=d.ns.get(l);return h!==void 0?y.resolve(d.ts.get(h)):d.qr.getTargetData(u,l)}(r,o,pn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.es.getDocumentsMatchingQuery(o,e,n?i:V.min(),n?s:G())).next(a=>(FV(r,JF(e),a),{documents:a,ls:s})))}function FV(t,e,n){let r=t.rs.get(e)||V.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.rs.set(e,r)}var bl=class{constructor(){this.activeTargetIds=rV()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var hy=class{constructor(){this.eo=new bl,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,n,r){this.no[e]=n}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new bl,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var fy=class{ro(e){}shutdown(){}};var Sl=class{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){D("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ao)e(0)}_o(){D("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ao)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var ul=null;function am(){return ul===null?ul=function(){return 268435456+Math.round(2147483648*Math.random())}():ul++,"0x"+ul.toString(16)}var VV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var py=class{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}Eo(e){this.Ao=e}onMessage(e){this.Ro=e}close(){this.lo()}send(e){this.co(e)}Vo(){this.Po()}mo(){this.To()}fo(e){this.Ao(e)}po(e){this.Ro(e)}};var Je="WebChannelConnection",gy=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.yo=r+"://"+n.host,this.wo=`projects/${i}/databases/${s}`,this.So=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get bo(){return!1}Do(n,r,i,s,o){let a=am(),c=this.Co(n,r.toUriEncodedString());D("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);let u={"google-cloud-resource-prefix":this.wo,"x-goog-request-params":this.So};return this.vo(u,s,o),this.Fo(n,c,u,i).then(l=>(D("RestConnection",`Received RPC '${n}' ${a}: `,l),l),l=>{throw ds("RestConnection",`RPC '${n}' ${a} failed with error: `,l,"url: ",c,"request:",i),l})}Mo(n,r,i,s,o,a){return this.Do(n,r,i,s,o)}vo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ds}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}Co(n,r){let i=VV[n];return`${this.yo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Fo(e,n,r,i){let s=am();return new Promise((o,a)=>{let c=new vT;c.setWithCredentials(!0),c.listenOnce(gT.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case al.NO_ERROR:let l=c.getResponseJson();D(Je,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(l)),o(l);break;case al.TIMEOUT:D(Je,`RPC '${e}' ${s} timed out`),a(new R(m.DEADLINE_EXCEEDED,"Request time out"));break;case al.HTTP_ERROR:let d=c.getStatus();if(D(Je,`RPC '${e}' ${s} failed with status:`,d,"response text:",c.getResponseText()),d>0){let h=c.getResponseJson();Array.isArray(h)&&(h=h[0]);let f=h?.error;if(f&&f.status&&f.message){let g=function(_){let C=_.toLowerCase().replace(/_/g,"-");return Object.values(m).indexOf(C)>=0?C:m.UNKNOWN}(f.status);a(new R(g,f.message))}else a(new R(m.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new R(m.UNAVAILABLE,"Connection failed."));break;default:P()}}finally{D(Je,`RPC '${e}' ${s} completed.`)}});let u=JSON.stringify(i);D(Je,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",u,r,15)})}xo(e,n,r){let i=am(),s=[this.yo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=fT(),a=pT(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.xmlHttpFactory=new yT({})),this.vo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let l=s.join("");D(Je,`Creating RPC '${e}' stream ${i}: ${l}`,c);let d=o.createWebChannel(l,c),h=!1,f=!1,g=new py({co:_=>{f?D(Je,`Not sending because RPC '${e}' stream ${i} is closed:`,_):(h||(D(Je,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),D(Je,`RPC '${e}' stream ${i} sending:`,_),d.send(_))},lo:()=>d.close()}),v=(_,C,Y)=>{_.listen(C,$=>{try{Y($)}catch(he){setTimeout(()=>{throw he},0)}})};return v(d,Yo.EventType.OPEN,()=>{f||(D(Je,`RPC '${e}' stream ${i} transport opened.`),g.Vo())}),v(d,Yo.EventType.CLOSE,()=>{f||(f=!0,D(Je,`RPC '${e}' stream ${i} transport closed`),g.fo())}),v(d,Yo.EventType.ERROR,_=>{f||(f=!0,ds(Je,`RPC '${e}' stream ${i} transport errored:`,_),g.fo(new R(m.UNAVAILABLE,"The operation could not be completed")))}),v(d,Yo.EventType.MESSAGE,_=>{var C;if(!f){let Y=_.data[0];pe(!!Y);let $=Y,he=$.error||((C=$[0])===null||C===void 0?void 0:C.error);if(he){D(Je,`RPC '${e}' stream ${i} received error:`,he);let je=he.status,se=function(lr){let oi=Ae[lr];if(oi!==void 0)return g0(oi)}(je),Ke=he.message;se===void 0&&(se=m.INTERNAL,Ke="Unknown error status: "+je+" with message "+he.message),f=!0,g.fo(new R(se,Ke)),d.close()}else D(Je,`RPC '${e}' stream ${i} received:`,Y),g.po(Y)}}),v(a,mT.STAT_EVENT,_=>{_.stat===sm.PROXY?D(Je,`RPC '${e}' stream ${i} detected buffering proxy`):_.stat===sm.NOPROXY&&D(Je,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{g.mo()},0),g}};function cm(){return typeof document<"u"?document:null}function ql(t){return new Bm(t,!0)}var Al=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.si=e,this.timerId=n,this.Oo=r,this.No=i,this.Lo=s,this.Bo=0,this.ko=null,this.qo=Date.now(),this.reset()}reset(){this.Bo=0}Qo(){this.Bo=this.Lo}Ko(e){this.cancel();let n=Math.floor(this.Bo+this.$o()),r=Math.max(0,Date.now()-this.qo),i=Math.max(0,n-r);i>0&&D("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Bo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.ko=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.qo=Date.now(),e())),this.Bo*=this.No,this.Bo<this.Oo&&(this.Bo=this.Oo),this.Bo>this.Lo&&(this.Bo=this.Lo)}Uo(){this.ko!==null&&(this.ko.skipDelay(),this.ko=null)}cancel(){this.ko!==null&&(this.ko.cancel(),this.ko=null)}$o(){return(Math.random()-.5)*this.Bo}};var Rl=class{constructor(e,n,r,i,s,o,a,c){this.si=e,this.Wo=r,this.Go=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.zo=0,this.jo=null,this.Ho=null,this.stream=null,this.Jo=new Al(e,n)}Yo(){return this.state===1||this.state===5||this.Zo()}Zo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Xo()}stop(){return p(this,null,function*(){this.Yo()&&(yield this.close(0))})}e_(){this.state=0,this.Jo.reset()}t_(){this.Zo()&&this.jo===null&&(this.jo=this.si.enqueueAfterDelay(this.Wo,6e4,()=>this.n_()))}r_(e){this.i_(),this.stream.send(e)}n_(){return p(this,null,function*(){if(this.Zo())return this.close(0)})}i_(){this.jo&&(this.jo.cancel(),this.jo=null)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}close(e,n){return p(this,null,function*(){this.i_(),this.s_(),this.Jo.cancel(),this.zo++,e!==4?this.Jo.reset():n&&n.code===m.RESOURCE_EXHAUSTED?(On(n.toString()),On("Using maximum backoff delay to prevent overloading the backend."),this.Jo.Qo()):n&&n.code===m.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.o_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Eo(n)})}o_(){}auth(){this.state=1;let e=this.__(this.zo),n=this.zo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.zo===n&&this.a_(r,i)},r=>{e(()=>{let i=new R(m.UNKNOWN,"Fetching auth token failed: "+r.message);return this.u_(i)})})}a_(e,n){let r=this.__(this.zo);this.stream=this.c_(e,n),this.stream.ho(()=>{r(()=>this.listener.ho())}),this.stream.Io(()=>{r(()=>(this.state=2,this.Ho=this.si.enqueueAfterDelay(this.Go,1e4,()=>(this.Zo()&&(this.state=3),Promise.resolve())),this.listener.Io()))}),this.stream.Eo(i=>{r(()=>this.u_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Xo(){this.state=5,this.Jo.Ko(()=>p(this,null,function*(){this.state=0,this.start()}))}u_(e){return D("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}__(e){return n=>{this.si.enqueueAndForget(()=>this.zo===e?n():(D("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},my=class extends Rl{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}c_(e,n){return this.connection.xo("Listen",e,n)}onMessage(e){this.Jo.reset();let n=vV(this.serializer,e),r=function(s){if(!("targetChange"in s))return V.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?V.min():o.readTime?gn(o.readTime):V.min()}(e);return this.listener.l_(n,r)}h_(e){let n={};n.database=zm(this.serializer),n.addTarget=function(s,o){let a,c=o.target;if(a=xm(c)?{documents:wV(s,c)}:{query:EV(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=m0(s,o.resumeToken);let u=$m(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(V.min())>0){a.readTime=Cl(s,o.snapshotVersion.toTimestamp());let u=$m(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let r=CV(this.serializer,e);r&&(n.labels=r),this.r_(n)}P_(e){let n={};n.database=zm(this.serializer),n.removeTarget=e,this.r_(n)}},yy=class extends Rl{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.I_=!1}get T_(){return this.I_}start(){this.I_=!1,this.lastStreamToken=void 0,super.start()}o_(){this.I_&&this.E_([])}c_(e,n){return this.connection.xo("Write",e,n)}onMessage(e){if(pe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.I_){this.Jo.reset();let n=IV(e.writeResults,e.commitTime),r=gn(e.commitTime);return this.listener.d_(r,n)}return pe(!e.writeResults||e.writeResults.length===0),this.I_=!0,this.listener.A_()}R_(){let e={};e.database=zm(this.serializer),this.r_(e)}E_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>_V(this.serializer,r))};this.r_(n)}};var vy=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.V_=!1}m_(){if(this.V_)throw new R(m.FAILED_PRECONDITION,"The client has already been terminated.")}Do(e,n,r,i){return this.m_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Do(e,Hm(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===m.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new R(m.UNKNOWN,s.toString())})}Mo(e,n,r,i,s){return this.m_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Mo(e,Hm(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===m.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new R(m.UNKNOWN,o.toString())})}terminate(){this.V_=!0,this.connection.terminate()}};var _y=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(On(n),this.y_=!1):D("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var Iy=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.ro(o=>{r.enqueueAndForget(()=>p(this,null,function*(){ei(this)&&(D("RemoteStore","Restarting streams for network reachability change."),yield function(c){return p(this,null,function*(){let u=F(c);u.M_.add(4),yield _a(u),u.N_.set("Unknown"),u.M_.delete(4),yield zl(u)})}(this))}))}),this.N_=new _y(r,i)}};function zl(t){return p(this,null,function*(){if(ei(t))for(let e of t.x_)yield e(!0)})}function _a(t){return p(this,null,function*(){for(let e of t.x_)yield e(!1)})}function T0(t,e){let n=F(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),tv(n)?ev(n):Ts(n).Zo()&&Xy(n,e))}function Zy(t,e){let n=F(t),r=Ts(n);n.F_.delete(e),r.Zo()&&b0(n,e),n.F_.size===0&&(r.Zo()?r.t_():ei(n)&&n.N_.set("Unknown"))}function Xy(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(V.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ts(t).h_(e)}function b0(t,e){t.L_.xe(e),Ts(t).P_(e)}function ev(t){t.L_=new jm({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ts(t).start(),t.N_.w_()}function tv(t){return ei(t)&&!Ts(t).Yo()&&t.F_.size>0}function ei(t){return F(t).M_.size===0}function S0(t){t.L_=void 0}function LV(t){return p(this,null,function*(){t.N_.set("Online")})}function UV(t){return p(this,null,function*(){t.F_.forEach((e,n)=>{Xy(t,e)})})}function jV(t,e){return p(this,null,function*(){S0(t),tv(t)?(t.N_.D_(e),ev(t)):t.N_.set("Unknown")})}function BV(t,e,n){return p(this,null,function*(){if(t.N_.set("Online"),e instanceof El&&e.state===2&&e.cause)try{yield function(i,s){return p(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.F_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))})}(t,e)}catch(r){D("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Ml(t,r)}else if(e instanceof ls?t.L_.Ke(e):e instanceof wl?t.L_.He(e):t.L_.We(e),!n.isEqual(V.min()))try{let r=yield C0(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.L_.rt(o);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let l=s.F_.get(u);l&&s.F_.set(u,l.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,u)=>{let l=s.F_.get(c);if(!l)return;s.F_.set(c,l.withResumeToken(st.EMPTY_BYTE_STRING,l.snapshotVersion)),b0(s,c);let d=new aa(l.target,c,u,l.sequenceNumber);Xy(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){D("RemoteStore","Failed to raise snapshot:",r),yield Ml(t,r)}})}function Ml(t,e,n){return p(this,null,function*(){if(!va(e))throw e;t.M_.add(1),yield _a(t),t.N_.set("Offline"),n||(n=()=>C0(t.localStore)),t.asyncQueue.enqueueRetryable(()=>p(this,null,function*(){D("RemoteStore","Retrying IndexedDB access"),yield n(),t.M_.delete(1),yield zl(t)}))})}function A0(t,e){return e().catch(n=>Ml(t,n,e))}function Gl(t){return p(this,null,function*(){let e=F(t),n=cr(e),r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;$V(e);)try{let i=yield OV(e.localStore,r);if(i===null){e.v_.length===0&&n.t_();break}r=i.batchId,HV(e,i)}catch(i){yield Ml(e,i)}R0(e)&&M0(e)})}function $V(t){return ei(t)&&t.v_.length<10}function HV(t,e){t.v_.push(e);let n=cr(t);n.Zo()&&n.T_&&n.E_(e.mutations)}function R0(t){return ei(t)&&!cr(t).Yo()&&t.v_.length>0}function M0(t){cr(t).start()}function qV(t){return p(this,null,function*(){cr(t).R_()})}function zV(t){return p(this,null,function*(){let e=cr(t);for(let n of t.v_)e.E_(n.mutations)})}function GV(t,e,n){return p(this,null,function*(){let r=t.v_.shift(),i=Fm.from(r,e,n);yield A0(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Gl(t)})}function WV(t,e){return p(this,null,function*(){e&&cr(t).T_&&(yield function(r,i){return p(this,null,function*(){if(function(o){return lV(o)&&o!==m.ABORTED}(i.code)){let s=r.v_.shift();cr(r).e_(),yield A0(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield Gl(r)}})}(t,e)),R0(t)&&M0(t)})}function jT(t,e){return p(this,null,function*(){let n=F(t);n.asyncQueue.verifyOperationInProgress(),D("RemoteStore","RemoteStore received new credentials");let r=ei(n);n.M_.add(3),yield _a(n),r&&n.N_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),yield zl(n)})}function KV(t,e){return p(this,null,function*(){let n=F(t);e?(n.M_.delete(2),yield zl(n)):e||(n.M_.add(2),yield _a(n),n.N_.set("Unknown"))})}function Ts(t){return t.B_||(t.B_=function(n,r,i){let s=F(n);return s.m_(),new my(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{ho:LV.bind(null,t),Io:UV.bind(null,t),Eo:jV.bind(null,t),l_:BV.bind(null,t)}),t.x_.push(e=>p(this,null,function*(){e?(t.B_.e_(),tv(t)?ev(t):t.N_.set("Unknown")):(yield t.B_.stop(),S0(t))}))),t.B_}function cr(t){return t.k_||(t.k_=function(n,r,i){let s=F(n);return s.m_(),new yy(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{ho:()=>Promise.resolve(),Io:qV.bind(null,t),Eo:WV.bind(null,t),A_:zV.bind(null,t),d_:GV.bind(null,t)}),t.x_.push(e=>p(this,null,function*(){e?(t.k_.e_(),yield Gl(t)):(yield t.k_.stop(),t.v_.length>0&&(D("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))}))),t.k_}var wy=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new hn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new R(m.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function nv(t,e){if(On("AsyncQueue",`${e}: ${t}`),va(t))return new R(m.UNAVAILABLE,`${e}: ${t}`);throw t}var xl=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||M.comparator(n.key,r.key):(n,r)=>M.comparator(n.key,r.key),this.keyedMap=Zo(),this.sortedSet=new De(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Nl=class{constructor(){this.q_=new De(M.comparator)}track(e){let n=e.doc.key,r=this.q_.get(n);r?e.type!==0&&r.type===3?this.q_=this.q_.insert(n,e):e.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.q_=this.q_.remove(n):e.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):P():this.q_=this.q_.insert(n,e)}Q_(){let e=[];return this.q_.inorderTraversal((n,r)=>{e.push(r)}),e}},Es=class t{constructor(e,n,r,i,s,o,a,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,xl.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$l(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var Ey=class{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}},Dy=class{constructor(){this.queries=new ar(e=>n0(e),$l),this.onlineState="Unknown",this.z_=new Set}};function QV(t,e){return p(this,null,function*(){let n=F(t),r=3,i=e.query,s=n.queries.get(i);s?!s.W_()&&e.G_()&&(r=2):(s=new Ey,r=e.G_()?0:1);try{switch(r){case 0:s.K_=yield n.onListen(i,!0);break;case 1:s.K_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){let a=nv(o,`Initialization of query '${os(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.U_.push(e),e.j_(n.onlineState),s.K_&&e.H_(s.K_)&&rv(n)})}function YV(t,e){return p(this,null,function*(){let n=F(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=e.G_()?0:1:!s.W_()&&e.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function JV(t,e){let n=F(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&rv(n)}function ZV(t,e,n){let r=F(t),i=r.queries.get(e);if(i)for(let s of i.U_)s.onError(n);r.queries.delete(e)}function rv(t){t.z_.forEach(e=>{e.next()})}var Cy,BT;(BT=Cy||(Cy={})).J_="default",BT.Cache="cache";var Ty=class{constructor(e,n,r){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Es(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;let r=n!=="Offline";return(!this.options.ra||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;let n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=Es.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==Cy.Cache}};var Pl=class{constructor(e){this.key=e}},Ol=class{constructor(e){this.key=e}},by=class{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=G(),this.mutatedKeys=G(),this.Ia=r0(e),this.Ta=new xl(this.Ia)}get Ea(){return this.la}da(e,n){let r=n?n.Aa:new Nl,i=n?n.Ta:this.Ta,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,d)=>{let h=i.get(l),f=Hl(this.query,d)?d:null,g=!!h&&this.mutatedKeys.has(h.key),v=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations),_=!1;h&&f?h.data.isEqual(f.data)?g!==v&&(r.track({type:3,doc:f}),_=!0):this.Ra(h,f)||(r.track({type:2,doc:f}),_=!0,(c&&this.Ia(f,c)>0||u&&this.Ia(f,u)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),_=!0):h&&!f&&(r.track({type:1,doc:h}),_=!0,(c||u)&&(a=!0)),_&&(f?(o=o.add(f),s=v?s.add(l):s.delete(l)):(o=o.delete(l),s=s.delete(l)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let l=this.query.limitType==="F"?o.last():o.first();o=o.delete(l.key),s=s.delete(l.key),r.track({type:1,doc:l})}return{Ta:o,Aa:r,Zi:a,mutatedKeys:s}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;let o=e.Aa.Q_();o.sort((l,d)=>function(f,g){let v=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return P()}};return v(f)-v(g)}(l.type,d.type)||this.Ia(l.doc,d.doc)),this.Va(r),i=i!=null&&i;let a=n&&!i?this.ma():[],c=this.Pa.size===0&&this.current&&!i?1:0,u=c!==this.ha;return this.ha=c,o.length!==0||u?{snapshot:new Es(this.query,e.Ta,s,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Nl,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];let e=this.Pa;this.Pa=G(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});let n=[];return e.forEach(r=>{this.Pa.has(r)||n.push(new Ol(r))}),this.Pa.forEach(r=>{e.has(r)||n.push(new Pl(r))}),n}pa(e){this.la=e.ls,this.Pa=G();let n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return Es.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}},Sy=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},Ay=class{constructor(e){this.key=e,this.wa=!1}},Ry=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new ar(a=>n0(a),$l),this.Da=new Map,this.Ca=new Set,this.va=new De(M.comparator),this.Fa=new Map,this.Ma=new ua,this.xa={},this.Oa=new Map,this.Na=ca.Nn(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function XV(t,e,n=!0){return p(this,null,function*(){let r=F0(t),i,s=r.ba.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=yield x0(r,e,n,!0),i})}function eL(t,e){return p(this,null,function*(){let n=F0(t);yield x0(n,e,!0,!1)})}function x0(t,e,n,r){return p(this,null,function*(){let i=yield kV(t.localStore,pn(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current",a;return r&&(a=yield tL(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&T0(t.remoteStore,i),a})}function tL(t,e,n,r,i){return p(this,null,function*(){t.Ba=(d,h,f)=>function(v,_,C,Y){return p(this,null,function*(){let $=_.view.da(C);$.Zi&&($=yield UT(v.localStore,_.query,!1).then(({documents:Ke})=>_.view.da(Ke,$)));let he=Y&&Y.targetChanges.get(_.targetId),je=Y&&Y.targetMismatches.get(_.targetId)!=null,se=_.view.applyChanges($,v.isPrimaryClient,he,je);return HT(v,_.targetId,se.fa),se.snapshot})}(t,d,h,f);let s=yield UT(t.localStore,e,!0),o=new by(e,s.ls),a=o.da(s.documents),c=oa.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,c);HT(t,n,u.fa);let l=new Sy(e,n,o);return t.ba.set(e,l),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),u.snapshot})}function nL(t,e,n){return p(this,null,function*(){let r=F(t),i=r.ba.get(e),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!$l(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield dy(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Zy(r.remoteStore,i.targetId),My(r,i.targetId)}).catch(ya))):(My(r,i.targetId),yield dy(r.localStore,i.targetId,!0))})}function rL(t,e){return p(this,null,function*(){let n=F(t),r=n.ba.get(e),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Zy(n.remoteStore,r.targetId))})}function iL(t,e,n){return p(this,null,function*(){let r=dL(t);try{let i=yield function(o,a){let c=F(o),u=We.now(),l=a.reduce((f,g)=>f.add(g.key),G()),d,h;return c.persistence.runTransaction("Locally write mutations","readwrite",f=>{let g=Fn(),v=G();return c.ss.getEntries(f,l).next(_=>{g=_,g.forEach((C,Y)=>{Y.isValidDocument()||(v=v.add(C))})}).next(()=>c.localDocuments.getOverlayedDocuments(f,g)).next(_=>{d=_;let C=[];for(let Y of a){let $=uV(Y,d.get(Y.key).overlayedDocument);$!=null&&C.push(new Vn(Y.key,$,YT($.value.mapValue),Wr.exists(!0)))}return c.mutationQueue.addMutationBatch(f,u,C,a)}).next(_=>{h=_;let C=_.applyToLocalDocumentSet(d,v);return c.documentOverlayCache.saveOverlays(f,_.batchId,C)})}).then(()=>({batchId:h.batchId,changes:s0(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let u=o.xa[o.currentUser.toKey()];u||(u=new De(re)),u=u.insert(a,c),o.xa[o.currentUser.toKey()]=u}(r,i.batchId,n),yield Ia(r,i.changes),yield Gl(r.remoteStore)}catch(i){let s=nv(i,"Failed to persist write");n.reject(s)}})}function N0(t,e){return p(this,null,function*(){let n=F(t);try{let r=yield NV(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Fa.get(s);o&&(pe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?pe(o.wa):i.removedDocuments.size>0&&(pe(o.wa),o.wa=!1))}),yield Ia(n,r,e)}catch(r){yield ya(r)}})}function $T(t,e,n){let r=F(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.ba.forEach((s,o)=>{let a=o.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=F(o);c.onlineState=a;let u=!1;c.queries.forEach((l,d)=>{for(let h of d.U_)h.j_(a)&&(u=!0)}),u&&rv(c)}(r.eventManager,e),i.length&&r.Sa.l_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function sL(t,e,n){return p(this,null,function*(){let r=F(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Fa.get(e),s=i&&i.key;if(s){let o=new De(M.comparator);o=o.insert(s,qt.newNoDocument(s,V.min()));let a=G().add(s),c=new Il(V.min(),new Map,new De(re),o,a);yield N0(r,c),r.va=r.va.remove(s),r.Fa.delete(e),iv(r)}else yield dy(r.localStore,e,!1).then(()=>My(r,e,n)).catch(ya)})}function oL(t,e){return p(this,null,function*(){let n=F(t),r=e.batch.batchId;try{let i=yield xV(n.localStore,e);O0(n,r,null),P0(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Ia(n,i)}catch(i){yield ya(i)}})}function aL(t,e,n){return p(this,null,function*(){let r=F(t);try{let i=yield function(o,a){let c=F(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let l;return c.mutationQueue.lookupMutationBatch(u,a).next(d=>(pe(d!==null),l=d.keys(),c.mutationQueue.removeMutationBatch(u,d))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,l,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,l)).next(()=>c.localDocuments.getDocuments(u,l))})}(r.localStore,e);O0(r,e,n),P0(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Ia(r,i)}catch(i){yield ya(i)}})}function P0(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function O0(t,e,n){let r=F(t),i=r.xa[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function My(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Da.get(e))t.ba.delete(r),n&&t.Sa.ka(r,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Rr(e).forEach(r=>{t.Ma.containsKey(r)||k0(t,r)})}function k0(t,e){t.Ca.delete(e.path.canonicalString());let n=t.va.get(e);n!==null&&(Zy(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),iv(t))}function HT(t,e,n){for(let r of n)r instanceof Pl?(t.Ma.addReference(r.key,e),cL(t,r)):r instanceof Ol?(D("SyncEngine","Document no longer in limbo: "+r.key),t.Ma.removeReference(r.key,e),t.Ma.containsKey(r.key)||k0(t,r.key)):P()}function cL(t,e){let n=e.key,r=n.path.canonicalString();t.va.get(n)||t.Ca.has(r)||(D("SyncEngine","New document in limbo: "+n),t.Ca.add(r),iv(t))}function iv(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){let e=t.Ca.values().next().value;t.Ca.delete(e);let n=new M(Me.fromString(e)),r=t.Na.next();t.Fa.set(r,new Ay(n)),t.va=t.va.insert(n,r),T0(t.remoteStore,new aa(pn(Yy(n.path)),r,"TargetPurposeLimboResolution",WT.oe))}}function Ia(t,e,n){return p(this,null,function*(){let r=F(t),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,c)=>{o.push(r.Ba(c,e,n).then(u=>{if((u||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,u?.fromCache?"not-current":"current"),u){i.push(u);let l=ay.Qi(c.targetId,u);s.push(l)}}))}),yield Promise.all(o),r.Sa.l_(i),yield function(c,u){return p(this,null,function*(){let l=F(c);try{yield l.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>y.forEach(u,h=>y.forEach(h.ki,f=>l.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>y.forEach(h.qi,f=>l.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!va(d))throw d;D("LocalStore","Failed to update sequence numbers: "+d)}for(let d of u){let h=d.targetId;if(!d.fromCache){let f=l.ts.get(h),g=f.snapshotVersion,v=f.withLastLimboFreeSnapshotVersion(g);l.ts=l.ts.insert(h,v)}}})}(r.localStore,s))})}function uL(t,e){return p(this,null,function*(){let n=F(t);if(!n.currentUser.isEqual(e)){D("SyncEngine","User change. New user:",e.toKey());let r=yield D0(n.localStore,e);n.currentUser=e,function(s,o){s.Oa.forEach(a=>{a.forEach(c=>{c.reject(new R(m.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ia(n,r._s)}})}function lL(t,e){let n=F(t),r=n.Fa.get(e);if(r&&r.wa)return G().add(r.key);{let i=G(),s=n.Da.get(e);if(!s)return i;for(let o of s){let a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function F0(t){let e=F(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=N0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=sL.bind(null,e),e.Sa.l_=JV.bind(null,e.eventManager),e.Sa.ka=ZV.bind(null,e.eventManager),e}function dL(t){let e=F(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=oL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=aL.bind(null,e),e}var kl=class{constructor(){this.synchronizeTabs=!1}initialize(e){return p(this,null,function*(){this.serializer=ql(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return MV(this.persistence,new uy,e.initialUser,this.serializer)}createPersistence(e){return new iy(oy.jr,this.serializer)}createSharedClientState(e){return new hy}terminate(){return p(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var xy=class{initialize(e,n){return p(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>$T(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=uL.bind(null,this.syncEngine),yield KV(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new Dy}()}createDatastore(e){let n=ql(e.databaseInfo.databaseId),r=function(s){return new gy(s)}(e.databaseInfo);return function(s,o,a,c){return new vy(s,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new Iy(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>$T(this.syncEngine,n,0),function(){return Sl.D()?new Sl:new fy}())}createSyncEngine(e,n){return function(i,s,o,a,c,u,l){let d=new Ry(i,s,o,a,c,u);return l&&(d.La=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return p(this,null,function*(){var e;yield function(r){return p(this,null,function*(){let i=F(r);D("RemoteStore","RemoteStore shutting down."),i.M_.add(5),yield _a(i),i.O_.shutdown(),i.N_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};var Ny=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):On("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var Py=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ue.UNAUTHENTICATED,this.clientId=fl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>p(this,null,function*(){D("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(D("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new R(m.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new hn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>p(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=nv(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function um(t,e){return p(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),D("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>p(this,null,function*(){r.isEqual(i)||(yield D0(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function qT(t,e){return p(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield fL(t);D("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>jT(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>jT(e.remoteStore,i)),t._onlineComponents=e})}function hL(t){return t.name==="FirebaseError"?t.code===m.FAILED_PRECONDITION||t.code===m.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function fL(t){return p(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){D("FirestoreClient","Using user provided OfflineComponentProvider");try{yield um(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!hL(n))throw n;ds("Error using user provided cache. Falling back to memory cache: "+n),yield um(t,new kl)}}else D("FirestoreClient","Using default OfflineComponentProvider"),yield um(t,new kl);return t._offlineComponents})}function V0(t){return p(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(D("FirestoreClient","Using user provided OnlineComponentProvider"),yield qT(t,t._uninitializedComponentsProvider._online)):(D("FirestoreClient","Using default OnlineComponentProvider"),yield qT(t,new xy))),t._onlineComponents})}function pL(t){return V0(t).then(e=>e.syncEngine)}function gL(t){return p(this,null,function*(){let e=yield V0(t),n=e.eventManager;return n.onListen=XV.bind(null,e.syncEngine),n.onUnlisten=nL.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=eL.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=rL.bind(null,e.syncEngine),n})}function mL(t,e,n={}){let r=new hn;return t.asyncQueue.enqueueAndForget(()=>p(this,null,function*(){return function(s,o,a,c,u){let l=new Ny({next:h=>{o.enqueueAndForget(()=>YV(s,d));let f=h.docs.has(a);!f&&h.fromCache?u.reject(new R(m.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&c&&c.source==="server"?u.reject(new R(m.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(h)},error:h=>u.reject(h)}),d=new Ty(Yy(a.path),l,{includeMetadataChanges:!0,ra:!0});return QV(s,d)}(yield gL(t),t.asyncQueue,e,n,r)})),r.promise}function L0(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var zT=new Map;function yL(t,e,n){if(!n)throw new R(m.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function vL(t,e,n,r){if(e===!0&&r===!0)throw new R(m.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function GT(t){if(!M.isDocumentKey(t))throw new R(m.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function sv(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":P()}function la(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new R(m.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=sv(t);throw new R(m.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var Fl=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new R(m.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new R(m.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}vL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=L0((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new R(m.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new R(m.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new R(m.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},da=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Fl({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new R(m.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new R(m.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Fl(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new lm;switch(r.type){case"firstParty":return new pm(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new R(m.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=zT.get(n);r&&(D("ComponentProvider","Removing Datastore"),zT.delete(n),r.terminate())}(this),Promise.resolve()}};function U0(t,e,n,r={}){var i;let s=(t=la(t,da))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&ds("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=Ue.MOCK_USER;else{a=xD(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new R(m.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Ue(u)}t._authCredentials=new dm(new hl(a,c))}}var Oy=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Pt=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ha(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},ha=class t extends Oy{constructor(e,n,r){super(e,n,Yy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Pt(this.firestore,null,new M(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function Wl(t,e,...n){if(t=sn(t),arguments.length===1&&(e=fl.newId()),yL("doc","path",e),t instanceof da){let r=Me.fromString(e,...n);return GT(r),new Pt(t,null,new M(r))}{if(!(t instanceof Pt||t instanceof ha))throw new R(m.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Me.fromString(e,...n));return GT(r),new Pt(t.firestore,t instanceof ha?t.converter:null,new M(r))}}var ky=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Jo=new Al(this,"async_queue_retry"),this.hu=()=>{let n=cm();n&&D("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Jo.Uo()};let e=cm();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let n=cm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let n=new hn;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){return p(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Jo.reset()}catch(e){if(!va(e))throw e;D("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Jo.Ko(()=>this.Tu())}})}Iu(e){let n=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw On("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(e,n,r){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);let i=wy.createAndSchedule(this,e,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&P()}verifyOperationInProgress(){}du(){return p(this,null,function*(){let e;do e=this.iu,yield e;while(e!==this.iu)})}Au(e){for(let n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let n=this._u.indexOf(e);this._u.splice(n,1)}};var fa=class extends da{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new ky}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||$0(this),this._firestoreClient.terminate()}};function j0(t,e){let n=typeof t=="object"?t:So(),r=typeof t=="string"?t:e||"(default)",i=pg(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=RD("firestore");s&&U0(i,...s)}return i}function B0(t){return t._firestoreClient||$0(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function $0(t){var e,n,r;let i=t._freezeSettings(),s=function(a,c,u,l){return new _m(a,c,u,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,L0(l.experimentalLongPollingOptions),l.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new Py(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var pa=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(st.fromBase64String(e))}catch(n){throw new R(m.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(st.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var ga=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new R(m.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Vl=class{constructor(e){this._methodName=e}};var ma=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new R(m.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new R(m.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return re(this._lat,e._lat)||re(this._long,e._long)}};var _L=/^__.*__$/,Fy=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Vn(e,this.data,this.fieldMask,n,this.fieldTransforms):new Xr(e,this.data,n,this.fieldTransforms)}};function H0(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw P()}}var Vy=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return Ll(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(H0(this.fu)&&_L.test(e))throw this.Du('Document fields cannot begin and end with "__"')}},Ly=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ql(e)}Fu(e,n,r,i=!1){return new Vy({fu:e,methodName:n,vu:r,path:wt.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function IL(t){let e=t._freezeSettings(),n=ql(t._databaseId);return new Ly(t._databaseId,!!e.ignoreUndefinedProperties,n)}function wL(t,e,n,r,i,s={}){let o=t.Fu(s.merge||s.mergeFields?2:0,e,n,i);W0("Data must be an object, but it was:",o,r);let a=z0(r,o),c,u;if(s.merge)c=new dn(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){let l=[];for(let d of s.mergeFields){let h=EL(e,d,n);if(!o.contains(h))throw new R(m.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);CL(l,h)||l.push(h)}c=new dn(l),u=o.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,u=o.fieldTransforms;return new Fy(new Ht(a),c,u)}function q0(t,e){if(G0(t=sn(t)))return W0("Unsupported field value:",e,t),z0(t,e);if(t instanceof Vl)return function(r,i){if(!H0(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=q0(a,i.bu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=sn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return iV(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=We.fromDate(r);return{timestampValue:Cl(i.serializer,s)}}if(r instanceof We){let s=new We(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Cl(i.serializer,s)}}if(r instanceof ma)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof pa)return{bytesValue:m0(i.serializer,r._byteString)};if(r instanceof Pt){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Jy(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${sv(r)}`)}(t,e)}function z0(t,e){let n={};return KT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Cs(t,(r,i)=>{let s=q0(i,e.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function G0(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof We||t instanceof ma||t instanceof pa||t instanceof Pt||t instanceof Vl)}function W0(t,e,n){if(!G0(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=sv(n);throw r==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+r)}}function EL(t,e,n){if((e=sn(e))instanceof ga)return e._internalPath;if(typeof e=="string")return K0(t,e);throw Ll("Field path arguments must be of type string or ",t,!1,void 0,n)}var DL=new RegExp("[~\\*/\\[\\]]");function K0(t,e,n){if(e.search(DL)>=0)throw Ll(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ga(...e.split("."))._internalPath}catch{throw Ll(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Ll(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new R(m.INVALID_ARGUMENT,a+t+c)}function CL(t,e){return t.some(n=>n.isEqual(e))}var Ul=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Uy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(Q0("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},Uy=class extends Ul{data(){return super.data()}};function Q0(t,e){return typeof e=="string"?K0(t,e):e instanceof ga?e._internalPath:e._delegate._internalPath}var jy=class{convertValue(e,n="none"){switch(Yr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ee(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(or(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw P()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Cs(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new ma(Ee(e.latitude),Ee(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Gy(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ia(e));default:return null}}convertTimestamp(e){let n=kn(e);return new We(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Me.fromString(e);pe(E0(r));let i=new yl(r.get(1),r.get(3)),s=new M(r.popFirst(5));return i.isEqual(n)||On(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function TL(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var By=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},jl=class extends Ul{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new $y(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(Q0("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},$y=class extends jl{data(e={}){return super.data(e)}};function ov(t){t=la(t,Pt);let e=la(t.firestore,fa);return mL(B0(e),t._key).then(n=>SL(e,t,n))}var Hy=class extends jy{constructor(e){super(),this.firestore=e}convertBytes(e){return new pa(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Pt(this.firestore,null,n)}};function av(t,e,n){t=la(t,Pt);let r=la(t.firestore,fa),i=TL(t.converter,e,n);return bL(r,[wL(IL(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Wr.none())])}function bL(t,e){return function(r,i){let s=new hn;return r.asyncQueue.enqueueAndForget(()=>p(this,null,function*(){return iL(yield pL(r),i,s)})),s.promise}(B0(t),e)}function SL(t,e,n){let r=n.docs.get(e._key),i=new Hy(t);return new jl(t,i,e._key,r,new By(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Ds=i})(Xi),rr(new xt("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new fa(new hm(r.getProvider("auth-internal")),new mm(r.getProvider("app-check-internal")),function(u,l){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new R(m.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new yl(u.options.projectId,l)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Fe(IT,"4.6.1",e),Fe(IT,"4.6.1","esm2017")})();var AL="firebase",RL="10.11.1";Fe(AL,RL,"app");var Ss=new Dn("ANGULARFIRE2_VERSION");function uv(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var Ea=(t,e)=>{let n=e?[e]:Nu(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},wa=class{constructor(){return Ea(ML)}},ML="app-check";function bs(){}var Kl=class{zone;delegate;constructor(e,n=Md){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},cv=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",bs,{},bs,bs)),n.pipe(xe({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Da=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Kl(Zone.current)),this.insideAngular=n.run(()=>new Kl(Zone.current,Rd)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(A(ne))};static \u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Ql(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function xL(t){return Ql().ngZone.runOutsideAngular(()=>t())}function ti(t){return Ql().ngZone.run(()=>t())}function NL(t){return PL(Ql())(t)}function PL(t){return function(n){return n=n.lift(new cv(t.ngZone)),n.pipe(jn(t.outsideAngular),Un(t.insideAngular))}}var OL=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),ti(()=>t.apply(void 0,r))},Ca=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=ti(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",bs,{},bs,bs))),r[s]=OL(r[s],n));let i=xL(()=>t.apply(this,r));if(!e)if(i instanceof J){let s=Ql();return i.pipe(jn(s.outsideAngular),Un(s.insideAngular))}else return ti(()=>i);return i instanceof J?i.pipe(NL):i instanceof Promise?ti(()=>new Promise((s,o)=>i.then(a=>ti(()=>s(a)),a=>ti(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:ti(()=>i)};var ni=class{constructor(e){return e}},Ta=class{constructor(){return Nu()}};function kL(t){return t&&t.length===1?t[0]:new ni(So())}var lv=new b("angularfire2._apps"),FL={provide:ni,useFactory:kL,deps:[[new bt,lv]]},VL={provide:Ta,deps:[[new bt,lv]]};function LL(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new ni(r)}}var UL=(()=>{class t{constructor(n){Fe("angularfire",Ss.full,"core"),Fe("angularfire",Ss.full,"app"),Fe("angular",Zw.full,n.toString())}static \u0275fac=function(r){return new(r||t)(A(en))};static \u0275mod=Oe({type:t});static \u0275inj=Pe({providers:[FL,VL]})}return t})();function Y0(t,...e){return{ngModule:UL,providers:[{provide:lv,useFactory:LL(t),multi:!0,deps:[ne,nt,Da,...e]}]}}var J0=Ca(gg,!0);function sb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var ob=sb,ab=new xn("auth","Firebase",sb());var Xl=new tr("@firebase/auth");function jL(t,...e){Xl.logLevel<=z.WARN&&Xl.warn(`Auth (${Xi}): ${t}`,...e)}function Jl(t,...e){Xl.logLevel<=z.ERROR&&Xl.error(`Auth (${Xi}): ${t}`,...e)}function Z0(t,...e){throw Ev(t,...e)}function wv(t,...e){return Ev(t,...e)}function cb(t,e,n){let r=Object.assign(Object.assign({},ob()),{[e]:n});return new xn("auth","Firebase",r).create(e,{appName:t.name})}function Zl(t){return cb(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ev(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return ab.create(t,...e)}function ie(t,e,...n){if(!t)throw Ev(e,...n)}function ba(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Jl(e),new Error(e)}function ed(t,e){t||ba(e)}function BL(){return X0()==="http:"||X0()==="https:"}function X0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function $L(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(BL()||PD()||"connection"in navigator)?navigator.onLine:!0}function HL(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var ii=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,ed(n>e,"Short delay should be less than long delay!"),this.isMobile=ND()||OD()}get(){return $L()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function qL(t,e){ed(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var td=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ba("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ba("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ba("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var zL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var GL=new ii(3e4,6e4);function ub(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function sd(s,o,a,c){return p(this,arguments,function*(t,e,n,r,i={}){return lb(t,i,()=>p(this,null,function*(){let u={},l={};r&&(e==="GET"?l=r:u={body:JSON.stringify(r)});let d=Xp(Object.assign({key:t.config.apiKey},l)).slice(1),h=yield t._getAdditionalHeaders();return h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode),td.fetch()(db(t,t.config.apiHost,n,d),Object.assign({method:e,headers:h,referrerPolicy:"no-referrer"},u))}))})}function lb(t,e,n){return p(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},zL),e);try{let i=new fv(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Yl(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Yl(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Yl(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Yl(t,"user-disabled",o);let l=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw cb(t,l,u);Z0(t,l)}}catch(i){if(i instanceof Mt)throw i;Z0(t,"network-request-failed",{message:String(i)})}})}function db(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?qL(t.config,i):`${t.config.apiScheme}://${i}`}var fv=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(wv(this.auth,"network-request-failed")),GL.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Yl(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=wv(t,e,r);return i.customData._tokenResponse=n,i}function WL(t,e){return p(this,null,function*(){return sd(t,"POST","/v1/accounts:delete",e)})}function hb(t,e){return p(this,null,function*(){return sd(t,"POST","/v1/accounts:lookup",e)})}function Sa(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Dv(t,e=!1){return p(this,null,function*(){let n=sn(t),r=yield n.getIdToken(e),i=fb(r);ie(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Sa(dv(i.auth_time)),issuedAtTime:Sa(dv(i.iat)),expirationTime:Sa(dv(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function dv(t){return Number(t)*1e3}function fb(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Jl("JWT malformed, contained fewer than 3 sections"),null;try{let i=Yp(n);return i?JSON.parse(i):(Jl("Failed to decode base64 JWT payload"),null)}catch(i){return Jl("Caught error parsing JWT payload as JSON",i?.toString()),null}}function eb(t){let e=fb(t);return ie(e,"internal-error"),ie(typeof e.exp<"u","internal-error"),ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function pv(t,e,n=!1){return p(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof Mt&&KL(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function KL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var gv=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>p(this,null,function*(){yield this.iteration()}),n)}iteration(){return p(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Ra=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sa(this.lastLoginAt),this.creationTime=Sa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function nd(t){return p(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield pv(t,hb(n,{idToken:r}));ie(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?pb(s.providerUserInfo):[],a=QL(t.providerData,o),c=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!a?.length,l=c?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Ra(s.createdAt,s.lastLoginAt),isAnonymous:l};Object.assign(t,d)})}function Cv(t){return p(this,null,function*(){let e=sn(t);yield nd(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function QL(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function pb(t){return t.map(e=>{var{providerId:n}=e,r=xd(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function YL(t,e){return p(this,null,function*(){let n=yield lb(t,{},()=>p(this,null,function*(){let r=Xp({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=db(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",td.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function JL(t,e){return p(this,null,function*(){return sd(t,"POST","/v2/accounts:revokeToken",ub(t,e))})}var Aa=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ie(e.idToken,"internal-error"),ie(typeof e.idToken<"u","internal-error"),ie(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):eb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ie(e.length!==0,"internal-error");let n=eb(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return p(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return p(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield YL(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(ie(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(ie(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(ie(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return ba("not implemented")}};function ur(t,e){ie(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var Ma=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=xd(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new gv(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Ra(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return p(this,null,function*(){let n=yield pv(this,this.stsTokenManager.getToken(this.auth,e));return ie(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return Dv(this,e)}reload(){return Cv(this)}_assign(e){this!==e&&(ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return p(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield nd(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return p(this,null,function*(){if(Zi(this.auth.app))return Promise.reject(Zl(this.auth));let e=yield this.getIdToken();return yield pv(this,WL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,c,u,l;let d=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(i=n.email)!==null&&i!==void 0?i:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,g=(o=n.photoURL)!==null&&o!==void 0?o:void 0,v=(a=n.tenantId)!==null&&a!==void 0?a:void 0,_=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,C=(u=n.createdAt)!==null&&u!==void 0?u:void 0,Y=(l=n.lastLoginAt)!==null&&l!==void 0?l:void 0,{uid:$,emailVerified:he,isAnonymous:je,providerData:se,stsTokenManager:Ke}=n;ie($&&Ke,e,"internal-error");let zt=Aa.fromJSON(this.name,Ke);ie(typeof $=="string",e,"internal-error"),ur(d,e.name),ur(h,e.name),ie(typeof he=="boolean",e,"internal-error"),ie(typeof je=="boolean",e,"internal-error"),ur(f,e.name),ur(g,e.name),ur(v,e.name),ur(_,e.name),ur(C,e.name),ur(Y,e.name);let lr=new t({uid:$,auth:e,email:h,emailVerified:he,displayName:d,isAnonymous:je,photoURL:g,phoneNumber:f,tenantId:v,stsTokenManager:zt,createdAt:C,lastLoginAt:Y});return se&&Array.isArray(se)&&(lr.providerData=se.map(oi=>Object.assign({},oi))),_&&(lr._redirectEventId=_),lr}static _fromIdTokenResponse(e,n,r=!1){return p(this,null,function*(){let i=new Aa;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield nd(s),s})}static _fromGetAccountInfoResponse(e,n,r){return p(this,null,function*(){let i=n.users[0];ie(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?pb(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new Aa;a.updateFromIdToken(r);let c=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Ra(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(c,u),c})}};var tb=new Map;function ri(t){ed(t instanceof Function,"Expected a class definition");let e=tb.get(t);return e?(ed(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,tb.set(t,e),e)}var ZL=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return p(this,null,function*(){return!0})}_set(n,r){return p(this,null,function*(){this.storage[n]=r})}_get(n){return p(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return p(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),mv=ZL;function hv(t,e,n){return`firebase:${t}:${e}:${n}`}var rd=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=hv(this.userKey,i.apiKey,s),this.fullPersistenceKey=hv("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return p(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Ma._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return p(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return p(this,null,function*(){if(!n.length)return new t(ri(mv),e,r);let i=(yield Promise.all(n.map(u=>p(this,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),s=i[0]||ri(mv),o=hv(r,e.config.apiKey,e.name),a=null;for(let u of n)try{let l=yield u._get(o);if(l){let d=Ma._fromJSON(e,l);u!==s&&(a=d),s=u;break}}catch{}let c=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new t(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(u=>p(this,null,function*(){if(u!==s)try{yield u._remove(o)}catch{}}))),new t(s,e,r))})}};function nb(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(nU(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(XL(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(iU(e))return"Blackberry";if(sU(e))return"Webos";if(eU(e))return"Safari";if((e.includes("chrome/")||tU(e))&&!e.includes("edge/"))return"Chrome";if(rU(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function XL(t=_t()){return/firefox\//i.test(t)}function eU(t=_t()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function tU(t=_t()){return/crios\//i.test(t)}function nU(t=_t()){return/iemobile/i.test(t)}function rU(t=_t()){return/android/i.test(t)}function iU(t=_t()){return/blackberry/i.test(t)}function sU(t=_t()){return/webos/i.test(t)}function gb(t,e=[]){let n;switch(t){case"Browser":n=nb(_t());break;case"Worker":n=`${nb(_t())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Xi}/${r}`}var yv=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return p(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function oU(n){return p(this,arguments,function*(t,e={}){return sd(t,"GET","/v2/passwordPolicy",ub(t,e))})}var aU=6,vv=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:aU,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var _v=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new id(this),this.idTokenSubscription=new id(this),this.beforeStateQueue=new yv(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ab,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=ri(n)),this._initializationPromise=this.queue(()=>p(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield rd.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return p(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return p(this,null,function*(){try{let n=yield hb(this,{idToken:e}),r=yield Ma._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return p(this,null,function*(){var n;if(Zi(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ie(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return p(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return p(this,null,function*(){try{yield nd(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=HL()}_delete(){return p(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return p(this,null,function*(){if(Zi(this.app))return Promise.reject(Zl(this));let n=e?sn(e):null;return n&&ie(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return p(this,null,function*(){if(!this._deleted)return e&&ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>p(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return p(this,null,function*(){return Zi(this.app)?Promise.reject(Zl(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Zi(this.app)?Promise.reject(Zl(this)):this.queue(()=>p(this,null,function*(){yield this.assertedPersistence.setPersistence(ri(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return p(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return p(this,null,function*(){let e=yield oU(this),n=new vv(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new xn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return p(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield JL(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return p(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return p(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&ri(e)||this._popupRedirectResolver;ie(n,this,"argument-error"),this.redirectPersistenceManager=yield rd.create(this,[ri(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return p(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>p(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return p(this,null,function*(){if(e===this.currentUser)return this.queue(()=>p(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ie(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(n);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return p(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=gb(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return p(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return p(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&jL(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function cU(t){return sn(t)}var id=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=VD(n=>this.observer=n)}get next(){return ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var uU={loadJS(){return p(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function lU(t){uU=t}function dU(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function hU(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(ri);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}var _9=dU("rcb"),I9=new ii(3e4,6e4);var w9=new ii(2e3,1e4);var E9=10*60*1e3;var D9=new ii(3e4,6e4);var C9=new ii(5e3,15e3);var T9=encodeURIComponent("fac");var rb="@firebase/auth",ib="1.7.2";var Iv=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return p(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function fU(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function pU(t){rr(new xt("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;ie(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:gb(t)},u=new _v(r,i,s,c);return hU(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),rr(new xt("auth-internal",e=>{let n=cU(e.getProvider("auth").getImmediate());return(r=>new Iv(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Fe(rb,ib,fU(t)),Fe(rb,ib,"esm2017")}var gU=5*60,b9=MD("authIdTokenMaxAge")||gU;function mU(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}lU({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=wv("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",mU().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});pU("Browser");var g2="auth";var od=class{constructor(){return Ea(g2)}};var si=class{constructor(e){return e}},mb="firestore",Tv=class{constructor(){return Ea(mb)}};var bv=new b("angularfire2.firestore-instances");function m2(t,e){let n=uv(mb,t,e);return n&&new si(n)}function y2(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new si(r)}}var v2={provide:Tv,deps:[[new bt,bv]]},_2={provide:si,useFactory:m2,deps:[[new bt,bv],ni]},I2=(()=>{class t{constructor(){Fe("angularfire",Ss.full,"fst")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=Oe({type:t});static \u0275inj=Pe({providers:[_2,v2]})}return t})();function yb(t,...e){return{ngModule:I2,providers:[{provide:bv,useFactory:y2(t),multi:!0,deps:[ne,nt,Da,Ta,[new bt,od],[new bt,wa],...e]}]}}var vb=Ca(j0,!0);var Sb=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(ee(xr),ee(Ut))},e.\u0275dir=qe({type:e});let t=e;return t})(),E2=(()=>{let e=class e extends Sb{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Li(e)))(s||e)}})(),e.\u0275dir=qe({type:e,features:[Sn]});let t=e;return t})(),Ab=new b("");var D2={provide:Ab,useExisting:Ar(()=>fd),multi:!0};function C2(){let t=tn()?tn().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var T2=new b(""),fd=(()=>{let e=class e extends Sb{constructor(r,i,s){super(r,i),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!C2())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(ee(xr),ee(Ut),ee(T2,8))},e.\u0275dir=qe({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){i&1&&ue("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[Ys([D2]),Sn]});let t=e;return t})();function b2(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}var Av=new b(""),Rb=new b("");function S2(t){return b2(t.value)?{required:!0}:null}function _b(t){return null}function Mb(t){return t!=null}function xb(t){return Pr(t)?ve(t):t}function Nb(t){let e={};return t.forEach(n=>{e=n!=null?E(E({},e),n):e}),Object.keys(e).length===0?null:e}function Pb(t,e){return e.map(n=>n(t))}function A2(t){return!t.validate}function Ob(t){return t.map(e=>A2(e)?e:n=>e.validate(n))}function R2(t){if(!t)return null;let e=t.filter(Mb);return e.length==0?null:function(n){return Nb(Pb(n,e))}}function Rv(t){return t!=null?R2(Ob(t)):null}function M2(t){if(!t)return null;let e=t.filter(Mb);return e.length==0?null:function(n){let r=Pb(n,e).map(xb);return Pd(r).pipe(q(Nb))}}function Mv(t){return t!=null?M2(Ob(t)):null}function Ib(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function x2(t){return t._rawValidators}function N2(t){return t._rawAsyncValidators}function Sv(t){return t?Array.isArray(t)?t:[t]:[]}function cd(t,e){return Array.isArray(t)?t.includes(e):t===e}function wb(t,e){let n=Sv(e);return Sv(t).forEach(i=>{cd(n,i)||n.push(i)}),n}function Eb(t,e){return Sv(e).filter(n=>!cd(t,n))}var ud=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Rv(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Mv(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Rs=class extends ud{get formDirective(){return null}get path(){return null}},Oa=class extends ud{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},ld=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},P2={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},K6=ce(E({},P2),{"[class.ng-submitted]":"isSubmitted"}),kb=(()=>{let e=class e extends ld{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(ee(Oa,2))},e.\u0275dir=qe({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){i&2&&Zc("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[Sn]});let t=e;return t})(),Fb=(()=>{let e=class e extends ld{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(ee(Rs,10))},e.\u0275dir=qe({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,s){i&2&&Zc("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[Sn]});let t=e;return t})();var xa="VALID",ad="INVALID",As="PENDING",Na="DISABLED";function Vb(t){return(pd(t)?t.validators:t)||null}function O2(t){return Array.isArray(t)?Rv(t):t||null}function Lb(t,e){return(pd(e)?e.asyncValidators:t)||null}function k2(t){return Array.isArray(t)?Mv(t):t||null}function pd(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function F2(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new T(1e3,"");if(!r[n])throw new T(1001,"")}function V2(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new T(1002,"")})}var dd=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===xa}get invalid(){return this.status===ad}get pending(){return this.status==As}get disabled(){return this.status===Na}get enabled(){return this.status!==Na}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(wb(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(wb(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Eb(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Eb(e,this._rawAsyncValidators))}hasValidator(e){return cd(this._rawValidators,e)}hasAsyncValidator(e){return cd(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=As,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Na,this.errors=null,this._forEachChild(r=>{r.disable(ce(E({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ce(E({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=xa,this._forEachChild(r=>{r.enable(ce(E({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ce(E({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===xa||this.status===As)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Na:xa}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=As,this._hasOwnPendingAsyncValidator=!0;let n=xb(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Te,this.statusChanges=new Te}_calculateStatus(){return this._allControlsDisabled()?Na:this.errors?ad:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(As)?As:this._anyControlsHaveStatus(ad)?ad:xa}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){pd(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=O2(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=k2(this._rawAsyncValidators)}},hd=class extends dd{constructor(e,n,r){super(Vb(n),Lb(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){V2(this,!0,e),Object.keys(e).forEach(r=>{F2(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var xv=new b("CallSetDisabledState",{providedIn:"root",factory:()=>Nv}),Nv="always";function L2(t,e){return[...e.path,t]}function Ub(t,e,n=Nv){jb(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),j2(t,e),$2(t,e),B2(t,e),U2(t,e)}function Db(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function U2(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function jb(t,e){let n=x2(t);e.validator!==null?t.setValidators(Ib(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=N2(t);e.asyncValidator!==null?t.setAsyncValidators(Ib(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();Db(e._rawValidators,i),Db(e._rawAsyncValidators,i)}function j2(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&Bb(t,e)})}function B2(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&Bb(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function Bb(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function $2(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function H2(t,e){t==null,jb(t,e)}function q2(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function z2(t){return Object.getPrototypeOf(t.constructor)===E2}function G2(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function W2(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(s=>{s.constructor===fd?n=s:z2(s)?r=s:i=s}),i||r||n||null}var K2={provide:Rs,useExisting:Ar(()=>Pv)},Pa=Promise.resolve(),Pv=(()=>{let e=class e extends Rs{constructor(r,i,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Te,this.form=new hd({},Rv(r),Mv(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){Pa.then(()=>{let i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),Ub(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){Pa.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){Pa.then(()=>{let i=this._findContainer(r.path),s=new hd({});H2(s,r),i.registerControl(r.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){Pa.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){Pa.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submitted=!0,G2(this.form,this._directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}};e.\u0275fac=function(i){return new(i||e)(ee(Av,10),ee(Rb,10),ee(xv,8))},e.\u0275dir=qe({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,s){i&1&&ue("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{options:[at.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Ys([K2]),Sn]});let t=e;return t})();function Cb(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Tb(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var Q2=class extends dd{constructor(e=null,n,r){super(Vb(n),Lb(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),pd(n)&&(n.nonNullable||n.initialValueIsDefault)&&(Tb(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Cb(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Cb(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Tb(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var Y2={provide:Oa,useExisting:Ar(()=>Ov)},bb=Promise.resolve(),Ov=(()=>{let e=class e extends Oa{constructor(r,i,s,o,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new Q2,this._registered=!1,this.name="",this.update=new Te,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=W2(this,o)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),q2(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Ub(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){bb.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,s=i!==0&&Zs(i);bb.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?L2(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)(ee(Rs,9),ee(Av,10),ee(Rb,10),ee(Ab,10),ee(Or,8),ee(xv,8))},e.\u0275dir=qe({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[at.None,"disabled","isDisabled"],model:[at.None,"ngModel","model"],options:[at.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Ys([Y2]),Sn,Rr]});let t=e;return t})(),$b=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=qe({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})();var J2=(()=>{let e=class e{constructor(){this._validator=_b}ngOnChanges(r){if(this.inputName in r){let i=this.normalizeInput(r[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):_b,this._onChange&&this._onChange()}}validate(r){return this._validator(r)}registerOnValidatorChange(r){this._onChange=r}enabled(r){return r!=null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=qe({type:e,features:[Rr]});let t=e;return t})();var Z2={provide:Av,useExisting:Ar(()=>kv),multi:!0};var kv=(()=>{let e=class e extends J2{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Zs,this.createValidator=r=>S2}enabled(r){return r}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Li(e)))(s||e)}})(),e.\u0275dir=qe({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,s){i&2&&Jc("required",s._enabled?"":null)},inputs:{required:"required"},features:[Ys([Z2]),Sn]});let t=e;return t})();var X2=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Oe({type:e}),e.\u0275inj=Pe({});let t=e;return t})();var Hb=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:xv,useValue:r.callSetDisabledState??Nv}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Oe({type:e}),e.\u0275inj=Pe({imports:[X2]});let t=e;return t})();var tj=["taskInput"],qb=(t,e,n)=>({edit:t,"not-edit":e,crossed:n});function nj(t,e){if(t&1){let n=mt();W(0,"i",27),ue("click",function(){_e(n);let i=Q();return Ie(i.saveAndCopyUrl())}),K()}}function rj(t,e){t&1&&de(0,"i",28)}function ij(t,e){t&1&&(W(0,"small",29),rt(1," * Required Field "),K())}function sj(t,e){if(t&1){let n=mt();W(0,"button",42),ue("click",function(){_e(n);let i=Q(2).$implicit,s=Q();return Ie(s.onCheck(i.id))}),de(1,"i",43),K()}}function oj(t,e){if(t&1){let n=mt();W(0,"button",44),ue("click",function(){_e(n);let i=Q(2).$implicit,s=Q();return Ie(s.onCheck(i.id))}),de(1,"i",45),K()}}function aj(t,e){if(t&1){let n=mt();W(0,"button",46),ue("click",function(){_e(n);let i=Q(2).$implicit,s=Q();return Ie(s.onEdit(i.id))}),de(1,"i",47),K()}}function cj(t,e){if(t&1){let n=mt();W(0,"button",44),ue("click",function(){_e(n),Q();let i=Nr(3),s=Q().$implicit,o=Q();return Ie(o.onSave(s.id,i.value))}),de(1,"i",48),K()}}function uj(t,e){if(t&1){let n=mt();W(0,"div",32)(1,"div",33)(2,"input",34,1),ue("keyup.enter",function(){_e(n);let i=Nr(3),s=Q().$implicit,o=Q();return Ie(o.onSave(s.id,i.value))}),K()(),W(4,"div",35)(5,"div",36),gt(6,sj,2,0,"button",37)(7,oj,2,0,"button",38)(8,aj,2,0,"button",39)(9,cj,2,0,"button",38),W(10,"button",40),ue("click",function(){_e(n);let i=Q().$implicit,s=Q();return Ie(s.onDelete(i.id))}),de(11,"i",41),K()()()()}if(t&2){let n=Q().$implicit;ge(2),ye("value",n.taskName)("readOnly",!n.isEditable)("ngClass",Ff(7,qb,n.isEditable,!n.isEditable,n.isCompleted)),ge(4),ye("ngIf",!n.isCompleted),ge(),ye("ngIf",n.isCompleted),ge(),ye("ngIf",!n.isEditable),ge(),ye("ngIf",n.isEditable)}}function lj(t,e){if(t&1&&(W(0,"div",30),gt(1,uj,12,11,"div",31),K()),t&2){let n=e.$implicit;ge(),ye("ngIf",!n.isArchived)}}function dj(t,e){if(t&1){let n=mt();W(0,"button",46),ue("click",function(){_e(n);let i=Q(2).$implicit,s=Q();return Ie(s.onEdit(i.id))}),de(1,"i",47),K()}}function hj(t,e){if(t&1){let n=mt();W(0,"button",44),ue("click",function(){_e(n),Q();let i=Nr(3),s=Q().$implicit,o=Q();return Ie(o.onSave(s.id,i.value))}),de(1,"i",48),K()}}function fj(t,e){if(t&1){let n=mt();W(0,"div",32)(1,"div",33)(2,"input",34,1),ue("keyup.enter",function(){_e(n);let i=Nr(3),s=Q().$implicit,o=Q();return Ie(o.onSave(s.id,i.value))}),K()(),W(4,"div",35)(5,"div",36)(6,"button",44),ue("click",function(){_e(n);let i=Q().$implicit,s=Q();return Ie(s.onUndoCheck(i.id))}),de(7,"i",49),K(),gt(8,dj,2,0,"button",39)(9,hj,2,0,"button",38),W(10,"button",40),ue("click",function(){_e(n);let i=Q().$implicit,s=Q();return Ie(s.onDelete(i.id))}),de(11,"i",41),K()()()()}if(t&2){let n=Q().$implicit;ge(2),ye("value",n.taskName)("readOnly",!n.isEditable)("ngClass",Ff(5,qb,n.isEditable,!n.isEditable,n.isCompleted)),ge(6),ye("ngIf",!n.isEditable),ge(),ye("ngIf",n.isEditable)}}function pj(t,e){if(t&1&&(W(0,"div",30),gt(1,fj,12,9,"div",31),K()),t&2){let n=e.$implicit;ge(),ye("ngIf",n.isArchived)}}function gj(t,e){if(t&1&&(W(0,"p",50),rt(1),K()),t&2){let n=Q();ge(),kf(n.toastMessage)}}function mj(t,e){if(t&1){let n=mt();W(0,"button",51),ue("click",function(){_e(n);let i=Q();return Ie(i.showMore=!i.showMore)}),de(1,"i",52),rt(2),K()}if(t&2){let n=Q();ge(),ye("ngClass",n.showMore?"bi-chevron-down":"bi-chevron-up"),ge(),Xc(" ",n.showMore?"Less":"More"," ")}}function yj(t,e){if(t&1){let n=mt();W(0,"div",18)(1,"button",53),ue("click",function(){_e(n);let i=Q();return Ie(i.saveToDB())}),de(2,"i",54),rt(3," Save to DB "),K(),W(4,"button",53),ue("click",function(){_e(n);let i=Q();return Ie(i.refreshTasks())}),de(5,"i",55),rt(6," Refresh "),K(),W(7,"button",23),ue("click",function(){_e(n);let i=Q();return Ie(i.deleteArchivedTasks())}),de(8,"i",41),rt(9," Delete Archived "),K(),W(10,"button",56),ue("click",function(){_e(n);let i=Q();return Ie(i.deleteAllTasks())}),de(11,"i",57),rt(12," Delete All "),K()()}}var Fv=(()=>{let e=class e{handleKeyDown(r){r.ctrlKey&&r.key==="z"?this.undo():r.ctrlKey&&r.key==="y"&&this.redo()}constructor(r,i,s){this.firestore=r,this.route=i,this.router=s,this.taskArray=[],this.nextId=0,this.previousStates=[],this.futureStates=[],this.showMore=!1,this.isLargeScreen=!1,this.idFromUrl="",this.isSaved=!1,this.toastMessage=null}saveToDB(){return p(this,null,function*(){try{this.idFromUrl||(this.idFromUrl=Math.random().toString(16).substr(2,8),this.router.navigate(["/",this.idFromUrl]));let r=Wl(this.firestore,"todos",this.idFromUrl);yield av(r,{tasks:this.taskArray}),this.showToastMessage(`Saved to cloud with id: ${this.idFromUrl}`,2e3)}catch(r){console.error("Error adding document: ",r)}})}saveAndCopyUrl(){return p(this,null,function*(){yield this.saveToDB(),navigator.clipboard.writeText(window.location.href),this.isSaved=!0,setTimeout(()=>{this.isSaved=!1},2e3)})}ngOnInit(){this.isLargeScreen=window.innerWidth>768,this.showMore=this.isLargeScreen,this.route.params.subscribe(r=>{this.idFromUrl=r.id,this.loadTasks()})}onSubmit(r){this.savePreviousState();let i={id:this.nextId++,taskName:r.value.task,isCompleted:!1,isEditable:!1,isArchived:!1};this.taskArray.push(i),r.reset(),this.saveTasks()}onDelete(r){this.savePreviousState(),this.taskArray=this.taskArray.filter(i=>i.id!==r),this.saveTasks(),this.showToastMessage("Task Deleted. Undo to revert action.",1e3)}onCheck(r){this.savePreviousState();let i=this.taskArray.find(s=>s.id===r);i&&(i.isCompleted=!i.isCompleted,this.saveTasks())}onUndoCheck(r){let i=this.taskArray.find(s=>s.id===r);i&&(i.isArchived=!i.isArchived,this.saveTasks())}onEdit(r){this.savePreviousState();let i=this.taskArray.find(s=>s.id===r);i&&(i.isEditable=!0,this.saveTasks(),setTimeout(()=>{let s=this.taskInputs?.find(o=>o.nativeElement.value===i.taskName);s&&s.nativeElement.focus()}))}onSave(r,i){this.savePreviousState();let s=this.taskArray.find(o=>o.id===r);s&&(s.taskName=i,s.isEditable=!1,this.saveTasks())}refreshTasks(){this.loadTasks(),console.log(this.taskArray)}moveCompletedToArchive(){this.savePreviousState(),this.taskArray.forEach(r=>{r.isCompleted&&(r.isArchived=!0)}),this.saveTasks()}deleteArchivedTasks(){this.savePreviousState(),this.taskArray=this.taskArray.filter(r=>!r.isArchived),this.saveTasks()}deleteAllTasks(){this.savePreviousState(),this.taskArray=[],this.saveTasks()}savePreviousState(){this.previousStates.push(JSON.parse(JSON.stringify(this.taskArray)))}showToastMessage(r,i){this.toastMessage=r,setTimeout(()=>{this.toastMessage=null},i)}undo(){this.previousStates.length>0&&(this.futureStates.push(JSON.parse(JSON.stringify(this.taskArray))),this.taskArray=this.previousStates.pop(),this.saveTasks())}redo(){this.futureStates.length>0&&(this.previousStates.push(JSON.parse(JSON.stringify(this.taskArray))),this.taskArray=this.futureStates.pop(),this.saveTasks())}saveTasks(){localStorage.setItem("tasks",JSON.stringify(this.taskArray))}loadTasks(){return p(this,null,function*(){if(this.idFromUrl){let r=Wl(this.firestore,"todos",this.idFromUrl),i=yield ov(r);i.exists()?(this.taskArray=i.data().tasks,this.nextId=this.taskArray.length>0?Math.max(...this.taskArray.map(s=>s.id))+1:0):this.loadTasksFromLocalStorage()}else this.loadTasksFromLocalStorage()})}loadTasksFromLocalStorage(){let r=localStorage.getItem("tasks");r?(this.taskArray=JSON.parse(r),this.nextId=this.taskArray.length>0?Math.max(...this.taskArray.map(i=>i.id))+1:0):(this.taskArray=[],this.nextId=0)}};e.\u0275fac=function(i){return new(i||e)(ee(si),ee(Xn),ee(Mn))},e.\u0275cmp=ki({type:e,selectors:[["app-todolist"]],viewQuery:function(i,s){if(i&1&&Qw(tj,5),i&2){let o;Pf(o=Of())&&(s.taskInputs=o)}},hostBindings:function(i,s){i&1&&ue("keydown",function(a){return s.handleKeyDown(a)},!1,hw)},decls:37,vars:11,consts:[["taskForm","ngForm"],["taskInput",""],[1,"container"],["class","bi bi-cloud-arrow-up ms-2",3,"click",4,"ngIf"],["class","bi bi-cloud-check-fill text-success ms-2",4,"ngIf"],[1,"mt-4",3,"ngSubmit"],[1,"form-group","row","justify-content-center"],[1,"col-8","col-md-6"],["type","text","id","task","placeholder","Enter task","ngModel","","name","task","required","",1,"form-control","col-10"],["id","errorMessage","class","form-text text-danger mt-1",4,"ngIf"],[1,"col-4","col-md-2","w-auto"],["type","submit",1,"btn","btn-primary","col",3,"disabled"],[1,"text-center","display-5"],["class","col",4,"ngFor","ngForOf"],[1,"text-center","display-6","mt-5"],[1,"fixed-bottom","bg-secondary-subtle"],["class","text-center m-auto",4,"ngIf"],[1,"btn-toolbar","justify-content-center","mt-1"],["role","group",1,"btn-group-sm"],["type","button",1,"btn","btn-primary","me-2",3,"click","disabled"],[1,"bi","bi-arrow-90deg-left"],["type","button",1,"btn","btn-primary","m-1",3,"click","disabled"],[1,"bi","bi-arrow-90deg-right"],["type","button",1,"btn","btn-warning","m-1",3,"click"],[1,"bi","bi-arrow-down-square"],["type","button","class","btn btn-secondary m-1",3,"click",4,"ngIf"],["class","btn-group-sm","role","group",4,"ngIf"],[1,"bi","bi-cloud-arrow-up","ms-2",3,"click"],[1,"bi","bi-cloud-check-fill","text-success","ms-2"],["id","errorMessage",1,"form-text","text-danger","mt-1"],[1,"col"],["class","form-group row justify-content-center mt-2",4,"ngIf"],[1,"form-group","row","justify-content-center","mt-2"],[1,"col-8","col-md-4"],["type","text",1,"form-control",3,"keyup.enter","value","readOnly","ngClass"],[1,"col-4","col-md-2"],["role","group",1,"btn-group","mr-2","action-button-group"],["type","button","class","btn btn-outline-success",3,"click",4,"ngIf"],["type","button","class","btn btn-outline-warning",3,"click",4,"ngIf"],["type","button","class","btn btn-outline-primary",3,"click",4,"ngIf"],["type","button",1,"btn","btn-outline-danger",3,"click"],[1,"bi","bi-trash3"],["type","button",1,"btn","btn-outline-success",3,"click"],[1,"bi","bi-check-circle-fill"],["type","button",1,"btn","btn-outline-warning",3,"click"],[1,"bi","bi-check-circle"],["type","button",1,"btn","btn-outline-primary",3,"click"],[1,"bi","bi-pencil"],[1,"bi","bi-floppy"],[1,"bi","bi-arrow-up-square"],[1,"text-center","m-auto"],["type","button",1,"btn","btn-secondary","m-1",3,"click"],[1,"bi",3,"ngClass"],["type","button",1,"btn","btn-success","m-1",3,"click"],[1,"bi","bi-cloud-arrow-up"],[1,"bi","bi-arrow-clockwise"],["type","button",1,"btn","btn-danger","m-1",3,"click"],[1,"bi","bi-trash3-fill"]],template:function(i,s){if(i&1){let o=mt();W(0,"div",2)(1,"h1"),rt(2," Todo - list"),gt(3,nj,1,0,"i",3)(4,rj,1,0,"i",4),K(),de(5,"hr"),W(6,"form",5,0),ue("ngSubmit",function(){_e(o);let c=Nr(7);return Ie(s.onSubmit(c))}),W(8,"div",6)(9,"div",7),de(10,"input",8),gt(11,ij,2,0,"small",9),K(),W(12,"div",10)(13,"button",11),rt(14," Submit "),K()()()(),de(15,"hr"),W(16,"h3",12),rt(17,"Current Tasks"),K(),gt(18,lj,2,1,"div",13),W(19,"h2",14),rt(20,"Archived Tasks"),K(),gt(21,pj,2,1,"div",13),K(),W(22,"div",15),gt(23,gj,2,1,"p",16),W(24,"div",17)(25,"div",18)(26,"button",19),ue("click",function(){return _e(o),Ie(s.undo())}),de(27,"i",20),rt(28," Undo "),K(),W(29,"button",21),ue("click",function(){return _e(o),Ie(s.redo())}),de(30,"i",22),rt(31," Redo "),K(),W(32,"button",23),ue("click",function(){return _e(o),Ie(s.moveCompletedToArchive())}),de(33,"i",24),rt(34," Archive "),K(),gt(35,mj,3,2,"button",25),K(),gt(36,yj,13,0,"div",26),K()()}if(i&2){let o=Nr(7);ge(3),ye("ngIf",!s.isSaved),ge(),ye("ngIf",s.isSaved),ge(7),ye("ngIf",o.dirty&&o.invalid),ge(2),ye("disabled",o.invalid),ge(5),ye("ngForOf",s.taskArray),ge(3),ye("ngForOf",s.taskArray),ge(2),ye("ngIf",s.toastMessage),ge(3),ye("disabled",s.previousStates.length===0),ge(3),ye("disabled",s.futureStates.length===0),ge(6),ye("ngIf",!s.isLargeScreen),ge(),ye("ngIf",s.showMore)}},dependencies:[IE,wE,EE,$b,fd,kb,Fb,kv,Ov,Pv],styles:["h1[_ngcontent-%COMP%]{text-align:center;font-size:2em;margin-top:20px}.container[_ngcontent-%COMP%]{margin-bottom:100px}#taskInTable[_ngcontent-%COMP%]{max-width:300px}.edit[_ngcontent-%COMP%]{border:solid 2px orange}.not-edit[_ngcontent-%COMP%]{border:none;font-weight:700}.crossed[_ngcontent-%COMP%]{text-decoration:line-through;font-weight:400}.action-button-group[_ngcontent-%COMP%]{width:80px}@media (min-width: 769px){.action-button-group[_ngcontent-%COMP%]{width:160px}}.action-button-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{padding:4px 6px}.action-button-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:first-child{padding:4px 16px}@media (min-width: 769px){.action-button-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:first-child{padding:4px 24px}}"]});let t=e;return t})();var vj=[{path:"",component:Fv},{path:":id",component:Fv}],zb=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Oe({type:e}),e.\u0275inj=Pe({imports:[Gp.forRoot(vj),Gp]});let t=e;return t})();var Gb=(()=>{let e=class e{constructor(){this.title="todo"}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=ki({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(i,s){i&1&&de(0,"router-outlet")},dependencies:[Up]});let t=e;return t})();var Wb={production:!1,firebase:{projectId:"ng-todo-app-b950c",appId:"1:272917951318:web:e76ef1dea409f4c5939cf7",storageBucket:"ng-todo-app-b950c.appspot.com",apiKey:"AIzaSyCwKCBUIfKYfj1lr4UZT7SUANmrj9fcbXU",authDomain:"ng-todo-app-b950c.firebaseapp.com",messagingSenderId:"272917951318",measurementId:"G-HHSKDPKLSE"}};var Kb=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Oe({type:e,bootstrap:[Gb]}),e.\u0275inj=Pe({imports:[PE,zb,Hb,Y0(()=>J0(Wb.firebase)),yb(()=>vb())]});let t=e;return t})();NE().bootstrapModule(Kb).catch(t=>console.error(t));
